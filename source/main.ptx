<?xml version='1.0' encoding='utf-8'?>

<pretext xml:lang="en-US" xmlns:xi="http://www.w3.org/2001/XInclude">

  <docinfo>

    <!-- the other option is "long" which will produce an -->
    <!-- entire front matter section with more headings   -->
    <author-biographies length="short" />

    <!--
    <brandlogo url="http://abstract.pugetsound.edu" source="images/cover_aata_2014.png" />
    -->

    <!--
    <covers front="images/original-front-cover-aata.pdf"
            back="images/plain-back-cover-aata.pdf"/>
    -->

    <!-- Prefix to enhance Sage notebook contents -->
    <!--
    <initialism>AATA</initialism>
    -->

    <!-- Math-related macros from "macros.tex" in previous LaTeX version -->
    <!-- \notdivide replaces \notmid to avoid conflict with tikz - TWJ 5/6/2010 -->
    <!-- Added operator \gf  - TWJ 2/26/2013 -->
    <!-- Added operator \inn - TWJ 4/6/2013  -->
    <!-- Added operator \aut - TWJ 4/6/2013  -->
    <!-- Added operator \Hom - TWJ 8/19/2010 -->
    <macros>
        <!-- Operators     -->
        \def\ann{\operatorname{ann}}
        \newcommand{\Ass}{\operatorname{Ass}}
        \def\Aut{\operatorname{Aut}}
        \def\can{{\mathrm {can}}}
        \def\char{\operatorname{char}}
        \def\cp{\operatorname{CharPoly}}
        \def\codim{\operatorname{codim}} 
        \def\coker{\operatorname{coker}}
        \DeclareMathOperator*{\colim}{colim} 
        \def\cont{\operatorname{cont}} 
        \def\diam{\operatorname{diam}} 
        \def\dm{\operatorname{dim}} 
        \DeclareMathOperator{\edim}{embdim} 
        \def\End{\operatorname{End}} 
        \def\eval{\operatorname{eval}} 
        \def\Ext{\operatorname{Ext}} 
        \def\Frac{\operatorname{Frac}}
        \def\Fun{\operatorname{Fun}}
        \def\Gal{\operatorname{Gal}}
        \def\gcd{\operatorname{gcd}}
        \newcommand{\GL}{\operatorname{GL}} 
        \newcommand{\ht}{\operatorname{height}} 
        \def\Hom{\operatorname{Hom}} 
        \def\id{\operatorname{id}} 
        \def\im{\operatorname{im}} 
        \def\Inn{\operatorname{Inn}}
        \def\ker{\operatorname{ker}}
        \def\lcm{\operatorname{lcm}} 
        \def\Mat{\operatorname{Mat}}
        \newcommand{\Min}{\operatorname{Min}}
        \def\mp{\operatorname{MinPoly}}
        \def\mSpec{\operatorname{mSpec}}
        \def\MSpec{\operatorname{MSpec}}
        \def\null{\operatorname{Nul}}
        \DeclareMathOperator{\ns}{nullspace}
        \newcommand{\opp}{\operatorname{opp}}
        \def\Orb{\operatorname{Orb}} 
        \def\Out{\operatorname{Out}}
        \def\Perm{\operatorname{Perm}}
        \def\ptstab{\operatorname{PtStab}} 
        \def\rad{\operatorname{rad}}
        \DeclareMathOperator{\range}{range}
        \def\rank{\operatorname{rank}}
        \def\res{\operatorname{res}}
        \def\setstab{\operatorname{SetStab}}
        \def\sign{{\operatorname{sign}}}
        \newcommand{\SL}{\operatorname{SL}}
        \def\Span{\operatorname{Span}}
        \def\Spec{\operatorname{Spec}}
        \def\Stab{\operatorname{Stab}} 
        \DeclareMathOperator{\Supp}{Supp}
        \def\Syl{\operatorname{Syl}}
        \def\Tor{\operatorname{Tor}}
        \def\trace{\operatorname{trace}}
        \def\uSpec{\operatorname{\underline{Spec}}}
        <!-- Categories     -->
        \newcommand{\Ob}{\mathrm{Ob}}
        \newcommand{\Set}{\mathbf{Set}}
        \newcommand{\Grp}{\mathbf{Grp}}
        \newcommand{\Ab}{\mathbf{Ab}}
        \newcommand{\Sgrp}{\mathbf{Sgrp}}
        \newcommand{\Ring}{\mathbf{Ring}} 
        \newcommand{\Fld}{\mathbf{Fld}}
        \newcommand{\cRing}{\mathbf{cRing}}
        \newcommand{\Mod}[1]{#1-\mathbf{Mod}} 
        \newcommand{\Cx}[1]{#1-\mathbf{Comp}} 
        \newcommand{\vs}[1]{#1-\mathbf{vect}}
        \newcommand{\Vs}[1]{#1-\mathbf{Vect}}
        \newcommand{\vsp}[1]{#1-\mathbf{vect}^+} 
        \newcommand{\Top}{\mathbf{Top}} 
        \newcommand{\Setp}{\mathbf{Set}_*} 
        \newcommand{\Alg}[1]{#1-\mathbf{Alg}} 
        \newcommand{\cAlg}[1]{#1-\mathbf{cAlg}} 
        \newcommand{\PO}{\mathbf{PO}}
        \newcommand{\Cont}{\mathrm{Cont}}
        \newcommand{\MaT}[1]{\mathbf{Mat}_{#1}}
        \newcommand{\Rep}[2]{\mathbf{Rep}_{#1}(#2)}
        <!-- Greek     -->
        \def\l{\lambda}
        \def\lx{\lambda_x}
        \newcommand{\a}{\alpha}
        \def\b{\beta}
        \def\d{\delta}
        \def\e{\varepsilon}
        \def\g{\gamma}
        \def\t{\theta}
        \def\s{\sigma}
        \def\z{\zeta}
        \def\vp{\varphi}
        <!-- Letters     -->
        <!-- MathBB     -->
        \newcommand{\A}{\mathbb{A}}
        \newcommand{\B}{\mathbb{B}}
        \newcommand{\C}{\mathbb{C}}
        \newcommand{\D}{\mathbb{D}}
        \newcommand{\E}{\mathbb{E}}
        \newcommand{\F}{\mathbb{F}}
        \newcommand{\G}{\mathbb{G}}
        \newcommand{\H}{\mathbb{H}}
        \newcommand{\I}{\mathbb{I}}
        \newcommand{\J}{\mathbb{J}}
        \newcommand{\K}{\mathbb{K}}
        \newcommand{\L}{\mathbb{L}} 
        \newcommand{\M}{\mathbb{M}}
        \newcommand{\N}{\mathbb{N}}
        \newcommand{\O}{\mathbb{O}}
        \newcommand{\P}{\mathbb{P}}
        \newcommand{\Q}{\mathbb{Q}} 
        \newcommand{\R}{\mathbb{R}} 
        \newcommand{\S}{\mathbb{S}}
        \newcommand{\T}{\mathbb{T}}
        \newcommand{\U}{\mathbb{U}}
        \newcommand{\V}{\mathbb{V}}
        \newcommand{\W}{\mathbb{W}}
        \newcommand{\X}{\mathbb{X}}
        \newcommand{\Y}{\mathbb{Y}}
        \newcommand{\Z}{\mathbb{Z}} 
        \newcommand{\ON}{\mathbb{ON}}
        <!-- MathCal     -->
        \def\cA{\mathcal A} 
        \def\cB{\mathcal B} 
        \def\cC{\mathcal C} 
        \def\cD{\mathcal D} 
        \def\cE{\mathcal E} 
        \def\cF{\mathcal F} 
        \def\cG{\mathcal G} 
        \def\cH{\mathcal H} 
        \def\cI{\mathcal I} 
        \def\cJ{\mathcal J} 
        \def\cK{\mathcal K} 
        \def\cL{\mathcal L}
        \def\cM{\mathcal M} 
        \def\cN{\mathcal N} 
        \def\cO{\mathcal O} 
        \def\cP{\mathcal P} 
        \def\cQ{\mathcal Q} 
        \def\cR{\mathcal R} 
        \def\cS{\mathcal S} 
        \def\cT{\mathcal T} 
        \def\cU{\mathcal U} 
        \def\cV{\mathcal V} 
        \def\cW{\mathcal W} 
        \def\cX{\mathcal X} 
        \def\cY{\mathcal Y} 
        \def\cZ{\mathcal Z} 
        <!-- MathFrak     -->
        \newcommand{\fa}{{\mathfrak a}} 
        \newcommand{\fb}{{\mathfrak b}} 
        \newcommand{\fc}{{\mathfrak c}} 
        \newcommand{\fd}{{\mathfrak d}} 
        \newcommand{\fe}{{\mathfrak e}}
        \newcommand{\fm}{{\mathfrak m}} 
        \newcommand{\fp}{{\mathfrak p}} 
        \newcommand{\fq}{{\mathfrak q}} 
        \newcommand{\fK}{{\mathfrak K}} 
        \newcommand{\fR}{{\mathfrak R}} 
        <!-- MathScr     -->
        \def\sA{\mathscr A} 
        \def\sB{\mathscr B} 
        \def\sC{\mathscr C} 
        \def\sD{\mathscr D} 
        \def\sE{\mathscr E} 
        \def\sF{\mathscr F} 
        \def\sG{\mathscr G} 
        \def\sH{\mathscr H} 
        \def\sI{\mathscr I} 
        \def\sJ{\mathscr J} 
        \def\sK{\mathscr K} 
        \def\sL{\mathscr L}
        \def\sM{\mathscr M}
        \def\sN{\mathscr N}
        \def\sO{\mathscr O}
        \def\sP{\mathscr P}
        \def\sQ{\mathscr Q}
        \def\sR{\mathscr R}
        \def\sS{\mathscr S}
        \def\sT{\mathscr T}
        \def\sU{\mathscr U}
        \def\sV{\mathscr V}
        \def\sW{\mathscr W}
        \def\sX{\mathscr X}
        \def\sY{\mathscr Y}
        \def\sZ{\mathscr Z}
        <!-- Tildes     -->
        \def\tS{\tilde{S}}
        <!-- Algebra     -->
        \def\sdp{\rtimes}
        \newcommand{\tensor}{\otimes} 
        \newcommand{\igen}[1]{\langle #1 \rangle} 
        \def\nsg{\unlhd} 
        \def\kval{{k-\mathrm{valued}}} 
        \def\kalg{{k-\mathrm{alg}}}
        \newcommand\GG[2]{\Gal(#1/#2)}
        <!-- Matrices     -->
        \newcommand{\MF}[3]{\Mat_{#1\times #2}(#3)}
        \newcommand{\vectwo}[2]{\begin{bmatrix} #1 \\ #2 \end{bmatrix}} 
        \newcommand{\vecthree}[3]{\begin{bmatrix} #1 \\ #2 \\ #3\end{bmatrix}} 
        \def\ob{{\mathfrak{ob}} }
        <!-- Misc     -->
        \def\qed{\square}
        \def\sse{\subseteq}
        \def\ss{\subset} 
        \def\ssne{\subsetneq}
        \def\sm{\setminus}
        \def\inv{^{-1}} 
        \newcommand{\es}{\emptyset} 
        \newcommand{\Zm}[1]{\Z/({#1})} 
        \def\ov#1{\overline{#1}} 
        \def\xdots{x_1, \dots, x_n} 
        \def\adots{a_1, \dots, a_n} 
        \def\bdots{b_1, \dots, b_n} 
        \def\udots{u_1, \dots, u_n} 
        \newcommand{\leg}[2]{\left(\frac{{#1}}{{#2}}\right)} 
        \def\th{^{th}} 
        \def\htpy{\simeq_{\mathrm{htpc}}} 
        <!-- Math Text     -->
        \def\textand{ \, \text{and} \, } 
        \def\textor{ \, \text{or} \, } 
        \def\textfor{ \, \text{for} \, } 
        \def\textfa{ \, \text{for all} \, } 
        \def\textst{ \, \text{such that} \, } 
        \def\textin{ \, \text{in} \, } 
        \def\fg{ \, \text{finitely generated} \, }
        \newcommand{\op}{\mathrm{op}}
        <!-- Arrows     -->
        \newcommand{\xra}[1]{\xrightarrow{#1}} 
        \newcommand{\xora}[1]{\xtwoheadrightarrow{#1}} 
        \newcommand{\xira}[1]{\xhookrightarrow{#1}} 
        \newcommand{\xla}[1]{\xleftarrow{#1}} 
        \def\lra{\longrightarrow}
        \def\into{\hookrightarrow}
        \def\onto{\twoheadrightarrow}
        <!-- Vectors     -->
        \newcommand{\vv}[1]{\mathbf{#1}}
        \newcommand{\lm}[2]{{#1}\,\l + {#2}\,\mu} 
        \renewcommand{\v}{\vv{v}}
        \renewcommand{\u}{\vv{u}}
        \newcommand{\w}{\vv{w}}
        \newcommand{\x}{\vv{x}}
        \renewcommand{\k}{\vv{k}}
        \newcommand{\0}{\vv{0}}
        \newcommand{\1}{\vv{1}}
        \newcommand{\vecs}[2]{#1_1,#1_2,\dots,#1_{#2}}
        \newcommand{\us}[1][n]{\vecs{\u}{#1}}
        \newcommand{\vs}[1][n]{\vecs{\v}{#1}}
        \newcommand{\ws}[1][n]{\vecs{\w}{#1}}
        \newcommand{\vps}[1][n']{\vecs{\v'}{#1}}
        \newcommand{\ls}[1][n]{\vecs{\l}{#1}}
        \newcommand{\mus}[1][n]{\vecs{\mu}{#1}} 
        \newcommand{\lps}[1][n]{\vecs{\l'}{#1}}
        \def\td{\tilde{\delta}}
        \def\oo{\overline{\omega}}
        \def\ctJ{\tilde{\mathcal J}}
        \def\tPhi{\tilde{\Phi}}
        \def\te{\tilde{e}}
        \def\M{\operatorname{M}}
        \newcommand{\homotopic}{\simeq}
        \newcommand{\homeq}{\cong}
        \newcommand{\iso}{\approx}
        \newcommand{\dual}{\vee} 
        \DeclarePairedDelimiter{\abs}{|}{|}
        \newcommand{\bv}{{\bar{v}}}
        \newcommand{\bu}{{\bar{u}}}
        \newcommand{\bw}{{\bar{w}}}
        \newcommand{\by}{{\bar{y}}}
        \newcommand{\ba}{{\bar{a}}}
        \newcommand{\bb}{{\bar{b}}}
        \newcommand{\bx}{{\bar{x}}}
        \DeclarePairedDelimiterX\setof[2]{\{}{\}}{#1\,|\,#2}
        \newcommand{\vx}{\underline{x}}
        \renewcommand{mod}[1]{\text{(mod }{#1})}
        \newcommand{\Slv}[3]{\sum_{{#2}=1}^{{#3}} {#1}_{{#2}} \v_{{#2}}}
    </macros>

    <!-- this is the default, but supresses a warning -->
    <cross-references text="type-global" />

    <!-- tikz package and libraries for images -->
    <latex-image-preamble>
    \usepackage{tikz}
    \usetikzlibrary{backgrounds}
    \usetikzlibrary{arrows,matrix}
    \usetikzlibrary{snakes}
    </latex-image-preamble>

    <!--
    <rename @element="identity" xml:lang="fr-FR">Exercise</rename>
    -->

  </docinfo>

  <book xml:id="commutative-algebra"><title>Commutative Algebra</title>

    <frontmatter xml:id="frontmatter">
      <titlepage>
        <!--
        <author>
          <personname>Eloísa Grifo</personname>
          <institution>University of Nebraska - Lincoln</institution>
        </author>
        -->

        <author>
          <personname>Sam Macdonald</personname>
          <!--
          <department>Department of Mathematics</department>
          -->
          <institution>University of Nebraska -- Lincoln</institution>
        </author>
        <date>
          <today />
        </date>
      </titlepage>

      <colophon>

        <!--
        <website>
          <name>
            <c>Eloísa Grifo's Website</c>
          </name>
          <address>https://eloisagrifo.github.io/</address>
        </website>
        -->

        <website>
          <name>
            <c>Sam's Website</c>
          </name>
          <address>https://smakdonald.github.io/index.html</address>
        </website>
        
        <copyright>
          <year>2020<ndash />2023</year>
          <holder>Sam Macdonald</holder>
          <shortlicense> 
            This work is licensed under the Creative Commons Attribution-ShareAlike 4.0 International License. To view a copy of this license, visit <url href="http://creativecommons.org/licenses/by-sa/4.0/" visual="creativecommons.org/licenses/by-sa/4.0"> CreativeCommons.org</url>
          </shortlicense>
        </copyright>
      </colophon>

      <acknowledgement>
        <p>These notes have evolved from the notes I wrote for my commutative algebra class at the University of California, Riverside, in Winter 2021, which were in turn heavily based on Jack Jeffries and Alexandra Seceleanu's notes. I am very thankful to Jack and Alexandra for sharing their notes with me.</p>
        <p>I am also deeply thankful to all the students who have found typos and asked questions that lead to many improvements: Brandon Massaro, Rahul Rajkumar, Adam Richardson, Khoa Ta, Ryan Watson, Noble Williamson, Jordan Barrett, Julie Geraci, Sabrina Klement, Sam Macdonald, Jorge Gaspar Lara, Mikkel Munkholm, and Robert Thompson.</p>
        <p>-Eloísa</p>
      </acknowledgement>

      <preface><title>Warning!</title>
        <p>Proceed with caution. These notes are under construction and are 100\% guaranteed to contain typos. If you find any typos or errors, I will be most grateful to you for letting me know. If you are looking for a place where to learn commutative algebra, I strongly recommend the following excellent resources:</p>

        <p>
          <ul>
            <li>
              <p>
                <url href="http://www.math.lsa.umich.edu/~hochster/614F20/614.html" visual="http://www.math.lsa.umich.edu/~hochster/614F20/614.html">Mel Hochster's Lecture notes</url>
              </p>
            </li>

            <li>
              <p>
                Jack Jeffries' Lecture notes (either his notes from <url href="http://www-personal.umich.edu/~jackjeff/CAnotes.pdf" visual="http://www-personal.umich.edu/~jackjeff/CAnotes.pdf">UMich 614</url>, <url href="https://jack-jeffries.github.io/CAnotes.pdf" visual="https://jack-jeffries.github.io/CAnotes.pdf">CIMAT</url>, or <url href="https://jack-jeffries.github.io/S22/902.pdf" visual="https://jack-jeffries.github.io/S22/902.pdf">UNL)</url>.
              </p>
            </li>

            <li>
              <p>
                Atiyah and MacDonald's <em>Commutative Algebra</em>
              </p>
            </li>

             <li>
              <p>
                Matsumura's <em>Commutative Ring Theory</em>, or his other less known book <em>Commutative Algebra</em>
              </p>
            </li>

            <li>
              <p>
                Eisenbud's <em>Commutative Algebra with a view towards algebraic geometry</em>.
              </p>
            </li>
          </ul>
        </p>
      </preface>
      
    </frontmatter>

    <part xml:id="part-commutative-algebra"><title>Commutative Algebra</title>
      
      <chapter xml:id="ch-finiteness-conditions"><title>Finiteness Conditions</title>

        <!--**************************
        Chapter: Finiteness Conditions
        ***************************-->

        <introduction>
          <p>
            We start our study of commutative algebra by discussing modules and algebras, the most important structures over a given ring. 
            We will discuss module-finite versus algebra-finite ring extensions, the relationship between the two concepts, and how they relate to integral extensions. 
            We will then be ready to discuss noetherian rings; most of the rings we will be interested in are noetherian, as it often happens in commutative algebra.
          </p>
        </introduction>
  
        <section xml:id="sec-gen-mod"><title>Generated Modules</title>

          <!--**********************
          Section: Generated Modules
          ***********************-->
          
          <blockquote><p><q>True success comes only when every generation continues to develop the next generation.</q></p><attribution>John C. Maxwell</attribution></blockquote>

          <p>
            In many ways, commutative algebra is the study of finitely generated modules. 
            While vector spaces make for a great first example of modules, many of the basic facts we are used to from linear algebra are often a little more subtle in commutative algebra. 
            These differences are features, not bugs. 
            The first big noticeable difference between vector spaces and general modules is that while every vector space has a basis, most modules do not. 
          </p>

          <definition xml:id="def-generated-module"><title>Generated Module</title>
          <idx><h>basis</h></idx><idx><h>free module</h></idx><idx><h>generating set</h></idx><idx><h>generators for an <m>R</m>-module</h></idx>
            <statement>
              <p>
                Let <m>M</m> be an <m>R</m>-module and <m>\Gamma \subseteq M</m>. 
                The submodule of <m>M</m> <em>generated</em> by (also known as the submodule <em>spanned</em> by) <m>\Gamma</m>, denoted <m>\sum_{m \in \Gamma} R m</m>, <idx><h><m>\sum_{m \in \Gamma} R m</m></h></idx> is the smallest (with respect to containment) submodule of <m>M</m> containing <m>\Gamma</m>.<idx><h>module generated by a subset</h></idx>
              </p> 

              <p>
                We say <m>\Gamma</m> <em>generates</em> <m>M</m>, or is a <em>set of generators</em> for <m>M</m>, if <m>\sum_{m \in \Gamma} R m =~M</m>, meaning that every element in <m>M</m> can be written as a finite linear combination of elements in <m>\Gamma</m>.
              </p>
            </statement>
          </definition>

          <definition xml:id="def-basis"><title>Basis</title>     
            <statement>
              <p>
                A subset <m>A</m> of an <m>R</m>-module <m>M</m> is a <em>basis</em> of <m>M</m>, if the set <m>A</m> generates <m>M</m> and is linearly independent.
                <idx><h>generating set</h></idx>
                <idx><h>set of generators</h></idx>
                <idx><h>basis of a module</h></idx>
              </p>
            </statement>
          </definition>

          <definition xml:id="def-free-module"><title>Free Module</title>         
            <statement>
              <p>
                An <m>R</m>-module M is a <em>free</em> <m>R</m>-module if <m>M</m> admits at least one a basis.
                <idx><h>free module</h></idx>
              </p>
            </statement>
          </definition>

          <example xml:id="ex-vector-space-is-a-free-module"><title>Vector Space is a Free Module</title>
            <p>
              Every vector space over a field <m>k</m> is a free <m>k</m>-module.
            </p>
          </example>

          <example xml:id="ex-free-r-module-isomorphic-to-copies-of-r"><title>Free <m>R</m>-module Isomorphic to Copies of <m>R</m></title>
            <statement>
              <p>
                Every free <m>R</m>-module is isomorphic to a direct sum of copies of <m>R</m>.
              </p>
            </statement>

            <solution>
              <p>
                To construct such an isomorphism for the free <m>R</m>-module <m>M</m>, take a basis <m>\Gamma = \left\lbrace \gamma_i \right\rbrace_{i \in I}</m> for <m>M</m> and let <m>\pi</m> be a map such that 
                <me>
                  \begin{CD}
                  \oplus_{i \in I}R@&gt;\pi&gt;&gt; M\\\\
                  (r_i)_{i \in I}@&gt;&gt;&gt; \displaystyle\sum_i r_i \gamma_i
                  \end{CD}
                </me>
                The condition that <m>\Gamma</m> is a basis for <m>M</m> is equivalent to <m>\pi</m> being an isomorphism of <m>R</m>-modules.
              </p>
            </solution>
            
          </example>

          <p>
            One of the key things that makes commutative algebra so rich and beautiful is that most modules are in fact <em>not</em> free. 
            In general, every <m>R</m>-module has a generating set --- for example, <m>M</m> itself. 
            Given some generating set <m>\Gamma</m> for <m>M</m>, we can always write a <term>presentation</term><idx><h>presentation</h></idx></p>

          <p>EMPTY</p>

          <p>
            for <m>M</m>, but in general <m>\pi</m> will have a nontrivial kernel. 
            A nonzero kernel element <m>(r_i)_{i \in I} \in \ker \pi</m> corresponds to a <term>relation</term> between the generators.
            <idx><h>relation</h></idx>
          </p>

          <example xml:id="ex-homomorphism-determined-of-images-of-elements"><title>Homomorphism Determined of Images of Elements</title>
            <statement>
              <p>
                A homomorphism of <m>R</m>-modules <m>M\to N</m> is completely determined by the images of the elements on any given set of generators for <m>M</m>.
              </p>
            </statement>
          </example>

          <lemma xml:id="lem-generated-module-equivalencies"><title>Generated Module Equivalencies</title>
            <statement>
              <p>The following are equivalent:</p>
  
              <p>
                <ol>
                  <li>
                    <m>\Gamma</m> generates <m>M</m> as an <m>R</m>-module.
                  </li>
    
                  <li>
                    Every element of <m>M</m> can be written as a finite linear combination of the elements of <m>\Gamma</m> with coefficients in <m>R</m>.
                  </li>
    
                  <li>
                    The homomorphism <m>\t : R^{\oplus Y}\to M</m>, where <m>R^{\oplus Y}</m> is a free <m>R</m>-module with basis <m>Y</m> in bijection with <m>\Gamma</m> via <m>\t(y_{i}) = \g_{i}</m>, is surjective.
                  </li>
                </ol>
              </p>
  
            </statement>

            <proof>
              <p>
                <ol>
                  <li>
                    <p>
                      (1 <m>\Longleftrightarrow</m> 2) Suppose <m>\Gamma</m> generates <m>M</m> as an <m>R</m>-module. The definition of a generated submodule is that it is the smallest submodule containing all linear combinations of the generators of <m>\Gamma</m>. Thus every element of <m>M</m> can be written as a finite linear combination of elements of <m>\Gamma</m>.
                    </p>

                    <p>
                      (2 <m>\Longrightarrow</m> 3) Suppose every element of <m>M</m> can be written as a finite linear combination of the elements of <m>\Gamma</m> with coefficients in <m>R</m>, and let <m>\t : R^{\oplus Y}\to M</m> be defined as above. Let <m>x\in M</m>. Thus <m>m</m> can be written in the form <m>r_{1}m_{1}+\dots+r_{n}m_{n}</m>, where <m>r_{i}\in R</m> and and <m>m_{i}\in\Gamma</m>. As <m>Y</m> is in bijection with <m>\Gamma</m>, we see that there exist <m>y_{i}\in Y</m> such that <m>\t(y_{i})=m_{i}</m> for each <m>1\leq i\leq n</m>. Thus the element <m>r_{1}y_{1}+\dots+r_{n}y_{n}</m> maps to <m>x</m> via <m>\t</m>.                  </p>
                  </li>

                  <li>
                    <p>
                      (3 <m>\Longrightarrow</m> 1) Suppose the homomorphism <m>\t : R^{\oplus Y}\to M</m> , where <m>R^{\oplus Y}</m> is a free <m>R</m>-module with basis <m>Y</m> in bijection with <m>\Gamma</m> via <m>\t(y_{i}) = \g_{i}</m>, is surjective. Thus for any <m>x\in M</m> there exists some <m>y\in R^{\oplus Y}</m> such that <m>\t(y)=x</m>. As <m>Y</m> is a basis for <m>R^{\oplus Y}</m> there exist <m>y_{i}\in Y</m> such that <m>y=r_{1}y_{1}+\dots+r_{n}y_{n}</m>. As <m>\t</m> is a homomorphism, we see that 
                      <md>
                        <mrow>x \amp =\t(y)</mrow>
                        <mrow> \amp =\t(r_{1}y_{1}+\dots+r_{n}y_{n})</mrow>
                        <mrow> \amp =\t(r_{1})m_{1}+\dots+\t(r_{n})m_{n},</mrow>
                      </md>
                      where each <m>m_{i}\in\Gamma</m> and each <m>\t(r_{i})\in R</m>. Thus every element of <m>M</m> can be written as a finite linear combination of elements of <m>\Gamma</m> with coefficients in <m>R</m>.                  
                    </p>
                  </li>
                </ol>
              </p>
            </proof>
          </lemma>

          <remark>
            <p>
              The equivalence between (1) and (2) in <xref ref="lem-generated-module-equivalencies"/> says that the submodule generated by <m>\Gamma</m> is exactly the set of all finite linear combinations of elements in <m>\Gamma</m> with coefficients in <m>R</m>, which explains the notation <m>\sum_{m \in \Gamma} Rm</m>.
            </p>
          </remark>

          <definition xml:id="def-fg-module"><title>Finitely Generated Module</title>   
            <statement>
              <p>We say that a module <m>M</m> is <em>finitely generated</em> if we can find a finite generating set for <m>M.</m><idx><h>finitely generated module</h></idx></p>
            </statement>
          </definition>

          <remark><p>A better name might be <em>finitely generatable</em>, since we do not need to know an actual finite set of generators to say that a module is finitely generated.</p></remark>

          <example xml:id="ex-cyclic-modules-isomorphic-to-quotient"><title></title>
            <statement>
              <p>An <m>R</m>-module is cyclic if it can be generated by one element. <idx><h>cyclic module</h></idx>Equivalently, we can write <m>M</m> as a quotient of <m>R</m> by some ideal <m>I</m>.</p>
            </statement>

            <solution>
              <p>
							  Indeed, given a generator <m>m</m> for <m>M</m>, the kernel of the map <m>R^{n}\longrightarrow M</m> induced by <m>1 \mapsto m</m> is some ideal <m>I</m>. Since we assumed that <m>m</m> generates <m>M</m>, <m>\pi</m> is automatically surjective, and thus induces an isomorphism <m>R/I \cong M</m>.
						  </p>
            </solution>
            
          </example>

          <example xml:id="ex-f.g.-modules-quotient-of-copies-of-r">
            <p>
							More generally, if an <m>R</m>-module has <m>n</m> generators, we can naturally think about it as a quotient of <m>R^n</m> by the submodule of relations among those <m>n</m> generators. More precisely, if <m>M</m> is generated by <m>m_1, \ldots, m_n \in M</m>, then the homomorphism of <m>R</m>-modules<me>\begin{CD}
              R^{n}@&gt;\pi&gt;&gt; m\\\\
              (r_{1}, \ldots, r_{n})@&gt;d&gt;&gt; r_{1} m_{1} + \cdots + r_{n} m_{n}
              \end{CD}</me>that sends each of the canonical generators <m>e_i</m> of <m>R^n</m> to <m>m_i</m> is surjective; more precisely, this is a presentation for <m>M</m>. <idx><h>presentation</h></idx> By the <xref text="title" ref="thm-fit-mod"/>, <m>M \cong R^n / \ker \pi</m>.
						</p>
          </example>

          <paragraphs><title>Macaulay 2</title>
            <p>Defining free modules in Macaulay2 is straightforward:</p>

            <pre>
              i1 : R = QQ[x,y,z];
  
              i2 : M = R^3 
                    3
              o2 = R
  
              o2 : R-module, free
            </pre>

            <p>Note that from now on and until we reset Macaulay2, whenever you write <c>R</c> it will be read as a ring, not a module; if instead you want to refer to the module <m>R</m>, you can write it as <c>R^1</c>. Alternatively, you can also use the command <c>module</c> and write <c>module R</c>. If you do calculations that require a module and not a ring, it is important to be careful about whether you write <c>R</c> or <c>R^1</c>; this is an easy way to get an error message.</p>

            <p>If we want to define a module that happens to be an ideal, but we want to think about it as a module, we can use the command <c>module</c> to turn the ideal into a module:</p>

            <pre>
              i3 : I = ideal"xy,yz"

              o3 = ideal (x*y, y*z)
              
              o3 : Ideal of R
              
              i4 : N = module I
              
              o4 = image | xy yz |
                                            1
              o4 : R-module, submodule of R
            </pre>

            <p>If we forget that this is actually an ideal, and simply think about as a submodule of the module <m>R</m>, we can also view this module as the image of a map, as we described in <xref ref="ex-f.g.-modules-quotient-of-copies-of-r"/>: if a submodule of <m>R^m</m> has <m>n</m> generators, we can view it as the the image of the map <m>R^n \to R^m</m> that sends each of the canonical generators of <m>R^n</m> to the generators we chose for our module. In our example, our module is the image of the following map from <m>R^2</m> to <m>R</m>:</p>

            <pre>
              i5 : phi = map(R^1,R^2,{{x*y,y*z}})

              o5 = | xy yz |
                            1       2
              o5 : Matrix R  &lt;--- R

              i6 : L = image phi

              o6 = image | xy yz |
                                            1
              o6 : R-module, submodule of R
            </pre>

            <p>Note that above, when we first defined the module <m>N</m>, Macaulay2 immediately stored that information in this exact way, as the image of the same map we just defined. This is useful to keep in mind when you see the results for a computation: if a module is given to us as the image of a matrix, then we are being told that our module is a submodule of some free module. If the matrix has <m>n</m> rows, then that means our module is a submodule of <m>R^n</m>. Each column corresponds to a generator of our module (as a submodule of <m>R^n</m>).</p>

            <p>
              Of course that the modules <m>M</m>, <m>N</m>, and <m>L</m> we have defined are all the same module: the ideal <m>(xy,yz)</m>. It is our job to know that; depending on how you ask the question, Macaulay2 might not be able to identify this. Finally, we can also describe this module by saying that it has two generators, say <m>f</m> and <m>g</m>, and there is a unique relation between them:	
              <me>
                -zf + yg = 0.
              </me>
              This means that our module is the quotient of <m>R^2</m> by the submodule generated by the relation <m>(-z,y)</m>. We can write this as the quotient of <m>R^2</m> by the image of a map landing in <m>R^2</m>, meaning it is the cokernel of a map.
            </p>

            <pre>
              i7 : psi = map(R^2,R^1,{{-z},{y}})

              o7 = | -z |
                   | y  |
                            2       1
              o7 : Matrix R  &lt;--- R

              i8 : K = coker psi

              o8 = cokernel | -z |
                            | y  |
                                          2
              o8 : R-module, quotient of R
            </pre>

            <p>
              When a module is given to us in this format, as the cokernel of some matrix, we are essentially being given a presentation: the number of rows is the number of generators, while each column corresponds to a relation among those generators. If one the vector <m>(r_1, \ldots, r_n)</m> appears in a column of the matrix, that means that the generators <m>m_1, \ldots, m_n</m> satisfy the relation
              <me>
                r_1 m_1 + \cdots + r_n m_n  = 0.
              </me>
              Keep in mind that when you do a calculation and the result is a module given to you in this format, Macaulay2 will not necessarily respond with a <em>minimal</em> presentation: one of the generators given might actually be a linear combination of the remaining ones, so there might be more generators than necessary, and there might be superfluous relations which follow as linear combinations of the others. You might be able to get rid of some superfluous generators and relations using the command <c>prune</c>. We will discuss this in more detail when we talk about local rings in <xref ref="ch-local-rings"/>.
            </p>  
          </paragraphs>

        </section>

        <section xml:id="sec-algebras"><title>Algebras</title>

          <!--*************
          Section: Algebras
          **************-->
          
          <blockquote><p><q>I don't know why I should have to learn Algebra... I'm never likely to go there.</q></p><attribution>Billy Connolly</attribution></blockquote>

          <definition xml:id="def-algebra"><title>Algebra</title>
            <statement>
              <p>Given a ring <m>R</m>, an <m>R</m>-<em>algebra</em> is a ring <m>S</m> equipped with a ring homomorphism <m>\phi: R \to S</m>. This defines an <m>R</m>-module structure on <m>S</m> given by restriction of scalars: for each <m>r\in R</m> and <m>s\in S</m>, <m>rs := \phi(r)s</m>. This <m>R</m>-module structure on <m>S</m> is compatible with the internal multiplication of <m>S</m> i.e., <idx><h>restriction of scalars</h></idx><me>r(st)=(rs)t=s(rt) \text{ for all } r\in R, s, t\in S.</me>We will call <m>\phi</m> the <em>structure homomorphism</em> of the <m>R</m>-algebra <m>S</m>.<idx><h>structure homomorphism of an algebra</h></idx></p>
            </statement>
          </definition>
          
          <example xml:id="ex-polynomial-rings-are-algebras"><title>Polynomial Rings are Algebras</title>
            <statement>
              <p>If <m>A</m> is a ring and <m>x_1,\dots,x_n</m> are indeterminates, the inclusion map <m>A \hookrightarrow A[x_1,\dots,x_n]</m> makes the polynomial ring into an <m>A</m>-algebra.</p>
            </statement>
          </example>

          <example xml:id="ex-inclusion-maps-give-algebra-structure"><title>Inclusion Maps Give Algebra Structure</title>
            <statement>
              <p>More generally, any inclusion map <m>R \subseteq S</m> gives <m>S</m> an <m>R</m>-algebra structure. In this case the <m>R</m>-module multiplication coincides with the internal (ring) multiplication on <m>S</m>.</p>
            </statement>
          </example>

          <example xml:id="ex-rings-have-unique-structure-as-z-algebra"><title>Rings Have Unique Structure as <m>\Z</m>-algebra</title>
            <statement>
              <p>Any ring comes with a unique structure as a <m>\Z</m>-algebra, since there is a unique ring homomorphism <m>\Z \to R</m>: the one given by <m>n \mapsto n \cdot 1_R</m>.</p>
            </statement>
          </example>

          <definition xml:id="def-generated-algebra"><title>Generated Algebra</title>
            <statement>
              <p>Let <m>S</m> be an <m>R</m>-algebra with structure homomorphism <m>\varphi</m> and let <m>\Lambda \subseteq S</m> be a set. The <m>R</m>-algebra <em>generated</em> by a subset <m>\Lambda</m> of <m>S</m>, denoted <m>R[\Lambda]</m>, is the smallest (with respect to containment) subring of <m>S</m> containing <m>\Lambda</m> and <m>\varphi(R)</m>. A set of elements <m>\Lambda \subseteq S</m> <em>generates</em> <m>S</m> as an <m>R</m>-algebra if <m>S=R[\Lambda]</m>.</p>
            </statement>
          </definition>

          <p>Note that there are two different meanings for the notation <m>R[S]</m> for a ring <m>R</m> and set <m>S</m>: one calls for a polynomial ring, and the other calls for a subring of something. If <m>S</m> is a subset of elements of some other larger ring which is clear from context, then we are talking about the algebra generated by <m>S</m>; in contrast, if <m>S</m> is a set of indeterminates, then we are talking about a polynomial ring in those variables.</p>

          <p>This can be unpackaged more concretely in a number of equivalent ways.</p>

          <lemma xml:id="lem-generated-algebra-equivalencies"><title>Generated Algebra Equivalencies</title>
            <statement>
              <p>
                The following are equivalent: 
                <ol>
                  <li>
                    <p>
                      <m>\Lambda</m> generates <m>S</m> as an <m>R</m>-algebra. 
                    </p>
                  </li>

                  <li>
                    <p>
                      Every element in <m>S</m> admits a polynomial expression in <m>\Lambda</m> with coefficients in <m>\phi(R)</m>, i.e. 
                      <me>
                        S = \left\{\sum_{\mathrm{finite}} \phi(r_{i_1, \ldots, i_n}) \lambda_1^{i_1} \cdots \lambda_n^{i_n} \mid r_l \in R, \lambda_j\in\Lambda, i_j \geqslant 0 \right\}.
                      </me> 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>R[X]</m> is a polynomial ring on a set of indeterminates <m>X</m> in bijection with <m>\Lambda</m>, then the <m>R</m>-algebra homomorphism
                      <me>
                        \begin{CD}
                        R[X]^{n}@&gt;\pi&gt;&gt; S\\\\
                        x_{i}@&gt;&gt;&gt; \l_{i}
                        \end{CD}
                      </me>
                      is surjective.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>

            <proof>
              <p>
                Let <m>S= \left\{\sum_{\mathrm{finite}} \phi(a) \lambda_1^{i_1} \cdots \lambda_n^{i_n} \mid a\in A, \lambda_j\in\Lambda, i_j\in \N\right\}</m>.
              </p>
  
                <p>
                  For the equivalence between (2) and (3), we note that <m>S</m> is the image of <m>\pi</m>. In particular, <m>S</m> is a subring of <m>R</m>. It then follows from the definition that (1) implies (2). Conversely, any subring of <m>R</m> containing <m>\phi(A)</m> and <m>\Lambda</m> certainly must contain <m>S</m>, so (2) implies (1).
                </p>
            </proof>
          </lemma>

          <remark><p>Let <m>S</m> be an <m>R</m>-algebra generated by <m>\Lambda</m>, let <m>\pi</m> be the surjective map in part (3) of <xref ref="lem-generated-algebra-equivalencies"/>, and let <m>I := \ker \pi</m>. By the <xref text="title" ref="thm-fit"/>, we have a ring isomorphism <m>S\cong R[X]/I</m>. The elements of <m>I</m> are the relations among the generators in <m>\Lambda</m>. <idx><h>relations</h></idx> If we understand the ring <m>R</m> and generators and relations for <m>S</m> over <m>R</m>, we can get a pretty concrete understanding of <m>S</m>.</p></remark>
      
          <definition xml:id="def-free-algebra"><title>Free Algebra</title>
            <statement>
              <p>
                Suppose <m>\Lambda</m> generates <m>S</m> as an <m>R</m>-algebra. Let <m>R[X]</m> be a polynomial ring on a set of indeterminates <m>X</m> in bijection with <m>\Lambda</m>, and let <m>\pi</m> denote the <m>R</m>-algebra homomorphism <me>\begin{CD}
                R[X]^{n}@&gt;\pi&gt;&gt; S\\\\
                x_{i}@&gt;&gt;&gt; \l_{i}
                \end{CD}</me>
                If the homomorphism <m>\pi</m> is injective (and thus an isomorphism) we say that <m>S</m> is a <em>free algebra</em>; a free algebra on <m>R</m> is isomorphic to a polynomial ring on <m>R</m>.
              </p>
    
              <p>The ideal <m>I = \ker(\pi)</m> measures how far <m>R</m> is from being a free <m>R</m>-algebra and is called the set of <em>relations</em> on <m>\Lambda</m>.<idx><h>relations of an algebra</h></idx></p>
            </statement>
          </definition>

          <example xml:id="ex-zsqrtd-and-zsqrt3d-are-z-algebras"><title><m>\Z[\sqrt{d}]</m> and <m>\Z[\sqrt[3]{d}]</m> are <m>\Z</m>-algebras</title>
            <statement>
              <p>You may have seen this used in <m>\Z[\sqrt{d}]</m> for some <m>d \in \Z</m> to describe the ring <me>\{ a + b \sqrt{d} \mid a,b \in \Z\}.</me>The <m>\Z</m>-algebra generated by <m>\sqrt{d}</m> in the most natural place, the algebraic closure of <m>\Q</m>, is exactly the set above.</p>
            </statement>

            <solution>
              <p>
                The point is that for any power <m>(\sqrt{d})^n</m>, we can always write <m>n=2q+r</m> with <m>r\in \{0,1\}</m>, so <m>(\sqrt{d})^n=d^q (\sqrt{d})^r</m> is in the algebra generated by <m>\mathbb{Z}</m> and <m>\sqrt{d}</m>.
              </p>
  
              <p>
                We can also write the one-generated <m>\Z</m>-algebra <m>\Z[\sqrt{d}]</m> as a quotient of a polynomial ring in one variable: if <m>d</m> is not a perfect square, the map <m>\pi</m> in part (3) of this <xref ref="lem-generated-algebra-equivalencies"/> is 
                <me>
                  \begin{CD}
                  \Z[x]@&gt;\pi&gt;&gt; \Z[\sqrt[3]{d}]\\\\
                  x@&gt;&gt;&gt; \sqrt[3]{d}\\\\
                  y@&gt;&gt;&gt; \sqrt[3]{d^{2}}
                  \end{CD}
                </me> 
                and its kernel is generated by <m>x^2-d</m>, so <m>\Z[\sqrt{d}] \cong \Z[x]/(x^2-d)</m>.
              </p>
  
              <p>
                Similarly, the ring <m>\Z[\sqrt[3]{d}]</m> can be written as 
                <me>
                  \Z[\sqrt[3]{d}] = \{ a + b \sqrt[3]{d} + c \sqrt[3]{d^2}  \ | \ a,b,c\in \Z\},
                </me> 
                which is a quotient of <m>\mathbb{Z}[x,y]</m>, and the map <m>\pi</m> from <xref ref="lem-generated-algebra-equivalencies"/> is
                <me>
                  \begin{CD}
                    \Q[w_{1},\dots,w_{6}]@&gt;\pi&gt;&gt; R\\\\
                    (w_{1}, \ldots, w_{6})@&gt;&gt;&gt; (x^{2},xy,xz,y^{2},yz,z^{2})
                  \end{CD}
              </me>
              </p>
            </solution>
            
            
          </example>

          <paragraphs><title>Macaulay2</title>

            <p>
              Unfortunately, Macaulay2 does not understand subalgebras directly, only quotient rings. But as we have discussed, any <m>R</m>-algebra can be thought of as a quotient of a polynomial ring over <m>R</m>. For example, the Veronese algebra <m>V = \mathbb{Q}[x^2, xy, xz, y^2, yz, z^2]</m> is a quotient of a polynomial ring over <m>\mathbb{Q}</m> in <m>6</m> variables, since it has <m>6</m> algebra generators. More precisely, <m>V</m> is the image of the map
              
              <me>
                \begin{CD}
                \Q[w_1, \ldots, w_6]@&gt;\pi&gt;&gt; R\\\\
                (w_1, \ldots, w_6)@&gt;&gt;&gt; (x^2, xy, xz, y^2, yz, z^2)
                \end{CD}
              </me>
              so by the <xref text="title" ref="thm-fit"/>, <m>V \cong \mathbb{Q}[w_1, \ldots, w_6]/ \ker \pi</m>.
            </p>

            <pre>
              i4 : use R;

              i5 : aux = QQ[w_1 .. w_6]
              
              o5 = aux
              
              o5 : PolynomialRing
              
              i6 : p = map(R,aux,{x^2,x*y,x*z,y^2,y*z,z^2})
                                  2             2        2
              o6 = map (R, aux, {x , x*y, x*z, y , y*z, z })
              
              o6 : RingMap R &lt;--- aux
              
              i7 : V = aux/ker p
              
              o7 = V
              
              o7 : QuotientRing
            </pre>

            <p>
              To do calculations with <m>V</m>, note that <m>w_1</m> is actually <m>x_2</m>, <m>w_2</m> is <m>xy</m>, and so on.
            </p>

          </paragraphs>

          <definition xml:id="def-algebra-finite"><title>Algebra-Finite</title>
            <statement>
              <p>We say that <m>\varphi:R\to S</m> is <em>algebra-finite</em>, or <m>S</m> is a <em>finitely generated</em> <m>R</m>-algebra, or <m>S</m> is of <em>finite type</em> over <m>R</m>, if there exists a finite set of elements <m>f_1,\dots,f_t\in S</m> that generates <m>S</m> as an <m>R</m>-algebra.<idx><h>algebra-finite</h></idx><idx><h>finitely generated algebra</h></idx><idx><h>finite type</h></idx></p>
            </statement>
          </definition>

          <remark><p>A better name might be <em>finitely generatable</em>, since we do not need to know an actual finite set of generators to say that an algebra is finitely generated.</p></remark>

          <example xml:id="ex-algebra-finite-iff-quotient-of-polynomial-ring"><title>Algebra Finite iff Quotient of Polynomial Ring</title>
            <p>From the discussion above, we conclude that <m>S</m> is a finitely generated <m>R</m>-algebra if and only if <m>S</m> is a quotient of some polynomial ring <m>R[x_1,\dots,x_d]</m> over <m>R</m> in finitely many variables.</p>

            <p>If <m>S</m> is generated over <m>R</m> by <m>f_1,\dots,f_d</m>, we will use the notation <m>R[f_1,\dots,f_d]</m><idx><h><m>R[f_1,\dots,f_d]</m></h></idx> to denote <m>S</m>. Of course, for this notation to properly specify a ring, we need to understand how these generators behave under the operations; this is no problem if <m>R</m> and <m>\underline{f}</m> are understood to be contained in some larger ring.</p>
          </example>

          <conjecture xml:id="conj-jacobian-determinant-and-c-generation"><title>Jacobian Determinant and <m>\C</m> Generation</title>

            <statement>
              <p>There are many basic questions about algebra generators that are surprisingly difficult. Let <m>R=\C[x_1,\dots,x_n]</m> and <m>f_1,\dots,f_n\in R</m>. When do <m>f_1,\dots,f_n</m> generate <m>R</m> over <m>\C</m>? It is not too hard to show that the Jacobian determinant <idx><h>Jacobian</h></idx> <me>\det \begin{bmatrix} \frac{\partial f_1}{\partial x_1} &amp; \cdots &amp; \frac{\partial f_1}{\partial x_n} \\ \vdots &amp; \ddots &amp; \vdots \\ \frac{\partial f_n}{\partial x_1} &amp; \cdots &amp; \frac{\partial f_n}{\partial x_n} \end{bmatrix}</me> must be a nonzero constant. It is a big open question whether this is in fact a sufficient condition!</p>
            </statement>
          </conjecture>

        </section>

        <section xml:id="sec-alg-mod-finite"><title>Algebra and Module Finite</title>

          <!--******************************
          Section: Algebra and Module Finite
          *******************************-->
          
          <blockquote><p><q>All poetry is putting the infinite within the finite.</q></p><attribution>Robert Browning</attribution></blockquote>

          <definition xml:id="def-module-finite"><title>Module Finite</title>

            <statement>
              <p>Given an <m>R</m>-algebra <m>S</m>, we say <m>S</m> is <em>module-finite</em> over <m>R</m> if it is finitely generated as an <m>R</m>-module.</p>
            </statement>
          </definition>

          <remark><p>Instead of asking about how <m>S</m> is generated as an algebra over <m>R</m>, we can ask how it is generated as a module over <m>R</m>. The notion of module-finite is much stronger than algebra-finite, since a linear combination is a very special type of polynomial expression.</p></remark>

          <lemma xml:id="lem-subsets-of-generating-sets"><title>Subsets of Generating Sets</title>

            <statement>
              <p><ol>
                <li>
                If <m>M</m> is a finitely generated <m>R</m>-module, then any generating set for <m>M</m> as an <m>R</m>-module contains a finite subset that generates <m>M</m>.
                </li>
  
                <li>
                If the ring <m>S</m> is algebra-finite over <m>R</m>, then any generating set for <m>S</m> as an <m>R</m>-algebra contains a finite subset that also generates <m>S</m> as an <m>R</m>-algebra.
                </li>
              </ol></p>
            </statement>

            <proof>
              <p>
                Let <m>\Gamma</m> be a generating set for <m>M</m> as an <m>R</m>-module. If <m>M</m> is a finitely generated <m>R</m>-module, then we can find elements <m>f_1 \ldots, f_r</m> that generate <m>M</m> as an <m>R</m>-module. Since <m>\Gamma</m> generates <m>M</m>, for each <m>i</m> we can find finitely many elements <m>\gamma_{i,1}, \ldots, \gamma_{i,n_i} \in \Gamma</m> and <m>R</m>-coefficients <m>r_{i,1}, \ldots, r_{i,n_i}</m> such <me>f_i = r_{i,1} \gamma_{i,1} + \cdots + r_{i,n_i} \gamma_{i,n_i}.</me>The submodule <m>N</m> of <m>M</m> generated by all the <m>\gamma_{i,j}</m> contains the elements <m>f_1, \ldots, f_n</m>, but since <m>M = Rf_1 + \cdots + Rf_n</m>, we conclude that <m>M</m> is generated by those finitely many <m>\gamma_{i,j}</m>, and thus by a finite subset of <m>\Gamma</m>.
              </p>
  
              <p>
                The other proof is essentially the same, with the appropriate replacements: whenever we talk about a set that generates <m>M</m> as an <m>R</m>-module, we should instead consider a set that generates <m>S</m> as an <m>R</m>-algebra, and instead of taking linear combinations of elements we should consider polynomials in those elements with <m>R</m>-coefficients.
              </p>
            </proof>
          </lemma>

          <lemma xml:id="lem-mod-finite-and-algebra-finite-expressions"><title>Mod Finite and Algebra Finite Expressions</title>
            <statement>
              <p>
                If <m>S</m> is an <m>R</m>-algebra,
              </p>
  
              <p><ol>
                <li>
                <m>R \subseteq S</m> is algebra-finite if and only if <m>S = R[f_1, \ldots, f_n]</m> for some <m>f_1, \ldots, f_n \in S</m>.
                </li>
  
                <li>
                <m>R \subseteq S</m> is module-finite if and only if <m>S = R f_1 + \cdots + R f_n</m> for some <m>f_1, \ldots, f_n \in S</m>.
                </li>
  
              </ol></p>
            </statement>

            <proof>
              <p><ol>
                <li>
                            <p>
                Suppose <m>R\subseteq S</m> is algebra-finite, i.e., <m>S</m> is a finitely generated <m>R</m>-algebra. Then, there exist <m>f_1,\ldots,f_n\in S</m> such that <m>S=R[f_1,\ldots,f_n]</m>. To see this, note that since <m>S</m> is finitely generated over <m>R</m>, we can write <m>S=R[x_1,\ldots,x_m]</m> for some <m>x_1,\ldots,x_m\in S</m>. Then, we can express each <m>x_i</m> as a polynomial in <m>f_1,\ldots,f_n</m> with coefficients in <m>R</m>, so <m>S\subseteq R[f_1,\ldots,f_n]</m>. Conversely, if <m>S=R[f_1,\ldots,f_n]</m> for some <m>f_1,\ldots,f_n\in S</m>, then <m>S</m> is generated over <m>R</m> by <m>f_1,\ldots,f_n</m>, and so <m>S</m> is algebra-finite.
              </p>
                </li>
  
                <li>
                            <p>
                Suppose <m>R\subseteq S</m> is module-finite, i.e., <m>S</m> is a finitely generated <m>R</m>-module. Then, there exist <m>f_1,\ldots,f_n\in S</m> such that <m>S=Rf_1+\cdots+Rf_n</m>. To see this, note that since <m>S</m> is finitely generated over <m>R</m>, we can write <m>S=Rx_1+\cdots+Rx_m</m> for some <m>x_1,\ldots,x_m\in S</m>. Then, we can express each <m>x_i</m> as a linear combination of <m>f_1,\ldots,f_n</m> with coefficients in <m>R</m>, so <m>S\subseteq R[f_1,\ldots,f_n]</m>. Conversely, if <m>S=Rf_1+\cdots+Rf_n</m> for some <m>f_1,\ldots,f_n\in S</m>, then <m>S</m> is generated over <m>R</m> by <m>f_1,\ldots,f_n</m>, and so <m>S</m> is module-finite.
              </p>
                </li>
  
              </ol></p>
            </proof>
          </lemma>

          <example xml:id="ex-qxxn-not-free-algebra"><title><m>\Q[x]/(x^{n})</m> Not Free Algebra</title>
            <p>Given <m>n \geq 2</m>, the <m>\Q</m>-algebra <m>S=\Q[x]/(x^n)</m> is generated as an algebra by the element <m>x</m>. Note, however, that this is not a free <m>\Q</m>-algebra.</p>       
          </example>

          <lemma xml:id="lem-module-finite-implies-algebra-finite"><title>Module Finite Implies Algebra Finite</title>
            <statement>
              <p>
                If <m>S</m> is a module-finite <m>R</m>-algebra, then it is also algebra-finite.
              </p>
            </statement>

            <proof>
              <p>
                Let <m>S = R f_1 + \cdots + R f_n</m>, meaning that <m>f_1, \ldots, f_n</m> is a set of module generators for <m>S</m> over <m>R</m>. Note that every <m>R</m>-linear combination of <m>f_1, \ldots, f_n</m> is also an element of <m>R[f_1, \ldots, f_n]</m>, and thus <m>S</m> is a subalgebra of <m>R[f_1, \ldots, f_n]</m>.
              </p>
  
              <p>
                On the other hand, since <m>f_1, \ldots, f_n \in S</m> and <m>S</m> is an <m>R</m>-algebra, every polynomial in <m>f_1, \ldots, f_n</m> with coefficients in <m>R</m> is also in <m>S</m>, and thus <m>S = R[f_1, \ldots, f_n]</m>, so that <m>S</m> is algebra-finite over <m>R</m>.
              </p>
            </proof>
          </lemma>

          <p>The converse, however, is false: it is <em>harder</em> to be module-finite than algebra-finite.</p>

          <example xml:id="ex-mod-fin-vs-alg-fin"><title></title>
            <p>
              <ol>
                <li>
                  <p>
                    The Gaussian integers <m>\Z[i]</m> <idx><h>Gaussian integers</h></idx> satisfy the well-known property (or definition, depending on your source) that any element <m>z\in\Z[i]</m> admits a unique expression <m>z=a+bi</m> with <m>a,b\in \Z</m>. That is, <m>\Z[i]</m> is generated as a <m>\Z</m>-module by <m>\{1,i\}</m>; moreover, <m>\{1,i\}</m> is a free module basis! As a <m>\Z</m>-algebra, <m>\Z[i]</m> is generated by <m>i</m>, but it is not a free <m>\Z</m>-algebra, since <m>i^2 -1 = 0</m>.
                  </p>
                </li>

                <li>
                  <p>
                    If <m>R</m> is a ring and <m>x</m> an indeterminate, the algebra-finite extension <m>R\subseteq R[x]</m> is not module-finite. Indeed, <m>R[x]</m> is a free <m>R</m>-module on the basis <m>\{1,x,x^2,x^3,\dots\}</m>.

                  </p>
                </li>

                <li>
                  <p>
                    Another map that is <em>not</em> module-finite is the inclusion <m>R := k[x] \subseteq k[x,\frac{1}{x}] =: S</m>. First, note that any element of <m>k[x,\frac{1}{x}]</m> can be written in the form <m>\frac{f(x)}{x^n}</m> for some <m>f \in k[x]</m> and some <m>n \geqslant 0</m>. Now any finitely generated <m>R</m>-submodule of <m>S</m> is of the form <me>M = \sum_i R \cdot \frac{f_i(x)}{x^{n_i}} = \sum_i k[x] \cdot \frac{f_i(x)}{x^{n_i}}.</me>If <m>n := \max \{ n_i \}_i</m>, then <m>M \subseteq \frac{1}{x^n} k[x] \neq k[x,\frac{1}{x}] = S</m>.
                  </p>
                </li>

                <li>
                  <p>
                    The extension <m>\Z \subseteq \Q</m> is neither module-finite nor algebra-finite. To see that, we first claim that the set 
                    <me>
                      P = \left\lbrace \frac{1}{p} \mid p \textrm{ prime integer} \right\rbrace
                    </me> 
                    generates <m>\mathbb{Q}</m> as a <m>\Z</m>-algebra. The key point here is the Fundamental Theorem of Arithmetic: since any positive integer <m>n</m> can be written as a product <m>n = p_1^{a_1} \cdots p_s^{a_s}</m> where the <m>p_i</m> are all prime and the <m>a_i \geqslant 0</m> are nonnegative integers, we see that the rational number <m>\frac{m}{n} \neq 0</m> can be written as 
                    <me>
                      \frac{m}{n} = m \left( \frac{1}{p_1} \right)^{a_1} \cdots \left( \frac{1}{p_s} \right)^{a_s} \in \Z \left[ \frac{1}{p_1}, \ldots, \frac{1}{p_s} \right] \subseteq \Z[P].
                    </me>
                    On the other hand, note that any finite subset of <m>P</m> is contained in 
                    <me>
                      \left\lbrace \frac{1}{p} \mid p \leqslant q \textrm{ prime integer} \right\rbrace
                    </me> 
                    for some fixed prime <m>q</m>, and that 
                    <me>
                      \Z \left[ \frac{1}{p} \mid p \leqslant q \textrm{ is prime} \right]
                    </me> 
                    contains only rational numbers whose denominator is a product of primes smaller than <m>q</m>. But there are infinitely many primes, and thus this cannot be all of <m>\Q</m>. By this <xref provisional="lem-subsets-of-generating-sets"/>, we can conclude that <m>\Q</m> is not a algebra-finite over <m>\Z</m>. But then <m>\Q</m> cannot be module-finite over <m>\Z</m> by <xref provisional="lem-module-finite-implies-algebra-finite"/>.
                  </p>
                </li>
              </ol>
            </p>
          </example>
      
          <lemma xml:id="lem-compositions-preserve-module-finite"><title>Compositions Preserve Module Finite</title>
            <statement>       
              <p>If <m>R\subseteq S</m> is module-finite and <m>N</m> is a finitely generated <m>S</m>-module, then <m>N</m> is a finitely generated <m>R</m>-module by restriction of scalars. In particular, the composition of two module-finite ring maps is module-finite.</p>
            </statement>

            <proof>
              <p>Let <m>S = R a_1 + \cdots + R a_r</m> and <m>N = S b_1 + \cdots + S b_s</m>. Then we claim <me>N=\sum_{i=1}^{r}\sum_{j=1}^{s} R a_i b_j.</me> Indeed, given <m>n = \sum_{j=1}^{s} s_j b_j</m>, rewrite each <m>s_j=\sum_{i=1}^{r} r_{ij} a_{i}</m> and substitute to get <me>n=\sum_{i=1}^{r}\sum_{j=1}^{s} r_{ij} a_i b_j</me> as an <m>R</m>-linear combination of the <m>a_i b_j</m>.</p>
            </proof>
  
          
          </lemma>
  
          <example xml:id="ex-algebra-finite-and-transitivity"><title>Algebra Finite and Transitivity</title>
            <statement>
              <p>
                Let <m>A\subseteq B \subseteq C</m> be rings. It follows from the definitions that 
                
                <ol>
                  <li>
                    <p>
                      If <m>A\subseteq B</m> algebra-finite and <m>B\subseteq C</m> algebra finite, then <m>A\subseteq C</m> algebra finite.
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>A\subseteq C \,\text{algebra-finite} \Longrightarrow B\subseteq C \,\text{algebra-finite}.</m>
                    </p>
                  </li>
                </ol>
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-infinitely-generated-subalgebra"><title>Infinitely Generated Subalgebra</title>
            <statement>
              <p>Let <m>k</m> be a field and <me>B=k[x,xy,xy^2,xy^3,\cdots] \subseteq C=k[x,y],</me>where <m>x</m> and <m>y</m> are indeterminates. While <m>B</m> and <m>C</m> are both <m>k</m>-algebras, <m>C</m> is a finitely generated <m>k</m>-algebra, while <m>B</m> is not.</p>
            </statement>
  
            <solution>
              <p>To see this, first note by this <xref provisional="lem-subsets-of-generating-sets"/> it is sufficient to show that no finite subset of <m>\{ xy^n \mid n \geqslant 1 \}</m> generates <m>B</m> over <m>k</m>. Since any such subset is contained in <m>\{ xy^n \mid 1 \leqslant n \leqslant m \}</m> for some fixed <m>m</m> it is sufficient to show that <m>B</m> is not <m>k[x,xy,\dots,xy^m]</m> for any <m>m</m>. Now note that every element of <m>k[x,xy,\dots,xy^m]</m> is a <m>k</m>-linear combination of monomials <m>x^iy^j</m> with <m>j \leqslant mi</m>, so this ring does not contain <m>xy^{m+1}</m>. Therefore, <m>B</m> is not a finitely generated <m>A</m>-algebra.</p>
            </solution>
          </example>

          <remark>
            <p>
              Let <m>A\subseteq B \subseteq C</m> be rings. It follows from the definitions that 
              
              <ol>
                <li>
                  <p>
                    If <m>A\subseteq B</m> module-finite and <m>B\subseteq C</m> module-finite, then <m>A\subseteq C</m> module-finite.
                  </p>
                </li>

                <li>
                  <p>
                    <m>A\subseteq C \,\text{module-finite} \Longrightarrow B\subseteq C \,\text{module-finite}.</m>
                  </p>
                </li>
              </ol>
            </p>
          </remark>

          <p>However, we will see that <m>A\subseteq C</m> module-finite <m>\not\implies A\subseteq B</m> module-finite. This construction is a bit more involved, so we will leave it for the problem sets.</p>

          <remark>
            <p>
              Any surjective ring homomorphism <m>\varphi\!: R \to S</m> is both algebra-finite and module-finite, since <m>S</m> must then be generated over <m>R</m> by <m>1</m>. Moreover, we can always factor <m>\varphi</m> as the surjection 
              <!--$\xymatrix{R \ar@{->>}[r] & R/\ker (\varphi)}$-->
              <m>R\into R/\ker(\varphi)</m>
              followed by the inclusion <m>R/\ker (\varphi) \hookrightarrow S</m>, so to understand algebra-finiteness or module-finiteness it suffices to restrict our attention to injective homomorphisms.
            </p>
          </remark>
      
        </section>

        <section xml:id="sec-integral-extensions"><title>Integral Extensions</title>

          <!--************************
          Section: Integral Extensions
          *************************-->
          
          <blockquote><p><q>What you do not wish upon yourself, extend not to others.</q></p><attribution>Confucius</attribution></blockquote>

          <p>In field theory, there is a close relationship between (vector space-)finite field extensions and algebraic equations. The situation for rings is similar, but much more subtle.</p>
      
          <definition xml:id="defn-integral-element"><title>Integral Element</title>
          
          
            <statement>
              <p>Let <m>R</m> be a ring, <m>S</m> an <m>R</m>-algebra, and <m>I</m> an ideal. An element <m>r</m> of <m>R</m> is <em>integral</em> over <m>I</m> if it satisfies an equation of the form <me>r^n + a_1 r^{n-1} + \cdots + a_{n-1} r + a_n = 0 \quad \text{with} \ a_i \in I^i \ \text{for all} \  i.</me> An element of <m>S</m> is <em>integral</em> over <m>I</m> if <me>s^n + a_1 s^{n-1} + \cdots + a_{n-1} s + a_n = 0 \quad \text{with} \ a_i \in I^i \ \text{for all} \  i.</me> In both cases, we say that <m>r</m> and <m>s</m> satisfy an <em>equation of integral dependence</em> over <m>I.</m></p>
            </statement>
          </definition>

          <p>
            FIX
          </p>

          <remark><p>Integral automatically implies algebraic, but the condition that there exists an equation of algebraic dependence that is <em>monic</em> is stronger in the setting of rings. This is very different to what happens over fields, where algebraic and integral are equivalent conditions.</p></remark>
  
          <example xml:id="ex-sqrt2-integral-in-z"><title><m>\sqrt{2}</m> Integral in <m>\Z</m></title>
            <statement>
              <p>Consider the <m>\Z</m>-algebra <m>R = \Z[\sqrt{2}] = \{ a + b \sqrt{2} \mid a, b \in \Z \}</m>. The element <m>\sqrt{2}</m> is integral over <m>\Z.</m></p>
            </statement>
  
            <solution>
              <p>
                since it satisfies the equation of integral dependence <m>x^2-2 = 0</m>.
              </p>
            </solution>
          </example>
  
          <example xml:id="ex-frac12-in-q-not-integral-in-z"><title><m>\frac{1}{2}</m> in <m>\Q</m> Not Integral in <m>\Z</m></title> 
            <statement>
              <p>Prove <m>\frac{1}{2} \in \mathbb{Q}</m> is not integral over <m>\mathbb{Z}.</m></p>
            </statement>

            <solution>
              <p>If <m>a_0, \ldots, a_{n-1} \in \Z</m> are such that <me>\left( \frac{1}{2} \right)^n + a_{n-1} \left( \frac{1}{2} \right)^{n-1} + \cdots + a_0 = 0,</me>then multiplying by <m>2^n</m> gives <me>1 + 2a_{n-1} + \cdots + 2^n a_0 = 0,</me>which is impossible for parity reasons (the left hand-side is odd!). Notice, in contrast, that <m>\frac{1}{2}</m> is algebraic over <m>\Z</m>, since it satisfies <m>2x-1=0</m>.</p>
            </solution>
          </example>
  
          <definition xml:id="defn-integrally-closed"><title>Integrally Closed</title>
            <statement>
              <p>Consider an an inclusion of rings <m>A \subseteq R</m>. The <em>integral closure</em> <idx><h>integral closure</h></idx>of <m>A</m> in <m>R</m> is the set of elements in <m>R</m> that are integral over <m>A</m>. We say <m>A</m> is <em>integrally closed</em> <idx><h>integrally closed</h></idx> in <m>R</m> if <m>A</m> is its own integral closure in <m>R</m>. The integral closure of a domain <m>R</m> in its field of fractions is usually denoted by <m>\overline{R}.</m> <idx><h><m>\overline{R}</m></h></idx></p>
            </statement>
          </definition>
  
          <definition xml:id="defn-normal-domain"><title>Normal Domain</title>
            <statement>
              <p>A <em>normal domain</em> is a domain <m>R</m> that is integrally closed in its field of fractions, meaning <m>R = \overline{R}.</m></p>
            </statement>
          </definition>
  
          <example xml:id="ex-integers-are-a-normal-domain"><title>Integers are a Normal Domain</title>
            <statement>
              <p>The ring of integers <m>\mathbb{Z}</m> is a integrally closed, meaning its integral closure in its fraction field <m>\mathbb{Q}</m> is <m>\mathbb{Z}</m> itself. The key idea to show this is similar to the argument we used <xref ref="ex-frac12-in-q-not-integral-in-z"/> is not integral over <m>\Z</m>.</p>
            </statement>
          </example>

          <p>In fact, this is a special case of the fact that every UFD is normal.</p>
  
          <example xml:id="ex-ufds-are-normal"><title>UFDs are Normal</title>
            <statement>
              <p>Show that every UFD is normal.</p>
            </statement>
          </example>

          <remark>
            <p>We cannot talk about the integral closure of a ring <m>R</m> without specifying in what extension; the integral closures of <m>R</m> in different extension can be very different. In <xref ref="ex-frac12-in-q-not-integral-in-z"/>, we saw that the integral closure of <m>\Z</m> in <m>\Z[\sqrt{2}]</m> contains at least <m>\Z</m> and <m>\sqrt{2}</m>, while <xref ref="ex-integers-are-a-normal-domain"/> says that the integral closure of <m>\Z</m> in <m>\Q</m> is <m>\Z</m>.</p>
  
            <p>When <m>R</m> is a domain, if we ever refer to <em>the</em> integral closure of <m>R</m>, it is understood that we mean the integral closure of <m>R</m> in its field of fractions, <m>\overline{R}</m>.</p>
          </remark>
      
          <remark>
            <p>An element <m>r \in R</m> is integral over <m>A</m> if and only if <m>r</m> is integral over the subring <m>\varphi(A)\subseteq R</m>, so we might as well assume that <m>\varphi</m> is injective.</p>
          </remark>
            
          <proposition xml:id="prop-f.g.-by-intl-modfin"><title>F.G.-by-Intl-Modfin</title>
            <statement>
              <p>
                Consider a ring extension <m>A\subseteq R</m>. 
                <ol>
                  <li>
                    <p>
                      If <m>r \in R</m> is integral over <m>A</m>, then <m>A[r]</m> is module-finite over <m>A</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>r_1,\dots,r_t \in R</m> are integral over <m>A</m>, then <m>A[r_1,\dots,r_t]</m> is module-finite over <m>A</m>.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
  
            <proof>
  
              <p><ol>
                <li>
                Let <m>r</m> be integral over <m>A</m>, with <m>r^n + a_{n-1} r^{n-1} + \cdots + a_1 r + a_0 = 0</m> for some <m>a_i \in A</m>. We claim that <m>A[r] = A + Ar + \cdots + A r^{n-1}</m>. Since <m>A[r]</m> is generated by all the powers <m>r^m</m> of <m>r</m> as an <m>A</m>-module, to show that any polynomial <m>p(r) \in A[r]</m> is in <m>A + Ar + \cdots + A r^{n-1}</m> it is enough to show that <m>r^m \in A + Ar + \cdots + A r^{n-1}</m> for all <m>m</m>.
                </li>
  
              </ol></p>
  
              <p>
                Using induction on <m>m</m>, the base cases <m>1, r, \ldots, r^{n-1} \in A + Ar + \cdots + A r^{n-1}</m> follow from the fact that <m>r^{k}</m> is contained in the <m>Ar^{k}</m>-th component. For the induction step, we need to show that <m>r^m \in A + Ar + \cdots + A r^{n-1}</m> for all <m>m \geq n-1</m>; we can do this by induction because we can use the equation above to rewrite <m>r^m</m> as <me>\begin{aligned}r^m &amp; = - r^{m-n}(a_{n-1} r^{n-1} + \cdots + a_1 r + a_0) \\&amp; = - a_{n-1} r^{m-1} - \cdots a_1 r^{m-n+1} - a_0 r^{m-n},\end{aligned}</me> which is a linear combination of powers of <m>r</m> of degree up to <m>m-1</m>.
              </p>
  
              <p><ol>
                <li>
                Write <me>A_0 :=  A \subseteq A_1 :=  A[r_1] \subseteq A_2 :=  A[r_1,r_2] \subseteq \cdots \subseteq A_t :=  A[r_1,\dots,r_t].</me>Since <m>r_i</m> is integral over <m>A</m>, it is also integral over <m>A_{i-1}</m>, via the same monic equation that <m>r_i</m> satisfies over <m>A</m>. By Part (a), we conclude that the each extension <m>A_{i-1} \subseteq A_i</m> is module-finite. Thus the inclusion <m>A \subseteq A[r_1,\dots,r_t]</m> is a composition of module-finite maps, and thus by this <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Compositions Preserve Module Finite|Lemma]] it is also module-finite.
                </li>
  
              </ol></p>
  
            </proof>
          </proposition>

          <p>In what follows, we will need the following elementary linear algebra fact, which is actually very useful in various contexts within commutative algebra. In fact, later in this class we will use this useful fact again, perhaps when you least expect it. This is a nice example of an algebra fact that holds over any ring that we can actually reduce to the case of fields.</p>
  
          <definition xml:id="defn-classical-adjoint"><title>Classical Adjoint</title>
            <statement>
              <p>The <em>classical adjoint</em> of an <m>n\times n</m> matrix <m>B=[b_{ij}]</m> is the matrix <m>\mathrm{adj}(B)</m> with entries <me>\mathrm{adj}(B)_{ij}=(-1)^{i+j} \det(\widehat{B_{{ji}}}),</me> where <m>\widehat{B_{{ji}}}</m> <idx><h><m>\widehat{B_{ij}}</m></h></idx>is the matrix obtained from <m>B</m> by deleting its <m>j</m>th row and <m>i</m>th column. <idx><h>classical adjoint</h></idx><idx><h><m>\mathrm{adj}(B)</m></h></idx></p>
            </statement>
          </definition>
  
          <lemma xml:id="lem-determinantal-technique"><title>Determinantal Technique</title>
          <idx><h>determinantal technique</h></idx>
            <statement>
              <p>Let <m>R</m> be a ring, <m>B \in M_{n\times n}(R)</m>, <m>v\in R^n</m>, and <m>r\in R</m>. (a) <m>\mathrm{adj}(B) B = \det(B) I_{n\times n}</m>. (b) If <m>B v = r v</m>, then <m>\det(r I_{n\times n} - B) v=0</m>.</p>
            </statement>
  
            <proof>
  
              <p><ol>
                <li>
                When <m>R</m> is a field, this is a basic linear algebra fact. We will deduce the case of a general ring from the field case. The ring <m>R</m> is a <m>\Z</m>-algebra, so we can write <m>R</m> as a quotient of some polynomial ring <m>\Z[X]</m>. Let <m>\psi:\Z[X]\to R</m> be a surjection, <m>a_{ij}\in \Z[X]</m> be such that <m>\psi(a_{ij})=b_{ij},</m> and let <m>A=[a_{ij}]</m>. Note that <me>\psi(\mathrm{adj}(A)_{ij})=\mathrm{adj}(B)_{ij} \quad \textrm{ and } \quad \psi((\mathrm{adj}(A) A)_{ij}) = (\mathrm{adj}(B) B)_{ij},</me>since <m>\psi</m> is a homomorphism, and the entries are the same polynomial functions of the entries of the matrices <m>A</m> and <m>B</m>, respectively. Thus, it suffices to establish <me>\mathrm{adj}(B) B = \det(B) I_{n\times n}</me>in the case when <m>R=\Z[X]</m>, and we can do this entry by entry. Now, <m>R=\Z[X]</m> is an integral domain, hence a subring of a field (its fraction field). Since both sides of the equation <me>\left( \mathrm{adj}(B) B \right)_{ij} = \left( \det(B) I_{n\times n}\right)_{ij}</me> live in <m>R</m> and are equal in the fraction field (by linear algebra) they are equal in <m>R</m>. This holds for all <m>i, j</m>, and thus 1) holds.
                </li>
  
                <li>
                By assumption, we have <m>(r I_{n\times n} - B) v=0</m>, so by part 1)<me>\det(r I_{n\times n} - B) v=\mathrm{adj}(r I_{n\times n} - B) (r I_{n\times n} - B) v = 0.</me>
                </li>
  
              </ol></p>
  
            </proof>
          </lemma>
  
          <theorem xml:id="thm-module-finite-implies-integral"><title>Module Finite Implies Integral</title>
            <statement>
              <p>Let <m>A\subseteq R</m> be module-finite. Then <m>R</m> is integral over <m>A</m>.</p>
            </statement>
  
            <proof>
              <p>Given <m>r\in R</m>, we want to show that <m>r</m> is integral over <m>A</m>. The idea is to show that multiplication by <m>r</m>, realized as a linear transformation over <m>A</m>, satisfies the characteristic polynomial of that linear transformation.</p>
  
              <p>Suppose that <m>R = A f_1 + \cdots + A f_n</m>. We may assume that <m>f_1=1</m>, perhaps by adding a module generator. Since every element in <m>R</m> is an <m>A</m>-linear combination of <m>f_1, \ldots, f_n</m>, this is in particular true for the elements <m>rf_1, \ldots, r f_n</m>. Thus we can find <m>a_{ij} \in A</m> such that <me>r f_i = \sum_{j=1}^t a_{ij} f_j</me>for each <m>i</m>. Consider the matrix <m>C=[a_{ij}]</m> and the column vector <m>v=(f_1,\dots,f_n)</m>. We can now write the equalities above more compactly as <m>r v = C v</m>. By the Determinantal Technique, <m>\det(r I_{n\times n} - C)v=0</m>. Since we chose one of the entries of <m>v</m> to be <m>1</m>, we have in particular that <m>\det(r I_{n\times n} - C)=0</m>. Expanding this determinant as a polynomial in <m>r</m>, this is a monic equation with coefficients in <m>A</m>.</p>
            </proof>
          </theorem>

          <p>We are now ready to show the following important characterization of module-finite extensions, which tells us exactly what we need besides algebra-finite to force an extension to be module-finite:</p>
  
          <corollary xml:id="cor-mod-fin-iff-integral-and-alg-fin"><title>Mod Fin iff Integral and Alg Fin</title>
            <statement>
              <p>An <m>A</m>-algebra <m>R</m> is module-finite over <m>A</m> if and only if <m>R</m> is integral and algebra-finite over <m>A</m>.</p>
            </statement>

            <proof>
              <p>
                (<m>\Rightarrow</m>): Module-finite implies integral, and algebra-finite.
              </p>

              <p>
                (<m>\Leftarrow</m>): If <m>R=A[r_1,\dots,r_t]</m> is integral over <m>A</m>, then each <m>r_i</m> is integral over <m>A</m>, and this implies <m>R</m> is module-finite over <m>A</m>.
              </p>
            </proof>
          </corollary>
  
          <corollary xml:id="cor-extensions-gen-by-integral-elements-are-integral"><title>Extensions Gen by Integral Elements are Integral</title>
            <statement>
              <p>If <m>R</m> is generated as an algebra over <m>A</m> by integral elements, then <m>R</m> is integral over <m>A</m>.</p>
            </statement>
  
            <proof>
              <p>
                Let <m>R=A[\Lambda]</m>, with <m>\lambda</m> integral over <m>A</m> for all <m>\lambda\in\Lambda</m>. Given <m>r\in R</m>, there is a finite subset <m>L\subseteq \Lambda</m> such that <m>r\in A[L]</m>. This <m>A[L]</m> is now a finitely-generated algebra generated by integral elements, and thus it must be module-finite over <m>A</m>. Module-finite implies integral, and thus <m>A[L]</m> is an integral extension of <m>A</m>. In particular, <m>r \in A[L]</m> is integral over <m>A</m>.
              </p>
            </proof>
          </corollary>
  
          <corollary xml:id="cor-integral-elements-form-subring"><title>Integral Elements form Subring</title>
            <statement>
              <p>
                Given any ring extension <m>A\subseteq S</m>, the set of elements of <m>S</m> that are integral over <m>A</m> form a subring of <m>S</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                By <xref provisional="cor"/> the <m>A</m>-subalgebra of <m>R</m> generated by all elements in <m>R</m> that are integral over <m>A</m> is integral over <m>A</m>, so it is contained in the set of all elements that are integral over <m>A</m>: this means that 
                <me>
                  \{\text{integral elements}\} \subseteq A[\{\text{integral elements}\}] \subseteq \{\text{integral elements}\}, 
                </me>
                so equality holds throughout, and <m>\{\text{integral elements}\}</m> is a ring contained in <m>S</m> by definition.
              </p>
  
            </proof>
          </corollary>

          <p>
            In other words, the integral closure of <m>A</m> in <m>R</m> is a subring of <m>R</m> containing <m>A</m>.
          </p>
      
          <example xml:id="ex-integral-examples">
            <title><m>\Z[\sqrt{d}]</m> Integral Over <m>\Z</m></title>
  
            <statement>
              
              <p>
                <ol>
                  <li>
                    <p>
                      The ring <m>\mathbb{Z}[\sqrt{d}]</m>, where <m>d \in \mathbb{Z}</m> is not a perfect square, is integral over <m>\mathbb{Z}</m>.                 Indeed, <m>\sqrt{d}</m> satisfies the monic polynomial <m>x^2-d</m>, and since the integral closure of <m>\mathbb{Z}</m> is a ring containing <m>\mathbb{Z}</m> and <m>\sqrt{d}</m>, and <m>\mathbb{Z}[\sqrt{d}]</m> is the smallest such ring, we conclude that every element in <m>\Z[\sqrt{d}]</m> is integral over <m>\mathbb{Z}</m>.
                    </p>
                  </li>

                  <li>
                    <p>
                      Let <m>R=\C[x,y] \subseteq S=\C[x,y,z]/(x^2+y^2+z^2)</m>. Then we claim that <m>S</m> is module-finite over <m>R.</m> To see this we first need to realize <m>R</m> as a subring of <m>S</m>. To do that, consider the <m>\C</m>-algebra homomorphism <me>\begin{CD}
                        R@&gt;\varphi&gt;&gt; S\\\\
                        (x,y)@&gt;&gt;&gt; (x,y)
                        \end{CD}</me>The kernel of <m>\varphi</m> consists of the polynomials in <m>x</m> and <m>y</m> that are multiples of <m>x^2+y^2+z^2</m>, but any nonzero multiple of <m>x^2+y^2+z^2</m> in <m>\C[x,y,z]=R[z]</m> must have <m>z</m>-degree at least <m>2</m>, which implies it involves <m>z</m> and thus it is not in <m>\C[x,y]</m>. We conclude that <m>\varphi</m> is injective, and thus <m>R \subseteq S.</m>
                    </p>

                    <p>
                      Now <m>S</m> is generated over <m>R</m> as an algebra by one element, <m>z</m>, and <m>z</m> satisfies the monic equation <m>t^2 + (x^2+y^2) = 0</m>, so <m>S</m> is integral over <m>R</m>.
                    </p>
                  </li>
                </ol>
              </p>
  
            </statement>
  
          </example>

          <p>
            Note, however, that not all integral extensions are module-finite. 
          </p>
  
          <example xml:id="ex-integral-but-not-algebra-or-module-finite">
            <title>Integral but Not Algebra or Module Finite</title>
  
  
            <statement>
              
              <p>
                Let <m>k</m> be a field, and consider the <m>k[x]</m>-algebra <m>R</m> given by <me>k[x] \subseteq R=k[x,x^{1/2},x^{1/3},x^{1/4},x^{1/5},\ldots].</me> Note that <m>x^{1/n}</m> satisfies the monic polynomial <m>t^n - x</m>, and thus it is integral over <m>k[x]</m>. Since <m>R</m> is generated by elements that are integral over <m>k[x]</m>, by  it must be an integral extension of <m>A</m>. However, <m>k[x] \subseteq R</m> is not algebra-finite, and thus it is also not module-finite.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-tower-integral-iff-each-piece-integral">
            <title>Tower Integral iff Each Piece Integral</title>
  
  
            <statement>
              
  
              <p>
                Given ring extensions <m>A \subseteq B \subseteq C</m>, the extensions <m>A \subseteq B</m> and <m>B \subseteq C</m> are integral if and only if <m>A \subseteq C</m> is integral.
              </p>
  
            </statement>
          </example>

          <p>
            Finally, here is a useful fact about integral extensions that we will use multiple times.
          </p>
  
          <theorem xml:id="thm-int-ext-domains-field">
            <title>Int Ext Domains Field</title>
  
  
            <statement>
              
  
              <p>
                If <m>R \subseteq S</m> is an integral extension of domains, then <m>R</m> is a field if and only if <m>S</m> is a field.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Suppose that <m>R</m> is a field, and let <m>s \in S</m> be a nonzero element, which is necessarily integral over <m>R</m>. The ring <m>R[s]</m> is algebra-finite over <m>R</m> by construction, and integral over <m>R</m>. Since <m>R \subseteq R[s]</m> is integral and algebra-finite, it must also be module-finite. Since <m>R</m> is a field, this means that <m>R[s]</m> is a finite-dimensional vector space over <m>R</m>. Since <m>R[s] \subseteq S</m> is a domain, the map <m>R[s] \xrightarrow{\, s \,} R[s]</m> is injective. Notice that this is a map of finite-dimensional <m>R</m>-vector spaces, and thus it must also be surjective. In particular, there exists an element <m>t \in R[s]</m> such that <m>st = 1,</m> and thus <m>s</m> is invertible. We conclude that <m>S</m> must be a field.
              </p>
  
              <p>
                Now suppose that <m>S</m> is a field, and let <m>r \in R</m>. Since <m>r \in R \subseteq S</m>, there exists an inverse <m>r^{-1}</m> for <m>r</m> in <m>S</m>, which must be integral over <m>R</m>. Given any equation of integral dependence for <m>r^{-1}</m> over <m>R</m>, say<me>(r^{-1})^n + a_{n-1} (r^{-1})^{n-1} + \cdots + a_0 = 0</me>with <m>a_i \in R</m>, we can multiply by <m>r^{n-1}</m> to obtain<me>r^{-1} = -a_{n-1} - \cdots -a_0 r^{n-1} \in R.</me>Therefore, <m>r</m> is invertible in <m>R</m>, and <m>R</m> is a field.
              </p>
  
            </proof>
          </theorem>

          <p>
            Before we move on from algebra-finite and module-finite extensions, we should remark on what the situation looks like over fields. First, note that over a field, module-finite just means finite dimensional vector space. While over a general ring the notions of algebra-finite and module-finite are quite different, they are actually equivalent over a field. This is a very deep fact, and we will unfortunately skip its proof — since it is a key ingredient in proving a fundamental result in algebraic geometry, we will leave it for the algebraic geometry class next semester. This is a nice application of the Artin-Tate Lemma, which we are going to discuss shortly, together with some facts about transcendent elements.
          </p>
  
          <theorem xml:id="thm-zariskis-lemma">
            <title>Zariski's Lemma</title>
  
  
            <statement>
              
  
              <p>
                A field extension <m>k \subseteq L</m> is algebra-finite if and only if it is module-finite.
              </p>
  
            </statement>
          </theorem>

          <p>
            The following corollary follows immediately from what we proved in this section:
          </p>
  
          <corollary xml:id="cor-alg-fin-ext-of-alg-closed-field">
            <title>Alg-Fin Ext of Alg Closed Field</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be an algebraically closed field. If the field extension <m>k \subseteq L</m> is algebra-finite, then <m>k = L</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                By Zariski's Lemma, <m>k \subseteq L</m> must be module-finite, making the extension integral. When we are over a field, integral is the same as algebraic, but integrally closed fields have no nontrivial algebraic extensions.
              </p>
  
            </proof>
          </corollary>

        </section>

        <section xml:id="sec-ses"><title>Short Exact Sequences</title>

          <!--**************************
          Section: Short Exact Sequences
          ***************************-->
          
          <blockquote>
            <p>
              <q>Impressive claims are made far more impressive by making them exact.</q>
            </p>
            <attribution>Claude C. Hopkins</attribution>
          </blockquote>

          <p>
            Homological techniques play a central role in commutative algebra. Ideally, our study of commutative algebra would start with a semester long course on homological algebra; but we are not assuming any homological algebra background, and thus we need to introduce some elementary homological algebra tools.
          </p>
      
          <definition xml:id="defn-exact-sequence">
            <title>Exact Sequence</title>
  
          <statement>
            <p>
              An <em>exact sequence</em> <idx><h>exact sequence of modules</h></idx>of <m>R</m>-modules] is a sequence <me>\begin{CD}
  \dots@&gt;f_{n-1}&gt;&gt;M_{n}@&gt;f_{n}&gt;&gt;M_{n+1}@&gt;f_{n+1}&gt;&gt;\dots
  \end{CD}</me> of <m>R</m>-modules] and <m>R</m>-module homomorphisms such that <m>\im f_n = \ker f_{n+1}</m> for all <m>n</m>.
            </p>
          </statement>
  
          </definition>

          <definition xml:id="def-ses"><title>Short Exact Sequence</title>
            <statement>
              <p>
                An exact sequence of the form 
                <me>
                  0\to A\to B\to C\to 0
                </me>
                is called a <em>short exact sequence</em>. <idx><h>short exact sequence</h></idx>
              </p>
            </statement>
          </definition>
  
          <example xml:id="ex-ses"><title>Short Exaxt Sequence Example</title>
  
            <p>
              Let <m>R = k[x]/(x^2)</m>, where <m>k</m> is any field. The <m>R \xrightarrow{\, x\,} R</m> has image and kernel <m>(x)</m>, so the following is an exact sequence: 
              <me>
                \begin{CD}
                 \dots@&gt;&gt;&gt;R@&gt;x&gt;&gt;R@&gt;x&gt;&gt;R@&gt;&gt;&gt;\dots
                \end{CD}
              </me>
            </p>
  
          </example>

          <remark>
            <p>
              The sequence 
              <me>
                \begin{CD}
                0@&gt;&gt;&gt;M@&gt;f&gt;&gt;N
                \end{CD}
              </me>
              is exact if and only if <m>f</m> is injective. Similarly, 
              <me>
                \begin{CD}
                  M@&gt;f&gt;&gt;N@&gt;&gt;&gt;0
                \end{CD}
              </me>
              is exact if and only if <m>f</m> is surjective. As a consequence, we see that 
              <me>
                \begin{CD}
                  0@&gt;&gt;&gt;M@&gt;f&gt;&gt;N@&gt;&gt;&gt;0
                \end{CD}
              </me>
              is exact if and only if <m>f</m> is an isomorphism. Moreover,
              <me>
                \begin{CD}
                  0@&gt;&gt;&gt;A@&gt;f&gt;&gt;B@&gt;g&gt;&gt;C@&gt;&gt;&gt;0
                \end{CD}
              </me>
              is a short exact sequence if and only if 
              <ol>
                <li>
                  <p>
                    <m>f \text{is injective} \amp g \text{is surjective} \amp \im f=\ker g</m>
                  </p>
                </li>
              </ol>
                
              So when this is indeed a short exact sequence, we can identify <m>A</m> with its image <m>f(A)</m>, which makes <m>A = \ker g</m>. Moreover, since <m>g</m> is surjective, by the <xref text="title" ref="thm-fit-mod"/> we conclude that <m>C \cong B/A</m>, so we might abuse notation and identify <m>C</m> with <m>B/A</m>. In particular, note that <m>C = \coker f</m>.
            </p>
  
            <p>
              In summary, any short exact sequence encodes an inclusion and its cokernel, or equivalently a surjection an its kernel. To give a short exact sequence 
              <me>
                \begin{CD}
                  0@&gt;&gt;&gt;A@&gt;&gt;&gt;B@&gt;&gt;&gt;C@&gt;&gt;&gt;0
                \end{CD}
              </me> 
              is the same as giving an inclusion of modules <m>A \subseteq B</m> and the corresponding quotient module <m>B/A</m>.
            </p>
          </remark>
  
          <example xml:id="ex-ses-zmods"><title>SES of <m>\Z</m>-modules</title>
  
            <p>
              The following is a short exact sequence of <m>\Z</m>-modules: 
              <me>
                \begin{CD}
                  0@&gt;&gt;&gt;\Z@&gt;2&gt;&gt;\Z@&gt;&gt;&gt;\Zm 2@&gt;&gt;&gt;0
                \end{CD}
              </me>
              Indeed, multiplication by <m>2</m> on <m>\Z</m> is injective, and its cokernel is <m>\Zm 2</m>. Another way to look at this is to notice that the kernel of the canonical projection map <m>\Z \to \Zm 2</m> is the ideal generated by <m>2</m>, which is a free <m>\Z</m>-module with <m>1</m> generator. The map <m>\Z \xrightarrow{\, 2 \,} \Z</m> corresponds to the inclusion of that module in <m>\Z</m>.
            </p>
  
          </example>

          <remark>
            <p>
              Suppose that
              <me>
                \begin{CD}
                  0@&gt;&gt;&gt;M@&gt;&gt;&gt;0
                \end{CD}
              </me>
              is an exact sequence. This means that the image of the zero map to <m>M</m>, which is the zero module, is the same as the kernel of the zero map from <m>M</m>, which is all of <m>M</m>. Thus saying that
              <me>
                \begin{CD}
                  0@&gt;&gt;&gt;M@&gt;&gt;&gt;0
                \end{CD}
              </me>
              is exact is equivalent to saying that <m>M = 0</m>.
            </p>
          </remark>
      
        </section>

        <section xml:id="sec-noetherian"><title>Noetherian Rings</title>

          <!--*********************
          Section: Noetherian Rings
          **********************-->

          <introduction>
            <blockquote>
              <p>
                <q>It is worth ascending unexiting heights if for nothing else than to see the big ones from nearer their own level.</q>
              </p>
              <attribution>Nan Shepherd</attribution>
            </blockquote>
          </introduction>

          <subsection xml:id="subsec-noetherian-rings">
            <title>Noetherian Rings</title>

            <p>
              Most rings that commutative algebraists naturally want to study are noetherian. Noetherian rings are named after Emmy Noether, who is in many ways the mother of modern commutative algebra.
            </p>
        
            <definition xml:id="defn-noetherian-ring"><title>Noetherian Ring</title>
            <idx><h>noetherian ring</h></idx>
            <statement>
              <p>
                Suppose <m>R</m> is a commutative ring. Then <m>R</m> is called a <em>noetherian ring</em> if <m>R</m> satisfies the ascending chain condition on ideals - i.e., for every chain of ideals of <m>R</m> <me>I_1 \subseteq I_2  \subseteq I_3 \subseteq \cdots</me> there exists a positive integer <m>n</m> such that <m>I_n = I_{n+1} = I_{n+2} = \cdots=I_{n+k}</m> for all <m>k\geq 0</m>.
              </p>
            </statement>

            </definition>

            <proposition xml:id="prop-equivalent-noetherian-ring-definitions">
              <title>Equivalent Noetherian Ring Definitions</title>


              <statement>
                

                <p>
                  Let <m>R</m> be a ring. The following are equivalent:
                </p>

                <p><ol>
                  <li>
                  <m>R</m> is a noetherian ring.
                  </li>

                  <li>
                  Every nonempty family of ideals has a maximal element (under <m>\subseteq</m>).
                  </li>

                  <li>
                  Every ascending chain of finitely generated ideals of <m>R</m> stabilizes.
                  </li>

                  <li>
                  Given any generating set <m>S</m> for an ideal <m>I</m>, <m>I</m> is generated by a finite subset of <m>S</m>.
                  </li>

                  <li>
                  Every ideal of <m>R</m> is finitely generated.
                  </li>

                </ol></p>

              </statement>

              <proof>


                <p>
                  (1)<m>\Rightarrow</m>(2): Suppose there is a nonempty family of ideals with no maximal element. This means that we can keep inductively choosing larger ideals from this family to obtain an infinite properly ascending chain, so <m>R</m> is not noetherian.
                </p>

                <p>
                  (2)<m>\Rightarrow</m>(1): An ascending chain of ideals is a family of ideals, and the maximal ideal in the family indicates where our chain stabilizes.
                </p>

                <p>
                  (1)<m>\Rightarrow</m>(3): Contained within the definition of a noetherian ring.
                </p>

                <p>
                  (3)<m>\Rightarrow</m>(4): Suppose that there is an ideal <m>I</m> and a generating set <m>S</m> for <m>I</m> such that no finite subset of <m>S</m> generates <m>I</m>. So for any finite <m>S'\subseteq S</m> we have <m>(S') \subsetneq (S) =I</m>, so there is some <m>s \in S \setminus (S').</m> Thus, <m>(S') \subsetneq (S' \cup \{s\})</m>. Inductively, we can continue this process to obtain an infinite proper chain of finitely generated ideals, so (c) does not hold.
                </p>

                <p>
                  (4)<m>\Rightarrow</m>(5): This is the definition of being finitely generated.
                </p>

                <p>
                  (5)<m>\Rightarrow</m>(1): Given an ascending chain of ideals 
                  <me>
                    I_1 \subseteq I_2 \subseteq I_3 \subseteq \cdots
                  </me> 
                  let <m>I=\bigcup_{n\in \N} I_n</m>. In general, the union of two ideals might fail to be an ideal, but the union of a chain of ideals is an ideal (exercise). By assumption, the ideal <m>I</m> is finitely generated, say <m>I=(a_1,\dots,a_t)</m>. Now since each <m>a_i</m> is in <m>I</m>, it must be in some <m>I_{n_i}</m>, by definition. Thus for any <m>N \geqslant \max n_i</m>, we have <m>a_1, \ldots, a_t \in I_N</m>. But then <m>I_N=I</m>, and thus <m>I_n = I_{n+1}</m> for all <m>n \geqslant N</m>. Thus the original chain stabilizes, and <m>R</m> is noetherian.
                </p>

              </proof>
            </proposition>
            
            <remark>
              <p>
                When we say that every non-empty family of ideals has a maximal element, that maximal element does not have to be unique in any way. An ideal <m>I</m> is maximal in the family <m>\mathcal{F}</m> if <m>I \subseteq J</m> for some <m>J \in \mathcal{F}</m> implies <m>I = J</m>. However, we might have many incomparable maximal elements in <m>\mathcal{F}</m>. For example, every element in the family of ideals in <m>\mathbb{Z}</m> given by <me>\mathcal{F} = \lbrace (p) \mid p \textrm{ is a prime integer} \rbrace</me>is maximal.
              </p>
            </remark>

            <remark>
              <p>
                If <m>R</m> is a noetherian ring and <m>S</m> is a non-empty set of ideals in <m>R</m>, not only does <m>S</m> have a maximal element, but every element in <m>S</m> must be contained in a maximal element of <m>S</m>. Given an element <m>I \in S</m>, the subset <m>T</m> of <m>S</m> of ideals in <m>S</m> that contain <m>I</m> is nonempty, and must then contain a maximal element <m>J</m> by . If <m>J \subseteq L</m> for some <m>L \in S</m>, then <m>I \subseteq L</m>, so <m>L \in T</m>, and thus by maximality of <m>J</m> in <m>T</m>, we must <m>J = L</m>. This proves that <m>J</m> is in fact a maximal element in <m>S</m>, and by construction it contains <m>I</m>.
              </p>
            </remark>

            <example xml:id="ex-noetherian-examples"><title>Examples of Noetherian Domains</title>

              <statement>
                
                <p>
                  <ol>
                    <li>
                      <p>
                        If <m>R=k</m> is a field, the only ideals in <m>k</m> are <m>(0)</m> and <m>(1)=k</m>, so <m>k</m> is a noetherian ring.
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>\mathbb{Z}</m> is a noetherian ring, since all ideals are principal. More generally, if <m>R</m> is a PID, then <m>R</m> is noetherian. Indeed, every ideal is finitely generated!
                      </p>
                    </li>

                    <li>
                      <p>
                        As a special case of the previous example, consider the ring of germs of complex analytic functions near <m>0</m>, <idx><h><m>\C\{z\}</m></h></idx>
                        <me>
                          \C\{z\} := \{ f(z) \in \CC[[z]] \ | \ f \text{ is analytic on a neighborhood of }z=0\}.
                        </me>
                        This ring is a PID: every ideal is of the form <m>(z^n)</m>, since any <m>f\in \CC\{z\}</m> can be written as <m>z^n g(z)</m> for some <m>g(z)\neq 0</m>, and any such <m>g(z)</m> is a unit in <m>\C\{z\}</m>.
                      </p>
                    </li>

                    <li>
                      <p>
                        A ring that is not noetherian is a polynomial ring in infinitely many variables over a field <m>k</m>, <m>R = k[x_1, x_2, \ldots]</m>: the ascending chain of ideals <me>(x_1)\subseteq (x_1,x_2) \subseteq (x_1,x_2,x_3) \subseteq \cdots</me>does not stabilize.
                      </p>
                    </li>

                    <li>
                      <p>
                        The ring <m>R=k[x,x^{1/2},x^{1/3},x^{1/4},x^{1/5},\dots]</m> is not noetherian. A nice ascending chain of ideals is <me>(x) \subsetneq (x^{1/2}) \subsetneq (x^{1/3})\subsetneq (x^{1/4}) \subsetneq \cdots.</me>
                      </p>
                    </li>

                    <li>
                      <p>
                        The ring of continuous real-valued functions <m>\mathcal{C}(\R,\R)</m> <idx><h><m>\mathcal{C}(\R,\R)</m></h></idx>is not noetherian. The chain of ideals <me>I_{n}=\{ f(x) \in \mathcal{C}(\R,\R) \ | \ f|_{[-1/n,1/n]}\equiv 0 \}</me> is increasing and proper. The same construction shows that the ring of infinitely differentiable real functions <m>\mathcal{C}^{\infty}(\R,\R)</m> <idx><h><m>\mathcal{C}^{\infty}(\R,\R)</m></h></idx> is not noetherian: properness of the chain follows from, e.g., Urysohn's lemma (though it's not too hard to find functions distinguishing the ideals in the chain). Note that if we asked for analytic functions instead of infinitely-differentiable functions, every element of the chain would be the zero ideal!
                      </p>
                    </li>
                  </ol>
                </p>

              </statement>
            </example>

            <lemma xml:id="lem-quotient-noetherian">
              <title>Quotient Noetherian</title>


              <statement>
                

                <p>
                  Let <m>R</m> be a ring and <m>I</m> an ideal in <m>R</m>. If <m>R</m> is noetherian, then so is <m>R/I</m>.
                </p>

              </statement>

              <proof>

                <p>
                  There is an order preserving bijection <me>\{ \text{ideals of } R \text{ that contain } I \} \longleftrightarrow \{\text{ideals of }R/I\}</me> that sends the ideal <m>J \supseteq I</m> to <m>J/I</m>; its inverse is the map that sends each ideal in <m>R/I</m> to its preimage. Given this bijection, chains of ideals in <m>R/I</m> come from chains of ideals in <m>R</m> that contain <m>J</m>. This implies that if <m>R</m> is noetherian, then <m>R/I</m> is noetherian as well.
                </p>

              </proof>
            </lemma>

            <p>
              This gives us many more examples of noetherian rings, by simply taking quotients of the examples above. We will soon show that any polynomial ring over a noetherian ring is also noetherian; as a consequence, we obtain that any quotient of a polynomial ring over a field is noetherian. This is the content of Hilbert's Basis Theorem.
            </p>

            <p>
              But first, we need to talk about noetherian modules.
            </p>

          </subsection>

          <subsection xml:id="subsec-noetherian-modules">
            <title>Noetherian Modules</title>
            
            <definition xml:id="defn-noetherian-module"><title>Noetherian Module</title>
            <idx><h>noetherian module</h></idx>
    
            <statement>
              <p>
                An <m>R</m>-module <m>M</m> is <em>noetherian</em> if every ascending chain of submodules of <m>M</m> eventually stabilizes.
              </p>
            </statement>
    
            </definition>
    
            <proposition xml:id="prop-equivalent-definitions-for-noetherian-module">
              <title>Equivalent Definitions for Noetherian Module</title>
    
              <statement>
                <p>
                  Let <m>M</m> be an <m>R</m>-module. The following are equivalent: 

                  <ol>
                    <li>
                      <p>
                        <m>M</m> is a noetherian module. 
                      </p>
                    </li>

                    <li>
                      <p>
                        Every nonempty family of submodules has a maximal element. 
                      </p>
                    </li>

                    <li>
                      <p>
                        Every ascending chain of finitely generated submodules of <m>M</m> eventually stabilizes. 
                      </p>
                    </li>

                    <li>
                      <p>
                        Given any generating set <m>S</m> for a submodule <m>N</m>, the submodule <m>N</m> is generated by a finite subset of <m>S</m>. 
                      </p>
                    </li>

                    <li>
                      <p>
                        Every submodule of <m>M</m> is finitely generated. In particular, a noetherian module must be finitely generated.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </proposition>
    
            <example xml:id="ex-noetherian-ring-iff-noetherian-module-over-itself">
              <title>Noetherian Ring iff Noetherian Module over Itself</title>
    
    
              <statement>
                
    
                <p>
                  A ring <m>R</m> is a noetherian ring if and only if <m>R</m> is noetherian as a module over itself.
                </p>
    
              </statement>
            </example>
    
            <example xml:id="ex-noeth-ring-not-noeth-mod-over-subring">
              <title>Noeth Ring Not Noeth Mod over Subring</title>
    
    
              <statement>
                
    
                <p>
                  A noetherian ring need not be a noetherian module over a subring.
                </p>
    
              </statement>
    
              <solution>
    
                <p>
                  For example, consider <m>\Z\subseteq \Q</m>. These are both noetherian rings but <m>\Q</m> is not a noetherian <m>\Z</m>-module; for example, the following is an ascending chain of submodules which does not stabilize: <me>0 \subsetneq \frac{1}{2} \Z \subsetneq \frac{1}{2} \Z + \frac{1}{3} \Z \subsetneq \frac{1}{2} \Z + \frac{1}{3} \Z + \frac{1}{5} \Z \subsetneq \cdots .</me>
                </p>
    
              </solution>
            </example>
    
            <lemma xml:id="lem-noetherianity-in-exact-sequences">
              <title>Noetherianity in Exact Sequences</title>
    
    
              <statement>
                
    
                <p>
                  In an exact sequence of modules <me>\begin{CD}
                  0@&gt;&gt;&gt;A@&gt;f&gt;&gt;B@&gt;g&gt;&gt;C@&gt;&gt;&gt;0
                  \end{CD}</me><m>B</m> is noetherian if and only if <m>A</m> and <m>C</m> are noetherian.
                </p>
    
              </statement>
    
              <proof>
    
                <p>
                  Assume <m>B</m> is noetherian. Since <m>A</m> is a submodule of <m>B</m>, and its submodules are also submodules of <m>B</m>, <m>A</m> is noetherian. Moreover, any submodule of <m>B/A</m> is of the form <m>D/A</m> for some submodule <m>D \supseteq A</m> of <m>B</m>. Since every submodule of <m>B</m> is finitely generated, every submodule of <m>C</m> is also finitely generated. Therefore, <m>C</m> is noetherian.
                </p>
    
                <p>
                  Conversely, assume that <m>A</m> and <m>C</m> are noetherian, and let <me>M_1 \subseteq M_2 \subseteq M_3 \subseteq \cdots</me> be a chain of submodules of <m>B</m>. First, note that <me>M_1 \cap A \subseteq M_2 \cap A \subseteq \cdots</me> is an ascending chain of submodules of <m>A</m>, and thus it stabilizes. Moreover, <me>g(M_1) \subseteq g(M_2) \subseteq g(M_3) \subseteq \cdots</me> is a chain of submodules of <m>C</m>, and thus it also stabilizes. Pick a large enough index <m>n</m> such that both of these chains stabilize. We claim that <m>M_n = M_{n+1}</m>, so that the original chain stabilizes as well. To show that, take <m>x \in M_{n+1}</m>. Then <me>g(x) \in g(M_{n+1}) = g(M_n)</me> so we can choose some <m>y \in M_n</m> such that <m>g(x) = g(y)</m>. Then <m>x-y \in \ker g = \im f = A</m>. Now note that <m>y \in M_n \subseteq M_{n+1}</m>, so <m>x-y \in M_{n+1}</m>, and thus <me>x-y \in M_{n+1} \cap A = M_n \cap A.</me> Then <m>x-y \in M_n</m>, and since <m>y \in M_n</m>, we must have <m>x \in M_n</m> as well.
                </p>
    
              </proof>
            </lemma>
    
            <corollary xml:id="cor-direct-sums-are-noetherian">
              <title>Direct Sums are Noetherian</title>
    
    
              <statement>
                
    
                <p>
                  If <m>A</m> and <m>B</m> are noetherian <m>R</m>-modules, then <m>A \oplus B</m> is a noetherian <m>R</m>-module.
                </p>
    
              </statement>
    
              <proof>
    
                <p>
                  Apply the previous <xref ref="lem-noetherianity-in-exact-sequences"/> to the short exact sequence 
                  <me>
                    \begin{CD}
                    0@&gt;&gt;&gt;A@&gt;&gt;&gt;A\oplus B@&gt;&gt;&gt;B@&gt;&gt;&gt;0
                    \end{CD}
                  </me>
                </p>
    
              </proof>
            </corollary>
    
            <corollary xml:id="cor-module-powers-are-noetherian">
              <title>Module Powers are Noetherian</title>
    
    
              <statement>
                
    
                <p>
                  A module <m>M</m> is noetherian if and only if <m>M^n</m> is noetherian for some <m>n</m>. In particular, if <m>R</m> is a noetherian ring then <m>R^n</m> is a noetherian module.
                </p>
    
              </statement>
    
              <proof>
    
                <p>
                  We will do induction on <m>n</m>. The case <m>n=1</m> is a tautology. For <m>n&gt;1</m>, consider the short exact sequence <me>\begin{CD}
                  0@&gt;&gt;&gt;M^{n-1}@&gt;&gt;&gt;M^{n}@&gt;g&gt;&gt;M@&gt;&gt;&gt;0
                  \end{CD}</me> 
                  <xref ref="lem-noetherianity-in-exact-sequences"/> and the inductive hypothesis give the desired conclusion.
                </p>
    
              </proof>
            </corollary>
    
            <proposition xml:id="prop-submodule-of-f.g.-module-f.g.">
              <title>Submodule of F.G. Module F.G</title>
    
    
              <statement>
                
    
                <p>
                  Let <m>R</m> be a noetherian ring. Given an <m>R</m>-module <m>M</m>, <m>M</m> is a noetherian <m>R</m>-module if and only if <m>M</m> is finitely generated. Consequently, any submodule of a finitely generated <m>R</m>-module is also finitely generated.
                </p>
    
              </statement>
    
              <proof>
    
                <p>
                  If <m>M</m> is noetherian, <m>M</m> is finitely generated, and so are all of its submodules.
                </p>
    
                <p>
                  Now let <m>R</m> be noetherian and <m>M</m> be a finitely generated <m>R</m>-module. Then <m>M</m> is isomorphic to a quotient of <m>R^n</m> for some <m>n</m>, which is noetherian by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Corollary - Module Powers are Noetherian|Corollary]] and <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Quotient Noetherian|Lemma]].
                </p>
    
              </proof>
            </proposition>
    
            <example xml:id="ex-noetherian-required-for-noetherian-f.g.">
              <title>Noetherian Required for Noetherian F.G</title>
    
    
              <statement>
                
    
                <p>
                  If <m>R</m> is a non-noetherian ring and <m>M</m> is a finitely generated <m>R</m>-module, <m>M</m> might not be noetherian.
                </p>
    
              </statement>
    
              <solution>
    
                <p>
                  For a dramatic example, note that <m>R</m> itself is a finitely generated <m>R</m>-module, but not noetherian.
                </p>
    
              </solution>
            </example>

          </subsection>

          <subsection xml:id="subsec-hilbert">
            <title>Hilbert's Basis Theorem</title>

            <p>
              Now we are ready to prove Hilbert's Basis Theorem. David Hilbert was a big influence in the early years of commutative algebra, in many different ways. Emmy Noether's early work in algebra was in part inspired by some of his work, and he later invited her to join the Göttingen Math Department — many of her amazing contributions to algebra happened during her time in Göttingen. Unfortunately, some of the faculty opposed a woman joining the department, and for her first two years in Göttingen, Noether did not have an official position nor was she paid. Hilbert's contributions also include three of the most fundamental results in commutative algebra — Hilbert's Basis Theorem, the Hilbert Syzygy Theorem, and Hilbert's Nullstellensatz.
            </p>
        
            <theorem xml:id="hilbert-basis-theorem">
              <title>Hilbert's Basis Theorem</title>
    
    
              <statement>
                
                <p>
                  If <m>R</m> is a noetherian ring, then the polynomial rings <m>R[x_1,\dots,x_d]</m> and <m>R[[ x_1,\dots,x_d]]</m> are noetherian for any <m>d \geqslant 1</m>.
                </p>
    
              </statement>
    
              <proof>
    
                <p>
                  We will give the proof for polynomial rings, and at the end we will indicate what the difference is in the argument for the power series ring case. First, note that by induction on <m>d</m>, we can reduce to the case <m>d=1</m>.
                </p>
    
                <p>
                  Given an ideal <m>I\subseteq R[x]</m>, consider the set of leading coefficients of all polynomials in <m>I</m>, <me>J :=  \{ a \in R \ \mid  \ \textrm{there is some } a x^n + \text{lower order terms (with respect to }x) \in I\}.</me> By the <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Exercise - Hilbert Basis Lemma|Hilbert Basis Lemma]], we see that this is an ideal of <m>R</m>. Since <m>R</m> is noetherian, <m>J</m> is finitely generated, so let <m>J = (a_1,\dots,a_t)</m>. Pick <m>f_1,\dots,f_t\in R[x]</m> such that the leading coefficient of <m>f_i</m> is <m>a_i</m>, and set <m>N=\displaystyle\max_i \{\deg{f_i} \}</m>.
                </p>
    
                <p>
                  Let <m>f \in I</m>. The leading coefficient of <m>f</m> is an <m>R</m>-linear combination of <m>a_1, \ldots, a_t</m>. If <m>f</m> has degree greater than <m>N</m>, then we can cancel off the leading term of <m>f</m> by subtracting a suitable combination of the <m>f_i</m>. Therefore, any <m>f \in I</m> can be written as <m>f = g+ h</m> for some <m>h \in (f_1, \ldots, f_t)</m> and <m>g \in I</m> with degree at most <m>N</m>. In particular, note that <me>g \in I \cap \frac{R + Rx + \cdots + R x^N}.</me>Since <m>I \cap (R + Rx + \cdots + R x^N)</m> is a submodule of the finitely generated free <m>R</m>-module <m>R + Rx + \cdots + R x^N</m>, it must also be finitely generated as an <m>R</m>-module. Given such a generating set, say <m>I \cap (R + Rx + \cdots + Rx^N) = (f_{t+1}, \ldots, f_s)</m>, we can write any element <m>f \in I</m> as an <m>R[x]</m>-linear combination of these generators <m>f_{t+1}, \ldots, f_s</m> and the original <m>f_{1}, \ldots, f_t</m>. Therefore, <m>I = (f_1, \ldots, f_t, f_{t+1}, \ldots, f_s)</m> is finitely generated as an ideal in <m>R[x]</m>, and <m>R[x]</m> is a noetherian ring.
                </p>
    
                <p>
                  In the power series case, take <m>J</m> to be the set of coefficients of lowest degree terms.
                </p>
    
              </proof>
            </theorem>

            <remark>
              <p>
                We can rephrase <xref text="title" ref="hilbert-basis-theorem"/> in a way that can be better understood by those with high school algebra (as opposed to abstract algebra) knowledge:
              </p>
    
              <blockquote>
                          <p>
                Any system of polynomial equations in finitely many variables can be written in terms of finitely many equations.
              </p>
              </blockquote>
            </remark>

            <p>
              Finally, note that a standard corollary of the Hilbert Basis Theorem is that finitely generated algebras over noetherian rings are also noetherian.
            </p>
    
            <corollary xml:id="cor-f.g.-algebras-over-noeth-rings-are-noeth">
              <title>F.G. Algebras over Noeth Rings are Noeth</title>
    
              <statement>
                <p>
                  If <m>R</m> is a noetherian ring, then any finitely generated <m>R</m>-algebra is noetherian. In particular, any finitely generated algebra over a field is noetherian.
                </p>
              </statement>
    
              <proof>
                <p>
                  Any finitely generated <m>R</m>-algebra is isomorphic to a quotient of a polynomial ring over <m>R</m> in finitely many variables; polynomial rings over noetherian rings are noetherian by the <xref text="title" ref="hilbert-basis-theorem"/>, and quotients of noetherian rings are noetherian.
                </p>
              </proof>
            </corollary>

            <remark>
              <p>
                The converse to this statement is false: there are lots of noetherian rings that are not finitely generated algebras over a field. For example, <m>\C\{z\}</m> is not algebra-finite over <m>\C</m>. We will see more examples of these when we talk about local rings.
              </p>
            </remark>

            <p>
              Finally, we can now prove a technical sounding result that puts together all our finiteness conditions in a useful way.
            </p>
    
            <theorem xml:id="thm-artin-tate-lemma">
              <title>Artin-Tate Lemma</title>   
    
              <statement>               
                <p>
                  Let <m>A\subseteq B \subseteq C</m> be rings. Assume that 
                  <ul>
                    <li>
                      <p>
                        <m>A</m> is noetherian, 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>C</m> is module-finite over <m>B</m>, and 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>C</m> is algebra-finite over <m>A</m>. Then, <m>B</m> is algebra-finite over <m>A</m>.
                      </p>
                    </li>
                  </ul>
                </p>
              </statement>
    
              <proof>
                <p>
                  Let <m>C=A[f_1,\dots,f_r]</m> and <m>C=B g_1 + \cdots + B g_s</m>. Then, <me>f_i = \sum_j b_{ij} g_j \quad \text{and} \quad g_i g_j = \sum_k b_{ijk} g_k</me> for some <m>b_{ij}, b_{ijk}\in B</m>. Let <m>B_0 = A[\{b_{ij}, b_{ijk}\}] \subseteq B</m>. This is a finitely generated <m>A</m>-algebra; by this <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Corollary - F.G. Algebras over Noeth Rings and Noeth|Corollary]], since <m>A</m> is noetherian, so is <m>B_0</m>.
                </p>
    
                <p>
                  We claim that <m>C=B_0 \, g_1 + \cdots + B_0 g_s</m>. Given an element <m>c\in C</m>, write <m>c</m> as a polynomial expression in <m>f_1, \ldots, f_r</m>. Since the <m>f_i</m> are linear combinations of the <m>g_i</m> with coefficients in the <m>b_{ij},</m> we have <m>c\in A[\{b_{ij}\}][g_1,\dots,g_s]</m>. Then using the equations for <m>g_i g_j</m> repeatedly, we can rewrite <m>c</m> as a linear combination of the <m>g_i</m> with coefficients in <m>B_0</m>.
                </p>
    
                <p>
                  Since <m>B_0</m> is noetherian and <m>C</m> is a finitely generated <m>B_0</m>-module, <m>C</m> is a noetherian <m>B_0</m>-module, by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - Submodule of F.G. Module F.G.|Proposition]]. Since <m>B\subseteq C</m>, then <m>B</m> is also a finitely generated <m>B_0</m>-module. In particular, <m>B_0 \subseteq B</m> is algebra-finite. Since <m>A \subseteq B_0</m> is algebra-finite, we conclude that <m>A \subseteq B</m> is algebra-finite, as required.
                </p>    
              </proof>
            </theorem>
            
          </subsection>

        </section>

        <section xml:id="sec-inv-rings-1"><title>Invariant Rings: Application I</title>

          <!--**********************
          Section: Invariant Rings I
          ***********************-->
          
          <blockquote>
            <p>
              <q>No taxation without representation!</q>
            </p>
            <attribution>James Otis</attribution>
          </blockquote>

          <p>
            Historically, commutative algebra has roots in classical questions of algebraic and geometric flavors, including the following natural question:
          </p>

          <question xml:id="question">
            <p>
              Given a (finite) set of symmetries, consider the collection of polynomial functions that are fixed by all of those symmetries. Can we describe all the fixed polynomials in terms of finitely many of them?
            </p>
          </question>

          <p>
            To make this precise, let <m>G</m> be a group acting on a ring <m>R</m>. The main case we have in mind is when <m>R=k[x_1,\dots,x_d]</m> and <m>k</m> is a field; we let <m>G</m> act trivially on <m>k</m>, and the action respects the sum and product in the ring:
            <me>
              g \cdot \left( \sum_{a} c_{a} x_1^{a_1} \cdots x_d^{a_d} \right) = \sum_{a} c_{a} (g \cdot x_1)^{a_1} \cdots (g \cdot x_d)^{a_d}.
            </me>
            We are interested in the set of elements that are {\bf invariant}<idx><h>invariant</h></idx><idx><h><m>R^G</m></h></idx> under the action,
            <me>
              R^G : = \{ r \in R \ | \ g(r) = r \ \text{for all} \ g\in G\}.
            </me>
            Note that <m>R^G</m> is a subring of <m>R</m>. Indeed, given <m>r,s\in R^G</m>, then
            <me>
              r+s=g \cdot r + g \cdot s = g \cdot (r+s) \quad \text{and}\quad r s = (g \cdot r) (g \cdot s) = g \cdot (rs) \qquad \text{for all} \ g\in G,
            </me>
            since each <m>g</m> is a homomorphism. Note also that if <m>G=\langle g_1,\dots,g_t\rangle</m>, then <m>r\in R^G</m> if and only if <m>g_i(r)=r</m> for <m>i=1,\dots,t.</m> The question above can now be rephrased as follows:
          </p>
            
          <question xml:id="question-1">
  
            <p>
              Given a finite group <m>G</m> acting on <m>R=k[x_1,\dots,x_d]</m>, is <m>R^G</m> a finitely generated <m>k</m>-algebra?
            </p>
  
          </question>

          <p>
            Note that <m>R^G</m> is a <m>k</m>-subalgebra of <m>R</m>. Even though <m>R</m> is a finitely generated <m>k</m>-algebra, this does not guarantee a priori that <m>R^G</m> is a finitely generated <m>k</m>-algebra --- recall \Cref{inf gen subalg} <xref provisional="cite"/>, where we saw a subalgebra of a finitely generated algebra which is nevertheless not finitely generated.
          </p>
  
          <example xml:id="ex-root-of-unity-invariants">
            <title>Root of Unity Invariants</title>
  
            <p>
              Consider the group with two elements <m>G=\{e,g\}</m>. To define an action of <m>G</m> on <m>R=k[x]</m>, we need only to define <m>g \cdot x</m>, since <m>e</m> is the identity and <m>g</m> acts linearly. Consider the action of <m>G</m> on <m>R=k[x]</m> given by <m>g \cdot x = -x</m>, so <m>g \cdot f(x) = f(-x)</m>. Suppose that the characteristic of <m>k</m> is not 2, so <m>-1 \neq 1</m>. Write <m>f= a_n x^n + a_{n-1} x^{n-1} + \cdots + a_0</m>. We have <m>g \cdot x^i=(-x)^i = (-1)^i x^i</m>, so <me> g\cdot f = (-1)^n a_n x^n+ (-1)^{n-1} a_{n-1} x^{n-1} +  \cdots  + a_0,</me>which differs from <m>f</m> unless for each odd <m>i</m>, <m>a_i=0</m>. That is, [ R^G = { f R  |  }.] Any such <m>f</m> is a polynomial in <m>x^2</m>, so we have <me>R^G = k[x^2].</me>In particular, <m>R^G</m> is a finitely generated <m>k</m>-algebra.
            </p>
  
          </example>
  
          <example xml:id="ex-veronese-subring">
            <title>Veronese Subring</title>
            <p>
              Generalize the last example as follows: let <m>k</m> be a field with a primitive <m>d</m>th root of unity <m>\zeta</m>, and let <m>G= \langle g \rangle \cong C_d</m> act on <m>R = k[x_1,\dots,x_n]</m> via <m>g \cdot x_i = \zeta x_i</m> for all <m>i</m>. Then <me>R^G = \{ f \in R \ | \ \text{every term of $f$ has degree a multiple of $d$}\} = k[\{ \text{monomials of degree d}\}].</me> This what is known as the Veronese subring of <m>R</m> of degree <m>d</m>.
            </p>
  
          </example>
  
          <example xml:id="ex-standard-rep-of-sn">
            <title>Standard Representation of the Symmetric Group</title>
  
            <p>
              Let <m>S_n</m> <idx><h><m>S_n</m></h></idx>be the symmetric group on <m>n</m> letters acting on <m>R=k[x_1,\dots,x_n]</m> via <m>\sigma(x_i)=x_{\sigma(i)}</m>. For example, if <m>n=3</m>, then <m>f=x_1^2+x_2^2+x_3^2</m> is invariant, while <m>g=x_1^2+x_1x_2+x_2^2+x_3^2</m> is not, since swapping 1 with 3 gives a different polynomial.
            </p>
  
            <p>
              You may recall the Fundamental Theorem of Symmetric Polynomials says that every element of <m>R^{S_n}</m> can be written as polynomial expression in the elementary symmetric polynomials
              <md>
                <mrow>e_1 \amp = x_1+\dots +x_n</mrow>
                <mrow>e_2  \amp =\sum x_i x_j</mrow>
                <mrow>\vdots</mrow>
                <mrow>e_n \amp =x_1x_2\cdots x_n.</mrow>
              </md>
              More precisely, <m>R^{S_n} = k[e_1, \ldots, e_n]</m>. For example, <m>f</m> above is <m>e_1^2-2 e_2</m>. In fact, any symmetric polynomial can be written like so in a  way, so <m>R^{S_n}</m> is a free <m>k</m>-algebra. So even though we have infinitely many invariant polynomials, we can understand them in terms of only finitely many of them, which are <em>fundamental</em> invariants.
            </p>

          </example>
  
          <proposition xml:id="prop-group-ring-and-automorphisms-mod-fin">
            <title>Group Ring and Automorphisms Mod-Fin</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field, <m>R</m> be a finitely generated <m>k</m>-algebra, and <m>G</m> a finite group of automorphisms of <m>R</m> that fix <m>k</m>. Then <m>R^G \subseteq R</m> is module-finite.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                By , integral and algebra-finite implies module-finite, so we will show that <m>R</m> is algebra-finite and integral over <m>R^G</m>.
              </p>
  
              <p>
                First, since <m>k\subseteq R^G</m> and <m>R</m> is generated finitely generated <m>k</m>-algebra, it is generated by the same finite set as an <m>R^G</m>-algebra as well. Thus <m>R^G \subseteq R</m> is algebra-finite.
              </p>
  
              <p>
                To show that <m>R^G \subseteq R</m> is integral, let us first extend the action of <m>G</m> on <m>R</m> to <m>R[t]</m> trivially, meaning that we will let <m>G</m> fix <m>t</m>. Given <m>r\in R</m>, consider the polynomial <me>F_r(t) :=  \prod_{g\in G} (t-g \cdot r) \in R[t].</me> Now <m>G</m> fixes <m>F_r(t)</m>, since for each <m>h \in G</m>, <me>h \cdot F_r(t) = h \prod_{g\in G} (t-g \cdot r) = \prod_{g\in G} (h \cdot t-(hg) \cdot r) = F_r(t)</me> Thus, <m>F_r(t)\in (R[t])^{G}</m>. Notice that <m>(R[t])^G = R^G[t]</m>, since <me>g (a_nt^n + \cdots + a_0) = a_nt^n + \cdots + a_0 \implies (g \cdot a_n)t^n + \cdots + (g \cdot a_0) = a_nt^n + \cdots + a_0.</me> Therefore, <m>F_r(t) \in R^G[t]</m>. The leading term (with respect to <m>t</m>) of <m>F_r(t)</m> is <m>t^{|G|}</m>, so <m>F_r(t)</m> is monic. On the other hand, one of the factors of <m>F_r(t)</m> is <m>(t-r)</m>, so <m>F_r(r) = 0</m>. Therefore, <m>r</m> satisfies a monic polynomial with coefficients in <m>R^G</m>, and thus <m>R</m> is integral over <m>R^G</m>.
              </p>
  
            </proof>
          </proposition>
  
          <theorem xml:id="thm-noethers-finiteness-theorem">
            <title>Noether's Finiteness Theorem</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field, <m>R</m> be a polynomial ring over <m>k</m>, and <m>G</m> be a finite group acting <m>k</m>-linearly on <m>R</m>. Then <m>R^G</m> is a finitely generated <m>k</m>-algebra.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Observe that <m>k \subseteq R^G \subseteq R</m>, that <m>k</m> is noetherian, <m>k\subseteq R</m> is algebra-finite, and <m>R^G\subseteq R</m> is module-finite. The desired result is now a corollary of the <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Artin-Tate Lemma|Artin-Tate Lemma]].
              </p>
  
            </proof>
          </theorem>

        </section>
  
      </chapter>

      <chapter xml:id="ch-graded-rings"><title>Graded Rings</title>

        <!--*****************
        Chapter: Graded Rings
        ******************-->

        <introduction><p>The main purpose of this chapter is to set up some background and notation we will use throughout the rest of the course.</p></introduction>
  
        <section xml:id="sec-graded-rings"><title>Graded Rings</title>

          <!--*****************
          Section: Graded Rings
          ******************-->
          
          <blockquote>
            <p>
              <q></q>
            </p>
            <attribution></attribution>
          </blockquote>

          <p>
            When we think of a polynomial ring <m>R</m>, we often think of <m>R</m> with its graded structure, even if we have never formalized what that means. Other rings we have seen also have a graded structure, and this structure is actually very powerful.
          </p>
      
          <definition xml:id="defn-graded-ring"><title>Graded Ring</title>
  
          <statement>
            <p>
              Let <m>T</m> be a monoid; in many examples we will take <m>T = \N</m>, which is a monoid since we follow the convention that <m>0</m> is a natural number. A ring <m>R</m> is <m>T</m>-<em>graded</em> <idx><h><m>T</m>-graded</h></idx><idx><h><m>\N</m>-graded</h></idx><idx><h>graded ring</h></idx>if we can write a direct sum decomposition of <m>R</m> as an abelian group indexed by <m>T</m>,<me>R=\bigoplus_{a \geqslant 0} R_a,</me>such that 
              <me>
                R_a R_b \subseteq R_{a+b} \quad \textrm{for every } a,b \in T.
              </me>
              This means that for all <m>r \in R_a</m> and <m>s \in R_b</m>, we have <m>rs\in R_{a+b}</m>.
            </p>
          </statement>
  
          </definition>

          <definition xml:id="def-homogeneous-element"><title>Homogeneous Element</title>
            <statement>
              <p>
                An element in one of the summands of <m>R_a</m> is said to be <em>homogeneous</em> <idx><h>homogeneous element</h></idx> of <em>degree</em> <idx><h>degree of homogeneous element</h></idx> <m>a</m>; we write <m>|r|</m> <idx><h><m>\mid r\mid</m></h></idx> or <m>\deg(r)</m> <idx><h><m>\deg(r)</m></h></idx> to denote the degree of a homogeneous element <m>r</m>.
              </p>
            </statement>
          </definition>

          <definition xml:id="def-homogeneous-component"><title>Homogeneous Component</title>
            <statement>
              <p>
                By definition, an element in a graded ring is a unique sum of homogeneous elements, which we call its <em>homogeneous</em> <idx><h>homogeneous components</h></idx> <idx><h>graded components</h></idx> or <em>graded components</em>. One nice thing about graded rings is that many properties can usually be checked on homogeneous elements, and these are often easier to deal with.
              </p>
            </statement>
          </definition>
  
          <lemma xml:id="lem-graded-ring-properties"><title>Graded Ring Properties</title>
  
  
            <statement>
              
              <p>
                Let <m>R</m> be a <m>T</m>-graded ring.
              </p>
  
              <p><ol>
                <li>
                <m>1</m> is homogeneous of degree <m>0 \in T</m> (the identity of <m>T</m>).
                </li>
  
                <li>
                <m>R_0</m> is a subring of <m>R</m>.
                </li>
  
                <li>
                Each <m>R_a</m> is an <m>R_0</m>-module.
                </li>
  
              </ol></p>
  
            </statement>
  
            <proof>
  
              <p><ol>
                <li>
                            <p>
                Write <m>1=\sum_a r_a</m> with <m>r_a</m> homogeneous of degree <m>a</m>. Then <m>r_0 = r_0 (\sum_a r_a) = \sum_a r_0 r_a</m> implies <m>r_0 r_a = 0</m> for <m>a\neq 0</m>. Similarly, for any other <m>a</m> we have <m>r_a = r_a (\sum_b r_b)</m>, and thus <m>r_a = r_a r_0</m> (here is where we use the cancellative assumption). Thus <m>r_a =0</m> for <m>a\neq 0</m>, so <m>1\in R_0.</m>
              </p>
                </li>
  
                <li>
                            <p>
                We have shown that <m>1 \in R_0</m>. Moreover, <m>R_0</m> is a subgroup under addition, and <m>r,s\in R_0</m> implies <m>rs\in R_0</m>.
              </p>
                </li>
  
                <li>
                            <p>
                By assumption, <m>R_a</m> is a subgroup under addition. Given <m>r\in R_0</m> and <m>s\in R_a</m> we must have <m>rs\in R_a</m>.
              </p>
                </li>
  
              </ol></p>
  
            </proof>
          </lemma>

          <example xml:id="ex-graded-ring-examples"><title>Graded Ring Examples</title>

            <p>
              <ol>
                <li>
                  <p>
                    Any ring <m>R</m> is trivially an <m>\N</m>-graded ring, by setting <m>R_0 = R</m> and <m>R_n = 0</m> for <m>n \neq 0</m>.
                  </p>
                </li>

                <li>
                  <p>
                    If <m>k</m> is a field and <m>R=k[x_1,\dots,x_n]</m> is a polynomial ring, there is an <m>\N</m>-grading on <m>R</m> called the <em>standard grading</em> <idx><h>standard grading</h></idx> where <m>R_d</m> is the <m>k</m>-vector space with basis given by the monomials of total degree <m>d</m>, meaning those of the form <m>x_1^{\alpha_1}\cdots x_n^{\alpha_n}</m> with <m>\sum_i \alpha_i =d</m>. For example, <m>x_1^2+x_2x_3</m> is homogeneous in the standard grading, while <m>x_1^2+x_2</m> is not.
                  </p>
                </li>

                <li>
                  <p>
                    If <m>k</m> is a field, and <m>R=k[x_1,\dots,x_n]</m> is a polynomial ring, we can give different <m>\N</m>-gradings on <m>R</m> by fixing some tuple <m>(\beta_1,\dots,\beta_n)\in \N^n</m> and letting <m>x_i</m> be a homogeneous element of degree <m>\beta_i</m>; we call this a grading with <em>weights</em> <idx><h>weights</h></idx> <m>(\beta_1,\dots,\beta_n)</m>. For example, in <m>k[x_1,x_2]</m>, <m>x_1^2+x_2^3</m> is not homogeneous in the standard grading, but it is homogeneous of degree <m>6</m> under the <m>\mathbb{N}</m>-grading with weights <m>(3,2)</m>.
                  </p>
                </li>

                <li>
                  <p>
                    A polynomial ring <m>R = k[x_1, \ldots, x_n]</m> also admits a natural <m>\N^n</m>-grading: the grading with <m>R_{(d_1,\dots,d_n)}= k \cdot x_1^{d_1}\cdots x_n^{d_n}</m>. This is called the <em>fine grading</em> <idx><h>fine grading</h></idx>
                  </p>
                </li>

                <li>
                  <p>
                    Let <m>\Gamma \subseteq \mathbb{N}^n</m> be a subsemigroup of <m>\mathbb{N}^n</m>. Then 
                    <me>
                      \bigoplus_{\gamma \in \Gamma} k \cdot \underline x ^ {\gamma} \subseteq k[\underline x] = k[x_1, \ldots, x_n]
                    </me>
                    is an <m>\mathbb{N}^n</m>-graded subring of <m>k[x_1,\dots,x_n]</m> with the fine grading. Moreover, every <m>\N^n</m>-graded subring of <m>k[x_1,\dots,x_n]</m> is of this form.
                  </p>
                </li>
              </ol>
            </p>
          </example>

          <paragraphs><title>Macaulay2</title>

            <p>
              Polynomial rings in Macaulay2 are graded with the standard grading by default. To define a different grading, we give Macaulay2 a list with the grading of each of the variables:
            </p>

            <pre>
              i1 : R = ZZ/101[a,b,c,Degrees=>{{1,2},{2,1},{1,0}}];
            </pre>

            <p>
              We can check whether an element of <m>R</m> <c>isHomogeneous</c>, and the function <c>degree</c> applied to an element of <m>R</m> returns the least upper bound of the degrees of its monomials:
            </p>

            <pre>
              i2 : degree (a+b)
              o2 = {2, 2}
              o2 : List
              
              i3 : isHomogeneous(a+b)
              o3 = false
            </pre>

          </paragraphs>

          <remark>
            <p>
              You may have seen the term <em>homogeneous polynomial</em> used to refer to a polynomial <m>f(x_1, \ldots, x_n) \in k[x_1, \ldots, x_n]</m> that satisfies 
              <me>
                f(\lambda x_1, \ldots, \lambda x_n) = \lambda^d f(x_1, \ldots, x_n)
              </me>
              for all <m>\lambda \in k</m> and some fixed <m>d</m>. This is equivalent to saying that all the terms in <m>f</m> have the same total degree <m>d</m>, or that <m>f</m> is homogeneous with respect to the standard grading.
            </p>
  
            <p>
              Similarly, a polynomial is <em>quasi-homogeneous</em>, <idx><h>quasi-homogenous polynomial</h></idx>or <em>weighted homogeneous</em> or , if there exist integers <m>w_1, \ldots, w_n</m> such that the sum <m>d = a_1 w_1 + \cdots + a_n w_n</m> is the same for all monomials <m>x_1^{a_1} \cdots x_n^{a_n}</m> appearing in <m>f</m>. So <m>f</m> satisfies <me>f(\lambda^{w_1} x_1, \ldots, \lambda^{w_n} x_n) = \lambda^{d} f(x_1, \ldots, x_n),</me>for all <m>\lambda \in k</m> and <m>f(x_1^{w_1}, \ldots, x_n^{w_n})</m> is homogeneous (in the previous sense, so with respect to the standard grading).
            </p>
  
            <p>
              This condition is equivalent to asking that <m>f</m> be homogeneous with respect to some weighted grading on <m>k[x_1, \ldots, x_n]</m>.
            </p>
          </remark>
  
          <example xml:id="ex-quasi-homogeneous">
            <title>Quasi-Homogeneous</title>
  
            <p>
              In <m>k[x,y,z]</m>, the element <m>x^2+y^3+z^5</m> is not homogeneous in the standard grading, but it is homogeneous (of degree 30) if we set <m>\deg(x) = 15</m>, <m>\deg(y)=10</m>, and <m>\deg(z)=6</m>. This tells us that <m>x^2+y^3+z^5</m> is quasi-homogeneous; it is homogeneous with respect to the weights <m>(15,10,6)</m>. Indeed, <me>(\lambda^{15}x)^2+(\lambda^{10}y)^3+(\lambda^6z)^5 = \lambda^{30}(x^2+y^3+z^5).</me>
            </p>
  
          </example>
  
          <definition xml:id="defn-homogeneous-ideal">
            <title>Homogeneous Ideal</title>

          <statement>
            <p>
              An ideal <m>I</m> in a graded ring <m>R</m> is called <em>homogeneous</em> <idx><h>homogenous ideal</h></idx>if it can be generated by homogeneous elements.
            </p>
          </statement>
  
          </definition>
  
          <lemma xml:id="lem-equivalent-homogeneous-ideal-definitions">
            <title>Equivalent Homogeneous Ideal Definitions</title>
  

            <statement>
              
  
              <p>
                Let <m>I</m> be an ideal in a graded ring <m>R</m>. The following are equivalent: 
                <ol>
                  <li>
                    <p>
                      <m>I</m> is homogeneous. 
                    </p>
                  </li>
                  
                  <li>
                    <p>
                      For any element <m>f\in R</m> we have <m>f\in I</m> if and only if every homogeneous component of <m>f</m> lies in <m>I</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>I = \bigoplus_{a \in T} I_a</m>, where <m>I_a = I \cap R_a</m>.
                    </p>
                  </li>
                </ol>
              </p>
  
            </statement>
  
            <proof>
  
              <p><ol>
                <li>
                            <p>
                (1) <m>\Rightarrow</m> (2): Let <m>f_1, \ldots, f_n</m> be homogeneous generators for <m>I</m>. If <m>f\in I</m>, we can write <m>f</m> as<me>f = r_1 f_1 + \cdots + r_n f_n.</me>We can also write each <m>r_i</m> as a sum of its components, say <m>r_i = [r_i]_{d_{i,1}} + \cdots + [r_i]_{d_{i,m_i}}</m>. Then, after substituting and collecting, <me>f= \sum_{d} ( [r_1]_{d-|f_1|} f_1 + \cdots +   [r_n]_{d-|f_n|} f_n)</me> expresses <m>f</m> as a sum of homogeneous elements of different degrees, so <me>f_d =  [r_1]_{d-|f_1|} f_1 + \cdots +   [r_n]_{d-|f_n|} f_n \in I.</me>
              </p>
                </li>
  
                <li>
                            <p>
                (2) <m>\Rightarrow</m> (1): Any element of <m>I</m> is a sum of its homogeneous components. Thus, in this case, the set of homogeneous elements in <m>I</m> is a generating set for <m>I</m>.
              </p>
                </li>
  
                <li>
                            <p>
                (1) <m>\Rightarrow</m> (3): As above, <m>I</m> is generated by the collection of additive subgroups <m>\{I_a\}</m> in this case; the sum is direct as there is no nontrivial <m>\Z</m>-linear combination of elements of different degrees.
              </p>
                </li>
  
                <li>
                            <p>
                (3) <m>\Rightarrow</m> (2): We can take generators for each abelian group <m>I \cap R_a</m>, and the collection of all of them is a generating set for <m>I</m>.
              </p>
                </li>
  
              </ol></p>
  
            </proof>
          </lemma>
  
          <example>
            <title></title>
  
            <p>
              Given an <m>\N</m>-graded ring <m>R</m>, then <m>R_+=\bigoplus_{d&gt;0} R_d</m> is a homogeneous ideal.
            </p>
  
          </example>

          <p>
            We now observe the following:
          </p>
  
          <lemma xml:id="lem-quotients-of-graded-rings">
            <title>Quotients of Graded Rings</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be an <m>T</m>-graded ring, and <m>I</m> be a homogeneous ideal. Then <m>R/I</m> has a natural <m>T</m>-graded structure induced by the <m>T</m>-graded structure on <m>R</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The ideal <m>I</m> decomposes as the direct sum of its graded components, so we can write <me>R/I = \frac{\oplus R_a}{\oplus I_a} \cong \oplus \frac{R_a}{I_a}.</me>It's elementary to check that this direct sum decomposition satisfies the desired properties.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-homogeneous-ideals">
            <title>Homogeneous Ideals</title>
  
            <p>
              <ol>
                <li>
                The ideal <m>I = (w^2x+wyz+z^3,x^2+3xy+5xz+7yz+11z^2)</m> in <m>R=k[w,x,y,z]</m> is homogeneous with respect to the standard grading on <m>R</m>, and thus the ring <m>R/I</m> admits an <m>\N</m>-grading with <m>|w|=|x|=|y|=|z|=1</m>.
                </li>
    
                <li>
                The ring <m>R=k[x,y,z]/(x^2+y^3+z^5)</m> does not admit a grading with <m>|x|=|y|=|z|=1</m>, but by <xref ref="ex-quasi-homogeneous"/> it does admit a grading with <m>|x|=15,|y|=10,|z|=6</m>.
                </li>
              </ol>
            </p>
          </example>
  
          <definition xml:id="defn-graded-module">
            <title>Graded Module</title>

            <statement>
              <p>
                Let <m>R</m> be a <m>T</m>-graded ring and <m>M</m> an <m>R</m>-module. An <m>R</m>-module <m>M</m> is <m>T</m>-<em>graded</em> <idx><h><m>T</m>-graded module</h></idx><idx><h>graded module</h></idx> if there exists a direct sum decomposition of <m>M</m> as an abelian group indexed by <m>T</m>:<me>M=\bigoplus_{a\in T} M_a \textrm{ such that } R_a M_b \subseteq M_{a+b}</me>for all <m>a,b\in T</m>.
              </p>
            </statement>
    
          </definition>
        
          <p>
            The notions of homogeneous element of a module and degree of a homogeneous element of a module take the obvious meanings. A notable abuse of notation: we will often talk about <m>\Z</m>-graded modules over <m>\N</m>-graded rings, and likewise.
          </p>
    
          <definition xml:id="defn-graded-ring-homomorphism">
              <title>Graded Ring Homomorphism</title>
            <statement>
              <p>
                Let <m>R</m> and <m>S</m> be <m>T</m>-graded rings with the same grading monoid <m>T</m>. A ring homomorphism <m>\varphi:R\to S</m> is <em>graded</em> or <em>degree-preserving</em> <idx><h>graded ring homomorphism</h></idx> <idx><h>degree preserving homomorphism</h></idx> if <m>\varphi(R_a) \subseteq S_{a}</m> for all <m>a \in T</m>.
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Note that our definition of ring homomorphism requires <m>1_R \mapsto 1_S</m>, and thus it does not make sense to talk about graded ring homomorphisms of degree <m>d \neq 0</m>. But we can have graded module homomorphisms of any degree.
            </p>
          </remark>
  
          <definition xml:id="defn-graded-module-homomorphism">
            <title>Graded Module Homomorphism</title>
          <statement>
            <p>
              Let <m>M</m> and <m>N</m> be <m>T</m>-graded modules over the <m>T</m>-graded ring <m>R</m>. A homomorphism of <m>R</m>-modules] <m>\varphi\!: M \to N</m> is <em>graded</em> <idx><h>graded homomorphism</h></idx> of <em>degree</em> <idx><h>degree of a graded module homomorphism</h></idx> <m>d</m> if <m>\varphi(M_a) \subseteq N_{a+d}</m> for all <m>a \in T</m>. A graded homomorphism of degree <m>0</m> is also called <em>degree-preserving</em> <idx><h>degree-preserving homomorphism</h></idx>.
            </p>
          </statement>
          </definition>
  
          <example xml:id="shift">
            <title>Shift</title>
  
            <p>
              <ol>
                <li>
                  Consider the ring map <m>k[x,y,z]\to k[s,t]</m> given by <m>x\mapsto s^2, y\mapsto st, z\mapsto t^2</m>. If <m>k[s,t]</m> has the fine grading, meaning <m>|s|=(1,0)</m> and <m>|t|=(0,1)</m>, then the given map is degree preserving if and only if <m>k[x,y,z]</m> is graded by <me>|x|=(2,0), |y|=(1,1), |z|=(0,2).</me>
                </li>
  
                <li>
                  Let <m>k</m> be a field, and let <m>R=k[x_1,\dots,x_n]</m> be a polynomial ring with the standard grading. Given <m>c\in k=R_0</m>, the homomorphism of <m>R</m>-modules <m>R\to R</m> given by <m>f\mapsto cf</m> is degree preserving. However, if instead we take <m>g\in R_d</m> for some <m>d&gt;0</m>, then the map 
                  <me>
                    \begin{CD}
                      R@&gt;&gt;&gt; R\\\\
                      f@&gt;&gt;&gt; gf
                      \end{CD}</me> is not degree preserving, although it is a graded map of degree <m>d</m>. We can make this a degree-preserving map if we shift the grading on <m>R</m> by defining <m>R(-d)</m> to be the <m>R</m>-module <m>R</m> but with the <m>\Z</m>-grading given by <m>R(-d)_t=R_{t-d}</m>. With this grading, the component of degree <m>d</m> of <m>R(-d)</m> is <m>R(-d)_d=R_0=k</m>. Now the map <me>\begin{CD}
                      R(-d)@&gt;&gt;&gt; R\\\\
                      f@&gt;&gt;&gt; gf
                    \end{CD}
                  </me> 
                  is degree preserving.
                </li>
              </ol>
           </p>
          </example>

        </section>

        <section xml:id="sec-finite-conditions-graded-algebras"><title>Finiteness Conditions for Graded Algebras</title>

          <!--*******************************************
          Section: Finiteness Conditions: Graded Algebras
          ********************************************-->
          
          <blockquote>
            <p>
              <q>Do not wait until the conditions are perfect to begin. Beginning makes the conditions perfect.</q>
            </p>
            <attribution>Alan Cohen</attribution>
          </blockquote>

          <remark>
            <p>
              We observed earlier an important relationship between algebra-finiteness and noetherianity that followed from the Hilbert basis theorem: if <m>R</m> is noetherian, then any algebra-finite extension of <m>R</m> is also noetherian. There isn't a converse to this in general: there are lots of algebras over fields <m>k</m> that are noetherian but not algebra-finite over <m>k</m>. However, for graded rings, this converse relation holds.
            </p>
    
          </remark>

          <proposition xml:id="prop-graded-f.g.-algebra">
            <title>Graded F.G. Algebra</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be an <m>\N</m>-graded ring, and let <m>f_1,\dots,f_n \in R</m> be homogeneous elements of positive degree. Then <m>f_1,\dots,f_n</m> generate the ideal <m>R_+ := \bigoplus_{d&gt;0} R_d</m> if and only if <m>f_1,\dots,f_n</m> generate <m>R</m> as an <m>R_0</m>-algebra.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Suppose <m>R=R_0[f_1,\dots,f_n]</m>. Any element <m>r\in R_+</m> can be written as a polynomial expression <m>r=P(f_1,\dots,f_n)</m> for some <m>P\in R_0[x_1,\dots,x_n]</m> with no constant term. Each monomial of <m>P</m> is a multiple of some <m>x_i</m>, and thus each term in <m>r=P(f_1,\dots,f_n)</m> is a multiple of <m>f_i</m>. Thus <m>r \in R f_1 + \cdots + R f_n = (f_1,\dots,f_n)</m>.
              </p>
  
              <p>
                To show that <m>R_+= (f_1,\dots,f_n)</m> implies <m>R=R_0[f_1,\dots,f_n]</m>, it suffices to show that any homogeneous element <m>r\in R</m> can be written as a polynomial expression in <m>f_1, \ldots, f_n</m> with coefficients in <m>R_0</m>. We will use induction on the degree of <m>r</m>, with degree <m>0</m> as a trivial base case. For <m>r</m> homogeneous of positive degree, we must have <m>r\in R_+</m>, so by assumption we can write <m>r= a_1 f_1 + \dots + a_n f_n</m>. Moreover, since <m>r</m> and <m>f_1, \ldots, f_n</m> are all homogeneous, we can choose each coefficient <m>a_i</m> to be homogeneous of degree <m>|r|-|f_i|</m>. By the induction hypothesis, each <m>a_i</m> is a polynomial expression in <m>f_1, \ldots, f_n</m>, so we are done.
              </p>
  
            </proof>
          </proposition>
  
          <corollary xml:id="cor-characterization-of-noetherian-graded-rings">
            <title>Characterization of Noetherian Graded Rings</title>
  
  
            <statement>
              
  
              <p>
                An <m>\N</m>-graded ring <m>R</m> is noetherian if and only if <m>R_0</m> is noetherian and <m>R</m> is algebra-finite over <m>R_0</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                If <m>R_0</m> is noetherian and <m>R</m> is algebra-finite over <m>R_0</m>, then <m>R</m> is noetherian by the <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Hilbert's Basis Theorem|Hilbert Basis Theorem]]. On the other hand, if <m>R</m> is noetherian then any quotient of <m>R</m> is also noetherian, and in particular <m>R_0 \cong R/R_+</m> is noetherian. Moreover, <m>R_+</m> is generated as an ideal by finitely many homogeneous elements by noetherianity; by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - Graded F.G. Algebra|Proposition]], we get a finite algebra generating set for <m>R</m> over <m>R_0</m>.
              </p>
  
            </proof>
          </corollary>

          <remark>
            <p>
              There are many interesting examples of <m>\N</m>-graded algebras with <m>R_0 = k</m>; in that case, <m>R_+</m> is the largest homogeneous ideal in <m>R</m>. In fact, <m>R_0</m> is the only maximal ideal of <m>R</m> that is also homogeneous, so we can call it <em>the</em> <term>homogeneous maximal ideal</term>; it is sometimes also called the <term>irrelevant maximal ideal</term> of <m>R</m>. This ideal plays a very important role: in many ways, <m>R</m> and <m>R_+</m> behave similarly to a local ring <m>R</m> and its unique maximal ideal. We will discuss this further when we learn about local rings.
            </p>
          </remark>
      
        </section>

        <section xml:id="sec-inv-rings-2"><title>Invariant Rings: Application II</title>

          <!--***********************
          Section: Invariant Rings II
          ************************-->
          
          <blockquote>
            <p>
              <q>There is changeability in process bu invariance in outcome.</q>
            </p>
            <attribution>Paul Watzlawick</attribution>
          </blockquote>

          <remark>
            <p>
              If <m>R</m> is a graded ring, and <m>G</m> is a group acting on <m>R</m> by degree-preserving automorphisms, then <m>R^G</m> is a graded subring of <m>R</m>, meaning <m>R^G</m> is graded with respect to the same grading monoid. In particular, if <m>G</m> acts <m>k</m>-linearly on a polynomial ring over <m>k</m>, the invariant ring is <m>\N</m>-graded.
            </p>
    
            <p>
              Using this perspective, we can now give a different proof of the finite generation of invariant rings that works under different hypotheses. The proof we will discuss now is essentially Hilbert's proof. To do that, we need another notion that is very useful in commutative algebra.
            </p>
          </remark>
  
          <definition xml:id="defn-direct-summand">
            <title>Direct Summand</title>
          <statement>
            <p>
              Let <m>\varphi\!:R \to S</m> be a ring homomorphism. We say that <m>R</m> is a <em>direct summand</em> <idx><h>direct summand</h></idx> of <m>S</m> if the map <m>\varphi</m> <em>splits</em> as a map of <m>R</m>-modules], meaning there is an <m>R</m>-module homomorphism <me>\begin{CD}
              R@&gt;\varphi&gt;&gt; S\\\\
              R@&lt;&lt;\rho&lt; S
              \end{CD}</me> such that <m>\rho \varphi</m> is the identity on <m>R</m>.
            </p>
          </statement>
          </definition>

          <remark>
            <p>
              First, observe that the condition on <m>\rho</m> implies that <m>\varphi</m> must be injective, so we can assume that <m>R \subseteq S</m>, perhaps after renaming some elements. The condition on <m>\rho</m> is that <m>\rho|_R</m> is the identity and <m>\rho(rs)= r\rho(s)</m> for all <m>r \in R</m> and <m>s\in S</m>. We call the map <m>\rho</m> the <em>splitting</em> <idx><h>splitting</h></idx> of the inclusion <m>R \subseteq S</m>. Note that given any <m>R</m>-linear map <m>\rho\!: S \to R</m>, if <m>\rho(1)=1</m> then <m>\rho</m> is a splitting: indeed, <m>\rho(r)=\rho(r \cdot 1) = r \rho(1)=r</m> for all <m>r \in R</m>.
            </p>
          </remark>
  
          <remark>
            <p>
              The subring <m>R</m> of <m>S</m> is a direct summand of <m>S</m> if and only if there exists an <m>R</m>-submodule of <m>S</m> such that <m>S = R \oplus M</m>. In the language above, <m>M = \ker \rho</m>. Conversely, given a direct sum decomposition <m>S = R \oplus M</m>, the quotient map onto the first component is a splitting.
            </p>
          </remark>
        
          <definition xml:id="defn-expansion-contraction">
            <title>Expansion and Contraction</title>
            <statement>
              <p>
                Let <m>\varphi\! : R \to S</m> be a ring homomorphism. Given an ideal <m>I</m> in <m>S</m>, we write <m>I \cap R</m> for the <em>contraction</em> <idx><h><m>I\cap R</m></h></idx> <idx><h>contracion</h></idx> of <m>R</m> back into <m>R</m>, meaning the preimage of <m>I</m> via <m>\varphi</m>. In particular, if <m>R \subseteq S</m> is a ring extension, then <m>I \cap R</m> denotes the preimage of <m>I</m> via the inclusion map <m>R \subseteq S</m>. Given a ring map <m>R \to S</m>, and an ideal <m>I</m> in <m>R</m>, the <em>expansion</em> <idx><h>expansion of an ideal</h></idx> <idx><h><m>IS</m></h></idx> of <m>I</m> in <m>S</m> is the ideal of <m>S</m> generated by the image of <m>I</m> via the given ring map; we naturally denote this by <m>IS</m>.
              </p>
            </statement>
          </definition>
  
          <lemma xml:id="lem-direct-summand-of-ideals-contract">
            <title>Direct Summand of Ideals Contract</title>
  
            <statement>
              <p>
                Let <m>R</m> be a direct summand of <m>S</m>. Then, for any ideal <m>I \subseteq R</m>, we have <m>IS \cap R=I</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                Let <m>\pi</m> be the corresponding splitting. Clearly, <m>I \subseteq IS \cap R</m>. Conversely, if <m>r \in IS \cap R</m>, we can write <m>r = s_1 f_1 + \cdots + s_t f_t</m> for some <m>f_i \in I</m>, <m>s_i \in S</m>. Applying <m>\pi</m>, we have <me>r = \pi(r) = \pi \left( \sum_{i=1}^t s_i f_i \right) = \sum_{i=1}^t \pi\left( s_i f_i \right) = \sum_{i=1}^t \pi \left( s_i \right) f_i \in I.</me>
              </p>
            </proof>
          </lemma>
  
          <proposition xml:id="prop-direct-summand-noetherian">
            <title>Direct Summand Noetherian</title>
  
            <statement> 
              <p>
                Let <m>R</m> be a direct summand of <m>S</m>. If <m>S</m> is noetherian, then so is <m>R</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                Let 
                <me>
                  I_1\subseteq I_2 \subseteq I_3 \subseteq \cdots
                </me>
                be a chain of ideals in <m>R</m>. The chain of ideals in <m>S</m> 
                <me>
                  I_1 S \subseteq I_2 S \subseteq I_3 S \subseteq \cdots
                </me> 
                stabilizes, so there exist <m>J</m>, <m>N</m> such that <m>I_n R = J</m> for <m>n \geqslant N</m>. Contracting to <m>R</m>, we get that <m>I_n = I_n S \cap R = J \cap R</m> for <m>n\geqslant N</m>, so the original chain also stabilizes.
              </p>
            </proof>
          </proposition>

          <p>
            Notice in general a subring of a noetherian ring does not have to be noetherian.
          </p>
  
          <example xml:id="ex-non-noeth-subring">
            <title>Non-Noetherian Subgring of Noetherian Ring</title>
  
            <p>
             If <m>k</m> is a field, <m>S = k[x,y]</m> is noetherian by <xref text="title" ref="hilbert-basis-theorem"/> , but we claim that the subring 
             <me>
              R = k[xy,xy^2,xy^3,\ldots]
            </me> 
            of <m>S = k[x,y]</m> is not noetherian. Indeed,
            <me>
              (xy) \subseteq (xy,xy^2) \subseteq (xy,xy^2,xy^3) \subseteq \cdots
            </me>
            is an ascending chain of ideals of <m>R</m> that does not stabilize. Notice that if we considered the same chain of ideals in <m>S</m>, then it does stabilize, and in fact it is the constant chain <m>(xy)</m>.
            </p>
  
          </example>
  
          <proposition xml:id="prop-k-linear-action-and-direct-summand">
            <title><m>K</m>-Linear Action and Direct Summand</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field, and <m>R</m> be a polynomial ring over <m>k</m>. Let <m>G</m> be a finite group acting <m>k</m>-linearly on <m>R</m>. Assume that the characteristic of <m>k</m> does not divide <m>|G|</m>. Then <m>R^G</m> is a direct summand of <m>R</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                We consider the map <m>\rho\!: R \to R^G</m> given by <me>\rho(r)=\frac{1}{|G|} \sum_{g\in G} g\cdot r.</me>First, note that the image of this map lies in <m>R^G</m>, since acting by <m>g</m> just permutes the elements in the sum, so the sum itself remains the same. We claim that this map <m>\rho</m> is a splitting for the inclusion <m>R^G \subseteq R</m>. To see that, let <m>s\in R^G</m> and <m>r\in R</m>. We have <me>\rho(sr)=\frac{1}{|G|} \sum_{g\in G} g\cdot (sr) =\frac{1}{|G|} \sum_{g\in G} (g\cdot s)(g\cdot r) =\frac{1}{|G|} \sum_{g\in G} s(g\cdot r) = s \frac{1}{|G|} \sum_{g\in G} (g\cdot r) = s \rho(r),</me>so <m>\rho</m> is <m>R^G</m>-linear, and for <m>s\in R^G</m>, <me>\rho(s)=\frac{1}{|G|} \sum_{g\in G} g\cdot s=s.</me>
              </p>
  
            </proof>
          </proposition>

          <remark>
            <p>
              The condition that the characteristic of <m>k</m> does not divide the order of <m>G</m> is trivially satisfied if <m>k</m> has characteristic zero.
            </p>
          </remark>
  
          <theorem xml:id="thm-hilberts-finiteness-theorem-for-invariants">
            <title>Hilbert's Finiteness Theorem for Invariants</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field, and <m>R</m> be a polynomial ring over <m>k</m>. Let <m>G</m> be a group acting <m>k</m>-linearly on <m>R</m>. Assume that <m>G</m> is finite and that the characteristic of <m>k</m> does not divide <m>|G|</m>, or more generally, that <m>R^G</m> is a direct summand of <m>R</m>. Then <m>R^G</m> is a finitely generated <m>k</m>-algebra.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Since <m>G</m> acts linearly on <m>R</m>, <m>R^G</m> is an <m>\N</m>-graded subring of <m>R</m> with <m>R_0=k</m>. Since <m>R^G</m> is a direct summand of <m>R</m>, <m>R^G</m> is noetherian by . By our characterization of noetherian graded rings in , <m>R^G</m> is finitely generated over <m>R_0=k</m>.
              </p>
  
            </proof>
          </theorem>

          <remark>
            <p>
              One important thing about this proof is that it applies to many infinite groups. In particular, for any <em>linearly reductive group</em>, <idx><h>linearly reductive group</h></idx> including <m>\mathrm{GL}_n(\C)</m>, <m>\mathrm{SL}_n(\C)</m>, and <m>(\C^{\times})^n</m>, we can construct a splitting map <m>\rho</m>.
            </p>
          </remark>
      
        </section>
  
      </chapter>

      <chapter xml:id="ch-prime-ideals"><title>Prime Ideals</title>

        <!--*****************
        Chapter: Prime Ideals
        ******************-->
  
        <section xml:id="sec-prime-maximal-ideals"><title>Prime and Maximal Ideals</title>

          <!--***************************
          Section: Prime & Maximal Ideals
          ****************************-->
          
          <blockquote>
            <p>
              <q>Fate rarely calls upon us at a moment of our choosing.</q>
            </p>
            <attribution>Optimus Prime</attribution>
          </blockquote>

          <definition xml:id="defn-prime-ideal"><title>Prime Ideal</title>
          <idx><h>prime ideal</h></idx>
          <statement>
            <p>
              A <em>prime ideal</em> of a commutative ring <m>R</m> is a proper ideal <m>P</m> such that whenever <m>xy \in P</m> for <m>x, y \in R</m>, we have <m>x \in P</m> or <m>y \in P</m>.
            </p>
          </statement>
          </definition>
    
          <example xml:id="ex-prime-ideals-in-z"><title>Prime Ideals in <m>\Z</m></title>
  
  
            <statement>
              <p>
                The prime ideals in <m>\mathbb{Z}</m> are those of the form <m>(p)</m> for <m>p</m> a prime integer, and <m>(0)</m>.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-prime-ideals-in-kx"><title>Prime Ideals in <m>k[x]</m></title>
            <statement>
              <p>
                When <m>k</m> is a field, prime ideals in <m>k[x]</m> are easy to describe: <m>k[x]</m> is a principal ideal domain, and <m>(f)\neq 0</m> is prime if and only if <m>f</m> is an irreducible polynomial. Moreover, <m>(0)</m> is also a prime ideal, since <m>k[x]</m> is a domain.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-x3-y2-in-kxy-is-prime"><title><m>(x^3-y^2)</m> in <m>k[x,y]</m> is Prime</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field. The ideal <m>P = (x^3-y^2)</m> in <m>R=k[x,y]</m> is prime: one can show that <m>R/P \cong k[t^2,t^3] \subseteq k[t]</m>, which is a domain.
              </p>
  
            </statement>
          </example>

          <example><title>Primes, Presentations, and Macaulay2</title>
            <p>
              The <m>k</m>-algebra <m>R = k[t^3,t^4,t^5] \subseteq k[t]</m> is a domain, so its defining ideal <m>P</m> in <m>k[x,y,z,]</m> is prime. This is the kernel of the presentation of <m>R</m> sending <m>x,y,z</m> to each of our 3 algebra generators, which we can compute with Macaulay2:
            </p>

              <pre>
              i1 : k = QQ

              o1 = QQ

              o1 : Ring

              i2 : f = map(k[t],k[x,y,z],{t^3,t^4,t^5})
                                          3   4   5
              o2 = map (QQ[t], QQ[x..z], {t , t , t })

              o2 : RingMap QQ[t] &lt;--- QQ[x..z]

              i3 : P = ker f
                          2         2     2   3
              o3 = ideal (y  - x*z, x y - z , x  - y*z)

              o3 : Ideal of QQ[x..z]	
            </pre>
          </example>
  
          <definition xml:id="defn-maximal-ideal"><title>Maximal Ideal</title>
          <idx><h>maximal ideal</h></idx>
          <statement>
            <p>
              A <em>maximal ideal</em> of an arbitrary ring <m>R</m> is a proper ideal <m>M</m> such that the only ideals of <m>R</m> containing <m>M</m> are <m>M</m> and <m>R</m>.
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-residue-field">
            <title>Residue Field</title>
          <statement>
            <p>
              Given a maximal ideal <m>\fm</m> in <m>R</m>, the <em>residue field</em> <idx><h>residue field</h></idx> of <m>\fm</m> is the field <m>R/\fm</m>. A field <m>k</m> is a residue field of <m>R</m> if <m>k \cong R/\fm</m> for some maximal ideal <m>\fm</m>.
            </p>
          </statement>
          </definition>

          <remark>
            <p>
              A ring may have many different residue fields. For example, the residue fields of <m>\mathbb{Z}</m> are all the finite fields with a prime numbers of elements, <m>\mathbb{F}_p \cong \mathbb{Z}/p</m>.
            </p>
          </remark>
    
          <theorem xml:id="thm-prime-maximal-domain-field">
            <title>Prime, Maximal, Domain, Field</title>

            <statement>
  
            <p>
              Let <m>R</m> be a commutative ring with <m>1\neq 0</m>, and let <m>I</m> be an ideal of <m>R</m>. 1. The ideal <m>I</m> is maximal if and only if <m>R/I</m> is a field. 2. The ideal <m>I</m> is prime if and only if <m>R/I</m> is an integral domain. 3. Every maximal ideal of <m>R</m> is prime.
            </p>
  
          </statement>
            <proof>

  
              <p>
                The first assertion follows immediately from the Lattice Isomorphism Theorem and the fact that <m>R/I</m> is a field if and only if its only ideals are <m>0</m> and <m>R/I</m>.
              </p>
  
              <p>
                Suppose <m>I</m> is prime. If <m>(r + I)(r' + I) = 0 + I</m>, then <m>rr' \in I</m> and hence either <m>r \in I</m> or <m>r' \in I</m>, so that either <m>r + I = 0</m> or <m>r'+ I = 0</m>. This proves <m>R/I</m> is a domain. Suppose <m>R/I</m> is a domain and that <m>xy \in I</m>. Then <m>(x + I)(y + I) = 0</m> in <m>R/I</m> and hence either <m>x+ I = 0</m> or <m>y + I = 0</m>. It follows <m>x \in I</m> or <m>y \in I</m>, so that <m>I</m> is prime.
              </p>
  
              <p>
                If <m>I</m> is maximal, then <m>R/I</m> is a field, which in particular implies that <m>R/I</m> is a domain, so <m>I</m> is prime.
              </p>
  
            </proof>
          </theorem>
  
          <theorem xml:id="thm-every-ideal-contained-in-a-maximal-ideal">
            <title>Every Ideal Contained in a Maximal Ideal</title>
  
  
            <statement>
              <p></p>
  
            </statement>
  
            <proof>

  
              <p>
                Fix a ring <m>R</m> and a proper ideal <m>I</m>. Let <m>S</m> be the set of all proper ideals <m>J</m> in <m>R</m> such that <m>J \supseteq I</m>, which is partially ordered with the inclusion order <m>\subseteq</m>. We claim that <xref provisional="cite"/> [[Mathematics/Foundations/Results/Theorem - Zorn's Lemma|Zorn's Lemma]] applies to <m>S</m>. First, <m>S</m> is nonempty, since it contains <m>I</m>. Now consider a chain of proper ideals in <m>R</m>, say <m>\{ J_i \}_i</m>, all of which contain <m>I</m>. Notice that <m>J := \bigcup_i J_i</m> is an ideal as well (exercise!), and moreover <m>J \neq R</m> since <m>1 \notin J_i</m> for all <m>i</m>. Since each <m>J_i \supseteq I</m>, we conclude that <m>J \supseteq I</m>. Thus we have checked that <m>J \in S</m>. Now this ideal <m>J \in S</m> is an upper bound for our chain <m>\{ J_i \}_i</m>, and thus  applies to <m>S</m>. We conclude that <m>S</m> has a maximal element.
              </p>
  
              <p>
                There is a subtle point missing: we have shown that there is a maximal element <m>M</m> in <m>S</m> containing <m>I</m>, but we have yet to show that this maximal element is a maximal ideal of <m>R</m>. Finally, suppose that <m>L</m> is an ideal in <m>R</m> with <m>L \supseteq M</m>. Since <m>M</m> contains <m>J</m>, so does <m>L</m>. If <m>L \in S</m>, by the maximality of <m>M</m> we must have <m>L = M</m>. Since <m>L</m> already satisfies <m>L \supseteq J</m>, if <m>L \notin S</m> then we must have <m>L = R</m>.
              </p>
  
            </proof>
          </theorem>
  
          <theorem xml:id="thm-zorns-lemma"><title>Zorn's Lemma</title>
            <idx><h>Zorn's Lemma</h></idx>
  
            <p>
              Let <m>P</m> be a non-empty family of sets. Suppose that for each chain <m>C</m> in <m>P</m>, the set <m>\bigcup_{C_{i}\in C}C_{i}</m> is in <m>P</m>. Then <m>P</m> has a maximal element.
            </p>
  
          </theorem>

        </section>

        <section xml:id="sec-spectrum">
          <title>The Spectrum of a Ring</title>

          <!--*******************
          Section: Prime Spectrum
          ********************-->
          
          <blockquote>
            <p>
              <q>What is life but a spectrum and what is music but life itself.</q>
            </p>
            <attribution>Billy Cobham</attribution>
          </blockquote>


          <definition xml:id="defn-prime-spectrum"><title>Prime Spectrum</title>
          <statement>
            <p>
              Let <m>R</m> be a ring. The <em>prime spectrum</em> <idx><h>prime spectrum</h></idx> of <m>R</m>, denoted <m>\Spec(R)</m>, <idx><h><m>\Spec(R)</m></h></idx>is the set of prime ideals of <m>R</m>. The set of maximal ideals of <m>R</m> is denoted <m>\mSpec(R)</m> <idx><h><m>\mSpec(R)</m></h></idx>.
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-vi"><title><m>V(I)</m></title>
          <statement>
            <p>
              For a ring <m>R</m> and an ideal <m>I</m>, we set <idx><h><m>V(I)</m></h></idx> <me>V(I) :=  \{ P \in \Spec(R) \ \mid \ I \sse P\}.</me>
            </p>
          </statement>
          </definition>
  
          <proposition xml:id="prop-properties-of-v"><title>Properties of V</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, and <m>I_{\lambda},J</m> be ideals, not necessarily proper. (a) <m>V(R) = \varnothing</m> and <m>V(0) = \Spec(R)</m>. (b) If <m>I \subseteq J</m>, then <m>V(J)\subseteq V(I)</m>. (c) <m>V(I) \cup V(J) = V(I \cap J)=V(IJ)</m>. (d) <m>\bigcap_{\lambda} V(I_{\lambda}) =V(\sum_{\lambda} I_{\lambda})</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Both <m>(a)</m> and <m>(b)</m> are straightforward, so we just prove <m>(c)</m>.
              </p>
  
              <p>
                To see <m>V(I)\cup V(J) \subseteq V(I \cap J)</m>, just observe that if <m>I \sse P</m> or <m>J \sse P</m>, then <m>I \cap J \sse P</m>.
              </p>
  
              <p>
                Since <m>IJ \subseteq I \cap J</m>, we have <m>V(I \cap J) \subseteq V(IJ)</m>. To show <m>V(IJ) \subseteq V(I) \cup V(J)</m>, if <m>P</m> is a prime and <m>P \notin V(I) \cup V(J)</m>, then <m>P \not\supseteq I, P \not\supseteq J</m>. Thus we can find <m>f \in I</m>, and <m>g \in J</m> such that <m>f, g \notin P</m>. Since <m>P</m> is prime, <m>fg \notin P</m>, while also <m>fg \in IJ</m>. Therefore, <m>P \nsubseteq IJ</m>.
              </p>
  
              <p>
                To show <m>(d)</m>, since ideals are closed for sums, if <m>P \supseteq I_\lambda</m> for all <m>\lambda</m>, then <m>P \supseteq \sum_{\lambda} I_{\lambda}</m>. Moreover, if <m>P \supseteq \sum_{\lambda} I_{\lambda}</m>, then in particular <m>P \supseteq I_\lambda</m>.
              </p>
  
            </proof>
          </proposition>
  
          <example xml:id="ex-poset-structure-of-spec"><title>Poset Structure of Spec</title>
  
  
            <statement>
              
  
              <p>
                Note that <m>\Spec(R)</m> is also a poset under inclusion. Show that the poset structure of <m>\Spec(R)</m> can be recovered from the topology as follows: <me>P \subseteq Q \quad \Leftrightarrow \quad Q \in \overline{\{ P \}}.</me>
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-spectrum-of-z"><title>Spectrum of Z</title>
  
  
            <statement>
              
  
              <p>
                The spectrum of <m>\mathbb{Z}</m> is, as a poset:
              </p>
  
            </statement>
  
            <solution>
  
              <p>
                #empty
              </p>
  
              <p>
                The closed sets are of the form <m>V((n))</m>, which are the whole space when <m>n=0</m>, the empty set when <m>n=1</m>, and any finite union of things in the top row. Any closed set that contains <m>(0)</m> must be all of <m>\Spec(\Z)</m>.
              </p>
  
            </solution>
          </example>
  
          <definition xml:id="defn-radical-ideal"><title>Radical Ideal</title>
          <statement>
            <p>
              The <em>radical</em> <idx><h>radical of an ideal</h></idx> of an ideal <m>I</m> <idx><h><m>\sqrt I</m></h></idx> in a ring <m>R</m> is the ideal <me>\sqrt{I} :=  \{f\in R \ | \ f^n\in I \textrm{ for some } n\}.</me> An ideal is a <em>radical ideal</em> <idx><h>radical ideal</h></idx> if <m>I=\sqrt{I}</m>.
            </p>
          </statement>
          </definition>
  
          <proposition xml:id="prop-radical-ideal-is-an-ideal"><title>Radical Ideal is an Ideal</title>
  
  
            <statement>
              
  
              <p>
                To see that <m>\sqrt{I}</m> is an ideal, note that if <m>f^m, g^n \in I</m>, then <me>\begin{aligned} (f+g)^{m+n-1} &amp;= \sum_{i=0}^{m+n-1} \binom{m+n-1}{i} f^i g^{m+n-1-i} \\
                &amp;= f^m \left(f^{n-1} + \binom{m+n-1}{1} f^{n-2}g + \cdots + \binom{m+n-1}{n-1} g^{n-1}\right) \\
                &amp;+ g^n \left(\binom{m+n-1}{n} f^{m-1} + \binom{m+n-1}{n+1} f^{m-2} g + \cdots + g^{m-1} \right) \in I,
                \end{aligned}</me> and <m>(rf)^m=r^m f^m \in I</m>.
              </p>
  
            </statement>
          </proposition>
  
          <definition xml:id="defn-reduced-ring"><title>Reduced Ring</title>
          <statement>
            <p>
              A ring <m>R</m> is <em>reduced</em> if it has no nonzero nilpotents.
            </p>
          </statement>
          </definition>
  
          <example xml:id="ex-ideal-radical-iff-ri-reduced"><title>Ideal Radical iff R/I Reduced</title>
  
  
            <statement>
              
  
              <p>
                An ideal <m>I</m> in <m>R</m> is radical if and only if <m>R/I</m> is reduced.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-v-and-radical-ideals"><title><m>V</m> and Radical Ideals</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring. For any ideal <m>I</m>, <m>V(I)=V(\sqrt{I})</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The containment <m>I \subseteq \sqrt{I}</m> is immediate from the definition of radical, and thus we have <m>V(I) \subseteq V(\sqrt{I})</m>. Now let <m>P \supseteq I</m> be a prime ideal, and let <m>f \in \sqrt{I}</m>. By definition, there exists some <m>n</m> such that <m>f^n \in I \subseteq P</m>, but since <m>P</m> is prime, we conclude that <m>f \in P</m>. Therefore, <m>V(\sqrt{I}) \subseteq V(I)</m>, and we are done.
              </p>
  
            </proof>
          </lemma>
  
          <lemma xml:id="lem-preimage-of-prime-is-prime"><title>Preimage of Prime is Prime</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R \xrightarrow{\varphi} S</m> be a ring homomorphism and <m>P \subset S</m> be prime. Then <m>P \cap R</m> is also prime.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Let <m>P</m> be a prime ideal in <m>S</m>. Given elements <m>f, g \in R</m> such that <m>fg \in P \cap R</m>, then <m>\varphi(f)\varphi(g)=\varphi(fg) \in P</m>, and since <m>P</m> is prime, we conclude that <m>\varphi(f) \in P</m> or <m>\varphi(g) \in P</m>. Therefore, <m>f \in P \cap R</m> or <m>g \in P \cap R</m>.
              </p>
  
            </proof>
          </lemma>
  
          <definition xml:id="defn-induced-map-on-spec"><title>Induced Map on <m>\Spec</m></title>
          <statement>
            <p>
              Each ring homomorphism <m>\varphi\!: R\to S</m> induces a map on spectra <m>\varphi^*\!:\Spec(S)\to\Spec(R)</m> <idx><h>map on <m>\Spec</m></h></idx>given by <m>\varphi^*(P)=\varphi^{-1}(P) = P \cap R</m>.
            </p>
          </statement>
          </definition>
  
          <example xml:id="ex-induced-map-on-spec-continuous"><title>Induced Map on Spec Continuous</title>
  
  
            <statement>
              
  
              <p>
                The induced map on spectra is not only an order-preserving map, but also it is continuous:
              </p>
  
            </statement>
  
            <solution>
  
              <p>
                if <m>U\subseteq \Spec(R)</m> is open, we have <m>U=\Spec(R) \setminus V(I)</m> for some ideal <m>I</m>; then for a prime <m>Q</m> of <m>S</m>, <me>Q \in (\varphi^*)^{-1}(U) \quad \Longleftrightarrow \quad Q \cap R \not\supseteq I  \quad \Longleftrightarrow  \quad Q \not\supseteq IS  \quad \Longleftrightarrow  \quad Q \notin V(IS).</me> So <m>(\varphi^*)^{-1}(U)</m> is the complement of <m>V(IS)</m>, and thus open
              </p>
  
            </solution>
          </example>
  
          <definition xml:id="defn-minimal-prime-2"><title>Minimal Prime</title>
          <statement>
            <p>
              Let <m>I</m> be an ideal in a ring <m>R</m>. A prime <m>P</m> is a <em>minimal prime</em> <idx><h>minimal prime of an ideal</h></idx>of <m>I</m> if <m>P</m> is minimal in <m>V(I)</m>. A <em>minimal prime</em> <idx><h>minimal prime of a ring</h></idx>of <m>R</m> is a minimal element in <m>\Spec(R)</m>.
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-minimal-prime-3"><title>Minimal Prime</title>
          <statement>
            <p>
              Let <m>I</m> be an ideal in a ring <m>R</m>. A <em>minimal prime</em> of <m>I</m> is a minimal element (with respect to containment) in <m>V(I)</m>. More precisely, <m>P</m> is a minimal prime of <m>I</m> if the following hold: 
              - <m>P</m> is a prime ideal, 
              - <m>P \supseteq I</m>, and 
              - if <m>Q</m> is also a prime ideal and <m>I \subseteq Q \subseteq P</m>, then <m>Q = P</m>.
            </p>
  
            <p>
              The set of minimal primes of <m>I</m> is denoted <m>\Min(I)</m> <idx><h><m>\Min(I)</m></h></idx>.
            </p>
          </statement>
          </definition>
  
          <lemma xml:id="lem-every-prime-contains-minimal-prime"><title>Every Prime Contains Minimal Prime</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, and <m>I</m> an ideal. Every prime <m>P</m> that contains <m>I</m> contains a minimal prime of <m>I</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Fix an ideal <m>I</m> and a prime <m>P \supseteq I</m>, and consider the set<me>S = \lbrace Q \in V(I) \mid P \supseteq Q \rbrace,</me>which is partially ordered with <m>\supseteq</m>. On the one hand, <m>P \in S</m>, so <m>S</m> is nonempty. On the other hand, given any chain <m>\{ Q_i \}_i</m> in <m>S</m>, <m>Q := \bigcap_i Q_i</m> is a prime ideal in <m>R</m> ( #prove !). Moreover, <m>Q</m> contains <m>I</m>, since every <m>Q_i</m> contain <m>I</m>, and <m>Q</m> is contained in <m>P</m>, since every <m>P_i \subseteq Q</m>. Therefore, <m>Q \in S</m>, and Zorn's Lemma applies to <m>S</m>. By <xref provisional="cite"/> [[Mathematics/Foundations/Results/Theorem - Zorn's Lemma]], <m>S</m> contains a maximal element for <m>\supseteq</m>, say <m>Q</m>.
              </p>
  
              <p>
                Notice that <m>Q</m> is equivalently a minimal element for <m>\subseteq</m>. Now if <m>Q'</m> is a prime ideal with <m>I \subseteq Q' \subseteq Q</m>, then <m>Q' \subseteq Q \subseteq P</m>, and thus <m>Q' \in S</m>. Therefore, we must have <m>Q' = Q</m>, by maximality of <m>Q</m> with respect to <m>\supseteq</m>. We conclude that <m>Q</m> is a minimal prime of <m>I</m>, and by definition <m>Q</m> is contained in <m>P</m>.
              </p>
  
            </proof>
          </lemma>
  
          <definition xml:id="defn-multiplicatively-closed-set"><title>Multiplicatively Closed Set</title>
          <statement>
            <p>
              Suppose <m>R</m> is a commutative ring and <m>S \subseteq R</m> is a subset such that 
              1. <m>1 \in S</m>, 
              2. <m>S</m> is closed under multiplication (i.e., if <m>x,y \in S</m>, then <m>xy \in S</m>), and 
              3. <m>S</m> does not contain <m>0</m> nor any zerodivisors. 
              Such a subset <m>S</m> is called a <em>multiplicatively closed subset of non zero divisors</em> <idx><h>multiplicatively closed subset</h></idx> of <m>R</m>.
            </p>
          </statement>
          </definition>
  
          <lemma xml:id="lem-spec-strong-nullstellensatz"><title>Spec Strong Nullstellensatz</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, <m>I</m> an ideal, and <m>W</m> a multiplicatively closed subset. If <m>W \cap I = \es</m>, then there is a prime ideal <m>P</m> with <m>P \supseteq I</m> and <m>P \cap W= \es</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Consider the family of ideals <m>\mathcal{F} := \{ J \ | \ J \supseteq I, J \cap W=\varnothing\}</m> ordered with inclusion. This is nonempty, since it contains <m>I</m>, and any chain <m>J_1 \subseteq J_2 \subseteq \cdots</m> has an upper bound <m>\cup_i J_i</m>. Therefore, <m>\mathcal{F}</m> has some maximal element <m>\A</m> by a basic application of <xref provisional="cite"/> [[Mathematics/Foundations/Results/Theorem - Zorn's Lemma|Zorn's Lemma]]. We claim <m>\A</m> is prime. Suppose <m>f,g\notin \A</m>. By maximality, <m>\A+(f)</m> and <m>\A+(g)</m> both have nonempty intersection with <m>W</m>, so there exist <m>r_1f+a_1</m>, <m>r_2 g+a_2 \in W</m>, with <m>a_1,a_2\in \A</m>. If <m>fg\in \A</m>, then<me>\underset{\in W}{(r_1f+a_1)}\underset{\in W}{(r_2g+a_2)} = r_1 r_2 fg + r_1 f \underset{\in \mathbb{A}}{a_2} + r_2 g \underset{\in \mathbb{A}}{a_1} + \underset{\in \mathbb{A}}{a_1 a_2} \in W \cap \A,</me>
              </p>
  
            </proof>
          </lemma>
  
          <theorem xml:id="thm-spectrum-analogue-of-strong-nullstellensatz"><title>Spectrum Analogue of Strong Nullstellensatz</title>
            <statement>
              <p>
                Let <m>R</m> be a ring, and <m>I</m> be an ideal. For <m>f\in R</m>,<me>V(I) \subseteq V(f) \Longleftrightarrow f\in \sqrt{I}.</me>Moreover<me>\sqrt{I} = \bigcap_{P \in V(I)} P = \bigcap_{P \in \Min(I)} P.</me>  
              </p>
            </statement>

            <proof>
              <p>
                First to justify the equivalence of the two statements we observe: <me>V(I) \subseteq V(f) \Longleftrightarrow f\in P \ \text{for all} \ P \in V(I)  \Longleftrightarrow f \in \bigcap_{P \in V(I)} P.</me> Now we will show that <m>\displaystyle\bigcap_{P \in V(I)} P = \sqrt{I}</m>:
              </p>

              <p>
                <m>(\supseteq)</m>: It suffices to show that <m>P \supseteq I</m> implies <m>P \supseteq \sqrt{I}</m>, and indeed <me>f \in \sqrt{I} \implies f^n\in I \subseteq P \implies f\in P.</me>
              </p>
  
              <p>
                <m>(\subseteq)</m>: If <m>f\notin \sqrt{I}</m>, consider the multiplicatively closed set <m>W=\{1,f,f^2,f^3,\ldots\}</m>. We have <m>W\cap I=\varnothing</m> by hypothesis. There is a prime <m>P</m> in <m>V(I)</m> that does not intersect <m>W</m>, and hence <m>P</m> does not contain <m>f.</m>
              </p>
  
              <p>
                Finally, <m>\Min(I) \subseteq V(I)</m>, and since every prime in <m>V(I)</m> contains a minimal prime of <m>I</m>, we conclude that <me>\bigcap_{P \in V(I)} P = \bigcap_{P \in \Min(I)} P.</me>
              </p>
            </proof>
          </theorem>
  
          <example xml:id="ex-radical-of-x2-is-x"><title>Radical of <m>(x^2)</m> is <m>(x)</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field, <m>R = k[x]</m>, and <m>I = (x^2)</m>. On the one hand, it is immediate form the definition that <m>x \in \sqrt{I}</m>, and thus <m>(x) \subseteq \sqrt{I}</m>. On the other hand, <m>(x)</m> is a prime ideal that contains <m>I</m>, and thus by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Spectrum Analogue of Strong Nullstellensatz|Theorem]] we must have <m>\sqrt{I} = (x)</m>.
              </p>
  
            </statement>
          </example>
  
          <corollary xml:id="cor-vivj-iff-radicals-are-equal"><title><m>V(I)=V(J)</m> iff Radicals are Equal</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> a ring. There is an order-reversing bijection <me>\{ \text{closed subsets of } \Spec(R) \}\longleftrightarrow\{\text{radical ideals } I\subseteq R\}</me> In particular, for two ideals <m>I</m> and <m>J</m>, we have <m>V(I)=V(J)</m> if and only if <m>\sqrt{I}=\sqrt{J}</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The closed sets of <m>\Spec(R)</m> are precisely the sets of the form <m>V(I)</m> for some ideal <m>I</m>. As <m>V(I) = V(\sqrt{I})</m> the closed sets of <m>\Spec(R)</m> are given by <m>V(I)</m> where <m>I</m> ranges over all radical ideals. We showed in <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - Properties of V|Proposition]] that the map<me>V: \{\text{radical ideals } I\subseteq R\} \longrightarrow \{ \text{closed subsets of } \Spec(R) \}</me>is order-reversing. Finally, suppose that <m>I</m> and <m>J</m> are ideals such that <m>V(I) = V(J)</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Spectrum Analogue of Strong Nullstellensatz|Theorem]],<me>\sqrt{I} = \bigcap_{P \in V(I)} P = \bigcap_{P \in V(J)} P = \sqrt{J}.</me>Conversely, suppose that <m>\sqrt{I} = \sqrt{J}</m>. Given a prime <m>P \in V(I)</m>, we also have <m>P \in V(\sqrt{I})</m>, and thus<me>P \supseteq \sqrt{I} = \sqrt{J} \supseteq J,</me>so <m>P \in V(I)</m>. Since the same argument applies to show that <m>V(J) \supseteq V(I)</m>, we conclude that <m>V(I) = V(J)</m>.
              </p>
  
            </proof>
          </corollary>
  
          <example xml:id="ex-properties-of-radical-ideals"><title>Properties of Radical Ideals</title>
  
  
            <statement>
              
  
              <p>
                Let <m>I</m> and <m>J</m> be ideals in a ring <m>R</m>. (a) Show that <m>\sqrt{\sqrt{I}} = \sqrt{I}</m>. (b) Show that if <m>I \subseteq J</m>, then <m>\sqrt{I} \subseteq \sqrt{J}</m>. (c) Show that <m>\sqrt{I \cap J} = \sqrt{I} \cap \sqrt{J}</m>. (d) Show that <m>\sqrt{I^n} = \sqrt{I}</m> for all <m>n \geqslant 1</m>. (e) Show that if <m>P</m> is a prime ideal, then <m>\sqrt{P^n} = P</m> for all <m>n \geqslant 1</m>.
              </p>
  
            </statement>
          </example>

        </section>

        <section xml:id="sec-prime-avoidance"><title>Prime Avoidance</title>

          <!--********************
          Section: Prime Avoidance
          *********************-->
          
          <blockquote>
            <p>
              <q>Only by avoiding the beginning of things can we escape their end.</q>
            </p>
            <attribution>Cyril Connolly</attribution>
          </blockquote>

          <!--
          <blockquote>
            <p>
              <q>A person often meets his destiny on the road he took to avoid it.</q>
            </p>
            <attribution>Jean de La Fontaine</attribution>
          </blockquote>
          -->

          <remark>
            <p>
              We will now discuss an important lemma known as Prime Avoidance. This is an elementary fact, but it is very helpful. Prime Avoidance says that if an ideal <m>I</m> is not contained in any of the primes <m>P_1, \ldots, P_n</m>, then <m>I</m> cannot be contained in their union. Set-theoretically this is possible, of course; but if the ideals <m>P_1, \ldots, P_n</m> are all prime, then it is actually not possible for <m>I \subseteq P_1 \cup \cdots \cup P_n</m> unless <m>I</m> is contained in one of the <m>P_i</m>. In fact, for this to work we can even allow two of the <m>P_i</m> to be just any ideals, as long as the remaining <m>P_i</m> are prime.
            </p>
          </remark>
      
          <lemma xml:id="lem-prime-avoidance"><title>Prime Avoidance</title>
          <idx><h>Prime Avoidance</h></idx>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, <m>I_1,\dots,I_n,J</m> be ideals, and suppose that <m>I_i</m> is prime for <m>i&gt;2</m>. If <m>J\not\subseteq I_i</m> for all <m>i</m>, then <m>J\not\subseteq \bigcup_i I_i</m>. Equivalently, if <m>J\subseteq \bigcup_i I_i</m>, then <m>J\subseteq I_i</m> for some <m>i</m>.
              </p>
  
              <p>
                Moreover, if <m>R</m> is <m>\N</m>-graded, and all of the ideals are homogeneous, all <m>I_i</m> are prime, and <m>J\not\subseteq I_i</m> for all <m>i</m>, then there is a homogeneous element in <m>J</m> that is not in <m>\bigcup_i I_i</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                We proceed by induction on <m>n</m>. If <m>n=1</m>, there is nothing to show. When <m>n=2</m>, we have two ideals <m>I_1</m> and <m>I_2</m> and an ideal <m>J</m> such that <m>J \nsubseteq I_1</m> and <m>J \nsubseteq I_2</m>, and we want to show that <m>J \nsubseteq I_1 \cup I_2</m>. By assumption there exist elements <m>a_1, a_2 \in J</m> with <m>a_1 \notin I_1</m> and <m>a_2 \notin I_2</m>. If <m>a_2 \notin I_1</m> or <m>a_1 \notin I_2</m>, then we have an element that is not in <m>I_1 \cup I_2</m>, and we are done. On the other hand, if <m>a_2 \in I_1</m> and <m>a_1 \in I_2</m>, then consider <m>c = a_1 + a_2 \in J</m>. Since <m>a_1 \in I_1</m> but <m>a_2 \notin I_1</m>, then <m>c \notin I_1</m>. Similarly, <m>c \notin I_2</m>. Therefore, <m>c \notin I_1 \cup I_2</m>.
              </p>
  
              <p>
                Now suppose that the statement holds for some <m>n-1 \geq 2</m>, and consider ideals <m>I_1, \ldots, I_{n}</m> with <m>I_i</m> prime for all <m>i \geq3</m> such that <m>J \notin I_i</m> for any <m>i</m>. By induction hypothesis, for each <m>i</m> we have <me>J \notin \bigcup_{j \neq i} I_j,</me>so we can find elements <m>a_i</m> such that <me>a_i \notin \bigcup_{j\neq i} I_j \textrm{ and } a_i \in J.</me> If some <m>a_i\notin I_i</m>, we are done, so let's assume that <m>a_i\in I_i</m> for each <m>i</m>. Consider <me>a :=  a_n + a_1 \cdots a_{n-1} \in J.</me>Notice that <m>a_1\cdots a_{n-1}=a_i(a_1\cdots \widehat{a_i} \cdots a_{n-1})\in I_i</m>. If <m>a\in I_i</m> for <m>i&lt;n</m>, then we also have <m>a_n\in I_i</m>, a contradiction. If <m>a\in I_n</m>, then we also have <m>a_1\cdots a_{n-1} = a - a_n \in I_n</m>, since <m>a_n\in I_n</m>. Since <m>n&gt;2</m>, our assumption is that <m>I_n</m> is prime, so one of <m>a_1,\dots,a_{n-1}\in I_n</m>, which is a contradiction. So <m>a \notin I_i</m> for all <m>i</m>, and thus <m>a</m> is the element we were searching for.
              </p>
  
              <p>
                If all <m>I_i</m> are homogeneous and prime, then we proceed as above but replacing <m>a_n</m> and <m>a_1,\dots,a_{n-1}</m> with suitable powers so that <m>a_n + a_1 \cdots a_{n-1}</m> is homogeneous. For example, we could take<me>a :=  a_n^{\deg(a_1) + \cdots + \deg(a_{n-1})} + \left( a_1 \cdots a_{n-1} \right)^{\deg(a_n)}.</me>The primeness assumption guarantees that noncontainments in ideals is preserved.
              </p>
  
            </proof>
          </lemma>
  
          <theorem xml:id="thm-stronger-prime-avoidance"><title>Stronger Prime Avoidance</title>
  
            <statement>
              <p>
                Let <m>R</m> be a ring, <m>P_1, \ldots, P_n</m> prime ideals, <m>x \in R</m> and <m>I</m> be an ideal in <m>R</m>. If <m>(x) + I \not\subseteq P_i</m> for each <m>i</m>, then there exists <m>y \in J</m> such that <me>x + y \notin \bigcup_{i=1}^n P_i.</me> 
              </p>
            </statement>

            <proof>
              <p>
                We proceed by induction on <m>n</m>. When <m>n=1</m>, if every element of the form <m>x+y</m> with <m>y \in R</m> is in <m>P= P_1</m>, then multiplying by <m>r \in R</m> we conclude that every <m>rx + y \in P</m>, meaning <m>(x) + I \subseteq P</m>.
              </p>

              <p>
                Now suppose <m>n&gt;1</m> and that we have shown the statement for <m>n-1</m> primes. If <m>P_i \subseteq P_j</m> for some <m>i \neq j</m>, then we might as well exclude <m>P_i</m> from our list of primes, and the statement follows by induction. So assume that all our primes <m>P_i</m> are incomparable.
              </p>
  
              <p>
                If <m>x \notin P_i</m> for all <m>i</m>, we are done, since we can take <m>x+0</m> for the element we are searching for. So suppose <m>x</m> is in some <m>P_i</m>, which we assume without loss of generality to be <m>P_n</m>. Our induction hypothesis says that we can find <m>y \in I</m> such that <m>x+y \notin P_1 \cup \cdots \cup P_{n-1}</m>. If <m>x+y \notin P_n</m>, we are done, so suppose <m>x+y \in P_n</m>. Since we assumed <m>x \in P_n</m>, we must have <m>I \not\subseteq P_n</m>, or else we would have had <m>(x) + I \subseteq P_n</m>. Now <m>P_n</m> is a prime ideal that does not contain <m>P_1, \ldots, P_{n-1}</m>, nor <m>I</m>, so <me>P \not\supseteq I P_1 \cdots P_{n-1}.</me>Choose <m>z \in I P_1 \cdots P_{n-1}</m> not in <m>P_n</m>. Then <m>x+y+z \notin P_n</m>, since <m>z \notin P_n</m> but <m>x+y \in P_n</m>. Moreover, for all <m>i&lt;n</m> we have <m>x+y+z \notin P_i</m>, since <m>z\in P_i</m> and <m>x+y \notin P_i</m>.
              </p>
            </proof>
          </theorem>

        </section>
  
      </chapter>

      <chapter xml:id="ch-affine-varieties"><title>Affine Varieties</title>

        <!--*********************
        Chapter: Affine Varieties
        **********************-->
  
        <section xml:id="sec-varieties"><title>Varieties</title>

          <!--**************
          Section: Varieties
          ***************-->
          
          <blockquote>
            <p>
              <q>Variety is the spice of life.</q>
            </p>
            <attribution>William Cowper</attribution>
          </blockquote>

          <p>
            Colloquially, we often identify systems of equations with their solution sets. We will make this correspondence more precise for systems of polynomial equations, and develop the beginning of a rich dictionary between algebraic and geometric objects.
          </p>

          <question>
            <p>
              Let <m>k</m> be a field. To what extent is a system of polynomial equations <me>\left\lbrace\begin{array}{c}
            f_1 = 0 \\
            \vdots \\
            f_t = 0
            \end{array}\right.</me> with <m>f_1, \ldots, f_t \in k[x_1, \ldots, x_d]</m> determined by its solution set?
            </p>
          </question>

          <remark>
            <p>
              Colloquially, we often identify systems of equations with their solution sets. We will make this correspondence more precise for systems of polynomial equations, and develop the beginning of a rich dictionary between algebraic and geometric objects.
            </p>
          </remark>

          <question xml:id="question-2">
            <title>Question -</title>

            <p>
              Let <m>k</m> be a field. To what extent is a system of polynomial equations <me>\left\lbrace\begin{array}{c}
            f_1 = 0 \\
            \vdots \\
            f_t = 0
        \end{array}\right.</me> with <m>f_1, \ldots, f_t \in k[x_1, \ldots, x_d]</m> determined by its solution set?
            </p>
          </question>

          <definition xml:id="defn-affine-n-space"><title>Affine <m>n</m>-Space</title>
          <statement>
            <p>
              For an arbitrary field <m>k</m>, the <em>affine</em> <m>n</m>-<em>space</em> <idx><h>affine space</h></idx> over <m>k</m>, written <m>\A_k^n</m>, is the set of <m>n</m>-tuples of elements of <m>k</m>: <me>\A^n_k = \{(a_1,\dots,a_n) |a_i \in k\}</me>So, <m>\A^n_k</m> is just <m>k^n</m>, but we avoid using the latter since <m>k^n</m> is the usual notation of the standard <m>n</m>-dimensional <m>k</m>-vector space. Affine space is not thought of as a vector space typically.
            </p>
          </statement>
          </definition>

          <definition xml:id="defn-zero-locus"><title>Zero Locus</title>
          <statement>
            <p>
              For a subset <m>T</m> of <m>k[x_1, \dots, x_d]</m>, we define <m>\mathcal{Z}(T) \subseteq \A^d_k</m> to be the set of common zeros or the <em>zero set</em> <idx><h><m>\cZ(T)</m></h></idx> of the polynomials (equations) in <m>T</m>:  <me>\mathcal{Z}(T) :=  \{(a_1, \dots, a_d) \in \A^d_k \mid f(a_1, \dots, a_d) = 0 \text{ for all $f \in T$}\}.</me> A subset of <m>\A^d_k</m> of the form <m>\mathcal{Z}(T)</m> for some subset <m>T</m> is called an <em>algebraic subset</em> <idx><h>algebraic set</h></idx> of <m>\A^d_k</m>, or an <em>affine algebraic variety</em> <idx><h>affine algebraic variety</h></idx><idx><h>algebraic variety</h></idx><idx><h>variety</h></idx>. A variety is <em>irreducible</em> <idx><h>irreducible variety</h></idx>if it cannot be written as the union of two proper subvarieties.
            </p>
          </statement>
          </definition>

          <remark>
            <p>
              Some authors use the word <em>variety</em> to refer only to irreducible algebraic sets. Note also that the definitions given here are only completely standard when <m>k</m> is algebraically closed.
            </p>
          </remark>

          <remark>
            <p>
              Note that if <m>L \supseteq k</m> are both fields, any polynomial <m>f\in k[x_1,\dots,x_n]</m> is also an element of <m>L[x_1,\dots,x_n]</m>, and we can evaluate it at any point in <m>\A^n_L</m>. Thus, we may write <m>\mathcal{Z}_k(T)</m> <idx><h><m>\mathcal{Z}_k(T)</m></h></idx> or <m>\mathcal{Z}_L(T)</m> to distinguish between the zero sets over different fields.
            </p>
          </remark>
      
          <proposition xml:id="prop-properties-of-z"><title>Properties of <m>\cZ</m></title>

          <statement>
            <p>
              Let <m>k</m> be a field and <m>R=k[x_1, \dots,x_n]</m>. Let <m>S, T \subseteq R</m> be arbitrary subsets. (a) If <m>S \subseteq T</m>, then <m>\mathcal{Z}(S) \supseteq \mathcal{Z}(T)</m>. (b) If <m>I = (S)</m> is the ideal generated by <m>S</m>, then <m>\mathcal{Z}(S) = \mathcal{Z}(I)</m>.
            </p>
          </statement>

            <proof>

              <p>
                First, note that imposing more equations can only lead to a smaller the solution set, which gives (1). For (2), we have <m>\cZ(I) \subseteq \cZ(S)</m> by (1). On the other hand, if <m>f_1,\dots,f_m\in S</m> and <m>r_1,\dots,r_m\in R</m>, and <m>(a_1,\dots,a_n)\in \cZ(S)</m>, then <m>f_i(a_1,\dots,a_n)=0</m> for all <m>i</m>. Therefore, <me>(\sum_i r_i f_i)(a_1,\dots,a_n) = \sum_i r_i(a_1,\dots,a_n) f_i(a_1,\dots,a_n) = 0,</me> so <m>(a_1,\dots,a_n)\in \cZ(\sum_i r_i f_i)</m>. Thus, <m>(a_1,\dots,a_n)\in \cZ(I)</m>. That is, <m>\cZ(S) \subseteq \cZ(I)</m>.*
              </p>

            </proof>
          </proposition>

          <example><title></title>

            <p>
              Let <m>k</m> be a field and <m>R = k[x]</m>. The varieties <m>\cZ(x)</m> and <m>\cZ(x^2)</m> are both the singleton given by the origin <m>\{ 0 \}</m> of <m>\A^1_k</m>, even though the ideals <m>(x)</m> and <m>(x^2)</m> are distinct.
            </p>

          </example>

          <proposition xml:id="prop-properties-of-z-topology"><title>Properties of Z Topology</title>

            <statement>

            <p>
              Let <m>k</m> be a field and <m>R=k[x_1, \dots,x_n]</m>. Let <m>I, I_\lambda, J\subseteq R</m> be ideals in <m>R</m>. 
              (a) <m>\mathcal{Z}(R) = \mathcal{Z}(1) = \varnothing</m> and <m>\mathcal{Z}(0) = \A^n_k</m>. 
              (b) <m>\bigcap_{\lambda \in \Lambda} \mathcal{Z}(I_\lambda) = \displaystyle \mathcal{Z} ( \sum_{\lambda \in \Lambda} I_\lambda)</m>. 
              (c) <m>\displaystyle \cZ \left( I \cap J \right) = \cZ( IJ ) = \cZ(I) \cup \cZ(J)</m>. 
              </p>

              </statement>

              <proof>
                <p>
                 (1) is clear, since <m>1</m> is never equal to zero and <m>0</m> is always zero.

                </p>

                 <p>
              Let's now show (2). Given sets <m>S_\lambda \subseteq T</m>, a point is a solution to all of the equations in each set <m>S_\lambda</m> if and only if it is a solution of each set of equations <m>S_\lambda</m>. Therefore, <me>\displaystyle \mathcal{Z} (\bigcup_{\lambda \in \Lambda} S_\lambda)=\bigcap_{\lambda \in \Lambda} \mathcal{Z}(S_\lambda).</me> Given ideals <m>I_\lambda</m>, <m>\sum_{\lambda \in \Lambda} I_\lambda</m> is the ideal generated by <m>\bigcup_{\lambda\in\Lambda} I_\lambda</m>, and thus <me>
                \cZ(\sum_{\lambda \in \Lambda} I_\lambda) =  \cZ(\bigcup_{\lambda \in \Lambda} I_\lambda) = \bigcap_{\lambda \in \Lambda} \cZ(I_\lambda)
              </me>
              
            </p>

            <p>
              To show (3), first consider subsets <m>S, T \subseteq R</m>. We claim that <me>\cZ(S) \cup \cZ(T) \subseteq \cZ(\{fg \ | \ f\in S,  g\in T\}).</me> Indeed, <m>f(a_1,\dots,a_n)=0</m> for all <m>f\in S</m> implies <m>f(a_1,\dots,a_n) g(a_1,\dots,a_n)=0</m> for all <m>f\in S</m> and all <m>g\in T</m>. On the other hand, if <m>(a_1,\dots,a_n)\notin \cZ(S) \cup \cZ(T)</m>, then there is some <m>f\in S</m> and some <m>g\in T</m> with <m>f(a_1,\dots,a_n) \neq 0</m> and <m>g(a_1,\dots,a_n)\neq 0</m>, so <m>f(a_1,\dots,a_n) g(a_1,\dots,a_n)\neq 0</m>. Therefore, <me>\cZ(S) \cup \cZ(T) \subseteq \cZ(\{fg \ | \ f\in S,  g\in T\}).</me> Now given ideals <m>I</m> and <m>J</m>, since <m>IJ \subseteq I \cap J \subseteq I</m> and <m>I \cap J \subseteq J</m>), by (1) we get <me>\cZ(I) \cup \cZ(J) \subseteq \cZ(I \cap J) \subseteq  \cZ(IJ).</me> On the other hand, by (2) and (4) we get <me>\cZ(IJ) \subseteq \cZ( \{ fg \ | \ f\in I , g\in J\}) = \cZ(I) \cup \cZ(J),</me> so the equalities hold throughout.
            </p>
              </proof>
              
              

           
          

          </proposition>

          <definition xml:id="defn-zariski-topology"><title>Zariski Topology</title>
            <statement>
            <p>
              Let <m>k</m> be a field. The collection of subvarieties <m>X \subseteq \A^n_k</m> is the collection of closed subsets in a topology on <m>\A^n_k</m>. This is called the  on <m>\A^n_k</m>. Any subvariety of <m>\A^n_k</m> obtains a <em>Zariski topology</em> as the subspace topology from <m>\A^n_k</m>.
            </p>
          </statement>

          </definition>

          <example><title></title>

            <p>
              Let <m>k</m> be an infinite field. The closed subsets in the Zariski topology on <m>\A^1_k</m> are just the finite subsets, along with the whole space. Note that this topology is not Hausdorff; quite on the contrary, any two nonempty open sets have infinite intersection!
            </p>

          </example>

          <definition xml:id="defn-vanishing-set"><title>Vanishing Set</title>
          <statement>
            <p>
              Given any subset <m>X</m> of <m>\A^d_k</m> for a field <m>k</m>, define <me>
              \mathcal{I}(X) = \{g(x_1, \dots, x_d) \in k[x_1, \dots, x_d] \mid g(a_1, \dots, a_d) = 0 \text{ for all $(a_1, \dots, a_d) \in X$} \}. 
              </me>
            </p>
          </statement>
          </definition>

          <example xml:id="exrcise"><title>Exercise -</title>

            <p>
              <m>\mathcal{I}(X)</m> is an ideal in <m>k[x_1, \ldots, x_d]</m> for any <m>X \subseteq \A^d_k</m>.
            </p>

          </example>

          <example><title></title>

            <p>
              For any field <m>k</m>, we have <m>\mathcal{I}((a_1, \dots, a_d)) = (x_1 - a_1, \dots, x_d - a_d)</m>.
            </p>

          </example>

          <remark>
            <p>
              For a subset <m>X\subseteq \A^n_K</m> and a subset <m>S \subseteq K[x_1,\dots,x_n]</m>, we have <me>X \subseteq \cZ(S) \Longleftrightarrow \text{each $s\in S$ vanishes at each $x\in X$} \Longleftrightarrow S \subseteq \cI(X).</me>
            </p>
          </remark>

          <theorem xml:id="thm-properties-of-vanishing-set"><title>Properties of Vanishing Set</title>
          <statement>
            <p>
              Let <m>k</m> be a field, and <m>X,X_\lambda,Y</m> be subsets of <m>\A^n_k</m>. (a) <m>\cI(\varnothing) = R</m> and, if <m>k</m> is infinite, <m>\cI(\A^n_k) = 0</m>. (b) If <m>X \subseteq Y</m>, then <m>\cI(X) \supseteq \cI(Y)</m>. (c) <m>\cI(X)</m> is a radical ideal.
            </p>
          </statement>

            <proof>


              <p>
                For (1), it is clear that <m>\cI(\varnothing) = R</m>. Now assume <m>k</m> is infinite. We show by induction on <m>n</m> that any nonzero polynomial in <m>k[x_1,\dots,x_n]</m> is nonzero at some point in <m>\A^n_k</m>. The case <m>n=1</m> is standard: a polynomial in <m>k[x]</m> of degree <m>d</m> can have at most <m>d</m> roots — in particular, it cannot have infinitely many roots. Let <m>n \geqslant 2</m> and let <m>f(x_1,\dots,x_n)\in k[x_1,\dots,x_n]</m> be a nonzero polynomial. If <m>f</m> is a nonzero constant, it is nonzero at any point. Otherwise, we can assume that <m>f</m> nontrivally involves some variable, say <m>x_n</m>. Write <me>f(x_1,\dots,x_n) = f_d(x_1,\dots,x_{n-1}) x_n^d + \cdots + f_0(x_1,\dots,x_{n-1}).</me> If <m>f</m> is identically zero, then for every <m>(a_1,\dots,a_{n-1})\in \A^{n-1}_k</m>, <me>f_d(a_1,\dots,a_{n-1}) x_n^d + \cdots + f_0(a_1,\dots,a_{n-1})</me> is a polynomial in one variable that is identically zero, so it is the zero polynomial. Thus each <m>f_i(a_1,\dots,a_{n-1})</m> is identically zero. Since this holds for all <m>(a_1,\dots,a_{n-1})\in \A^{n-1}_k</m>, by the induction hypothesis we conclude that each <m>f_i</m> is the zero polynomial. Therefore, <m>f(x_1,\dots,x_n)</m> is the zero polynomial, as required.
              </p>

              <p><ol>
                <li>
                is clear from the definition of <m>\cI</m>.
                </li>

              </ol></p>

              <p>
                For (3), note that <m>f,g\in \cI(X)</m> and <m>r\in R</m> implies <m>X\subseteq \cZ(f,g)</m> implies <m>X \subseteq \cZ(rf+g)</m> implies <m>rf+g \in \cI(X)</m>, so <m>\cI(X)</m> is an ideal. If <m>f^t\in \cI(X)</m>, then <m>f(a_1,\dots,a_n)^t=0</m> for all <m>(a_1,\dots,a_n)\in X</m>, so <m>f(a_1,\dots,a_n)=0</m> for all <m>(a_1,\dots,a_n)\in X</m>, and <m>f\in \cI(X)</m>.
              </p>

            </proof>
          </theorem>

        </section>

        <section xml:id="sec-coordinate-ring"><title>The Coordinate Ring of a Variety</title>

          <!--*********************
          Section: Coordinate Rings
          **********************-->
          
          <blockquote>
            <p>
              <q>Drink whatever you like, just so long as it coordinates with your nail varnish.</q>
            </p>
            <attribution>Victoria Beckham</attribution>
          </blockquote>

          <definition xml:id="defn-morphism-of-varieties"><title>Morphism of Varieties</title>
          <statement>
            <p>
              Suppose <m>X</m> is a subvariety of <m>\mathbb{A}^m_k</m> and <m>Y</m> is a subvariety of <m>\mathbb{A}^n_l</m>. A <em>morphism of varieties</em><idx><h>morphism of varieties</h></idx> or <em>algebraic map</em><idx><h>algebraic map</h></idx> or <em>regular map</em><idx><h>regular map</h></idx> from <m>X</m> to <m>Y</m> is a function <m>\phi: X \to Y</m> defined coordinatewise by polynomials <m>g_1, \dots, g_n\in k[x_1, \dots, x_m]</m>, that is 
              <me>\phi(a_1, \dots, a_m) = (g_1(a_1, \dots, a_m), \dots, g_n(a_1, \dots, a_m)) \text{ for all } \bf{a} \in X.</me> 
              A morphism of varieties <m>\phi: X \to Y</m> is an <em>isomorphism</em> <idx><h>isomorphism of varieties</h></idx> if there is some morphism of varieties <m>\phi: Y \to X</m> such that <m>\phi\circ \psi = \id_Y</m> and <m>\psi \circ \phi = \id_X</m>.
            </p>
          </statement>
          </definition>
    
          <example><title></title>
  
            <p><ol>
              <li>
              Let <m>k</m> be an infinite field. Consider <m>X = \cZ(xy -1) \subseteq \A^2_k</m> (i.e., <m>X</m> is a hyperbola) and define <m>\phi: X \to \A^1_k</m> by <m>\phi(a,b) = a</m>. Then <m>\phi</m> is an algebraic map (indeed, it is given by a linear polynomial) and its image is <m>\A^1_k \setminus \{0\}</m>, which is <em>not</em> an algebraic subset of <m>\A^1_k</m>. So the set-theoretic image of a morphism of varieties need not be a variety.
              </li>
  
              <li>
              Take an infinite field, and let <m>Y</m> be the classical cuspidal curve: <idx><h>cuspidal curve</h></idx> <me>Y = \cZ(y^2 - x^3) \subseteq \A^2_k.</me>Define <me>\phi: \A^1_K \to Y \quad \phi(t) = (t^2, t^3).</me>
              </li>
  
            </ol></p>
  
            <p>
              This <m>\phi</m> is an algebraic map from <m>\A^1_K</m> to <m>Y</m>, since the component functions are polynomial functions of <m>t</m> and <m>(t^3)^2 - (t^2)^3 = 0</m> for all <m>t</m>.
            </p>
  
            <p>
              Note that this <m>\phi</m> is a bijection of sets. However, it is not an isomorphism. Indeed, if it were, we would have some map <m>\psi</m> such that <m>\psi\circ \phi = \mathrm{id}_{\A^1_K}</m>. This <m>\psi</m> would be given by a polynomial <m>h</m> in two variables such that <m>h(t^2,t^3) = t</m>. It is easy to see that no such <m>h</m> exists. (c) Consider <m>\A^6_k</m> as the space of <m>2 \times 3</m> matrices over <m>K</m> with coordinates <m>x_{11},\dots,x_{23}</m>, and consider <m>\A^5_K</m> as the space of pairs of <m>2 \times 1</m> and <m>1\times 3</m> matrices over <m>K</m> with coordinates <m>y_1,y_2, z_1,z_2,z_3</m>. The map of matrix multiplication from <m>\A^5_k</m> to <m>\A^6_k</m> is a regular map: <me>(y_1,y_2,z_1,z_2,z_3)  \mapsto \begin{bmatrix} y_1 z_1 &amp; y_1 z_2 &amp; y_1 z_3 \\ y_2 z_1 &amp; y_2 z_2 &amp; y_2 z_3 \end{bmatrix}.</me>
            </p>
  
          </example>
  
          <definition xml:id="defn-coordinate-ring"><title>Coordinate Ring</title>
          <statement>
  
            <p>
              Let <m>k</m> be a field, and <m>X=\mathcal{Z}_k(I)\subseteq \mathbb{A}^d</m> be a subvariety of <m>\mathbb{A}^d</m>. The <em>coordinate ring</em> <idx><h>coordinate ring</h></idx><idx><h><m>k[X]</m></h></idx> of <m>X</m> is the ring <m>k[X] := k[x_1,\dots,x_d]/\mathcal{I}(X)</m>.
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-affine-algebra"><title>Affine Algebra</title>
          <statement>
            <p>
              An <em>affine <m>k</m>-algebra</em><idx><h>affine algebra</h></idx> is any ring of the form <me>k[x_1,\ldots, x_n]/I \textrm{ for some ideal } I\subseteq k[x_1,\ldots, x_n].</me>
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-pullback">
            <title>Pullback</title>
          <statement>
            <p>
              Let <m>k</m> be a field. Let <m>X\subseteq \A^m_k</m> and <m>Y \subseteq \A^n_k</m> be affine varieties. Let <m>\phi: X \to Y</m> be a morphism given by <m>(g_1(x),\dots,g_n(x))</m>, with <m>g_i \in k[x_1,\dots,x_m]</m>. We define <me>\begin{CD}
  k[Y]@&gt;\phi^*&gt;&gt; k[X]\\\\
  f(y_{1},\dots,y_{n})@&gt;&gt;&gt; f(g_{1}(x),\dots,g_n(x))
  \end{CD}</me> Alternatively, thinking of <m>f\in k[Y]</m> as a regular map from <m>Y \to A^1_k</m>, we have
            </p>
  
            <p>
              #empty
            </p>
  
            <p>
              We may call this the  <m>\phi</m> or the  of <m>\phi</m>.
            </p>
          </statement>
          </definition>
  
          <example><title>Exercise -</title>
  
            <p>
              Show that the rule <m>\phi^*</m> is a well-defined ring homomorphism, and that the map <m>\phi \mapsto \phi^*</m> is well-defined.
            </p>
  
          </example>
  
          <example><title>Exercise -</title>
  
            <p>
              For any field <m>k</m>, there is a contravariant functor from affine varieties over <m>k</m> to affine <m>k</m>-algebras that (a) on objects, maps a variety <m>X</m> to its coordinate ring <m>k[X]</m>, (b) on morphisms, maps a morphism of varieties <m>X \xrightarrow{\phi} Y</m> to its pullback <m>k[Y] \xrightarrow{\phi^*} k[X]</m>.
            </p>
  
          </example>
  
          <example><title></title>
  
            <p>
              We saw before that <me>X= \{ (t,t^2,t^3) \ | \ t \in k \}</me>is a subvariety of <m>\mathbb{A}^3_k</m>. Thus its coordinate ring is of the form <m>k[X] = k[x,y,z]/\cI(X)</m>. To compute <m>\cI(X)</m>, note that the polynomials <m>f \in k[x,y,z]</m> that vanish at every point of <m>X</m> are precisely the polynomials in the kernel of the map <m>k[x,y,z] \to k[t]</m> given by <m>x \mapsto t</m>, <m>y \mapsto t^2</m>, and <m>z \mapsto t^3</m>. Then one can show that <m>\cI(X) = (x^2-y,x^3-z)</m>. For an explicit field like <m>\mathbb{R}</m> or <m>\mathbb{C}</m>, we can also compute this kernel in Macaulay2. Notice, in fact, that <m>k[X] \cong k[t,t^2,t^3]</m>.
            </p>
  
          </example>
  
          <example><title></title>
  
            <p>
              Fix a field <m>k</m>, and let <m>R = k[x,y,z]</m>. Consider the ideal <m>P</m> given by <me>P = \left( \underset{f}{\underbrace{x^3-yz}}, \underset{g}{\underbrace{y^2-xz}}, \underset{h}{\underbrace{z^2-x^2y}} \right).</me>We will show that the ring homomorphism #empty is an isomorphism. First, note that it is immediately surjective by construction, so we just need to prove it is injective. If we set <m>\deg(x)=3, \deg(y)=4, \deg(z)=5, \deg(t)=1</m>, <m>\pi</m> is a graded homomorphism of graded rings, whose kernel is homogeneous. Since <m>[ k[t^3,t^4,t^5] ]_n</m> is a <m>1</m>-dimensional vector space generated by <m>t^n</m> for all <m>n\geqslant 3</m> (and zero in degrees 1 and 2), it suffices to show that <m>\dim( [\frac{k[x,y,z]}{P}]_n ) = 1</m> for all <m>n \geqslant 3</m> (and zero in degrees 1 and 2).
            </p>
  
            <p>
              Given any monomial in <m>\frac{k[x,y,z]}{P}</m>, we can use the relations <m>y^2-xz</m>, <m>z^2-x^2y</m>, and <m>yz-x^3</m> to obtain an equivalent monomial where the sum of the <m>y</m> and <m>z</m> exponents is smaller until we get a monomial of the form <m>x^a</m>, <m>x^a y</m>, or <m>x^a z</m>. If <m>n=1,2</m>, there is no such monomial; if <m>n\geqslant 3</m>, there is exactly one, namely, <me>\begin{cases} x^{n/3} &amp; \text{if} \ n\equiv 0 \mod 3 \\
  x^{(n-4)/3} y &amp; \text{if} \ n\equiv 1 \mod 3 \\
  x^{(n-5)/3} y &amp; \text{if} \ n\equiv 2 \mod 3 \end{cases}</me> This shows that <m>P</m> is the kernel of the map #empty Since <m>k[t^3,t^4,t^5] \subseteq k[t]</m> is a domain, we conclude that <m>P</m> is a prime ideal. In fact, <m>P</m> is a homogeneous ideal with the grading we considered above: our generators <m>f</m>, <m>g</m>, and <m>h</m> are now homogeneous, with <m>\deg(f) = 9</m>, <m>\deg(g) = 8</m>, and <m>\deg(h) = 10</m>.
            </p>
  
            <p>
              We showed in  () that <m>\mathcal{Z}(P)</m> is the variety <me>X = \{ (t^3, t^4, t^5) \mid t \in k \}.</me> Thus we conclude that <me>\mathcal{I}(X) = P = \left( x^3-yz, y^2-xz, z^2-x^2y \right),</me> and that <m>k[t^3,t^4,t^5] \cong k[x,y,z]/P</m> is the coordinate ring <m>k[X]</m>.
            </p>
  
          </example>

        </section>

        <section xml:id="sec-nullstell"><title>Nullstellensatz</title>

          <!--********************
          Section: Nullstellensatz
          *********************-->
          
          <blockquote>
            <p>
              <q>If you are strong, appear weak. But if you are weak, appear strong.</q>
            </p>
            <attribution>Sun Tzu</attribution>
          </blockquote>
    
          <lemma xml:id="lem-nullstellensatz-lemma-1">
            <title>Nullstellensatz Lemma 1</title>
          <statement>
            <p>
              Let <m>k</m> be a field, and <m>R=k[x_1,\dots,x_d]</m> be a polynomial ring. There is a bijection #empty
            </p>
          </statement>
    
            <proof>

    
              <p>
                Each <m>\fm = (x_1-a_1,\dots,x_d-a_d)</m> is a maximal ideal satisfying <m>R/\fm \cong k</m>. Moreover, these ideals are distinct: if <m>x_i-a_i,x_i-a'_i</m> are in the same ideal for <m>a_i\neq a'_i</m>, then the unit <m>a_i-a'_i</m> is in the ideal, so it is not proper. Therefore, our map is injective. To see that it is surjective, let <m>\fm</m> be a maximal ideal with <m>R/\fm \cong k</m>. Each class in <m>R/\fm</m> corresponds to a unique <m>a \in k</m>, so in particular each <m>x_i</m> is in the class of a unique <m>a_i \in k</m>. This means that <m>x_i - a_i \in \fm</m>, and thus <m>(x_1-a_1,\dots, x_d-a_d)\subseteq \fm</m>. Since <m>(x_1-a_i,\dots, x_d-a_i)</m> is a maximal ideal, we must have <m>(x_1-a_1,\dots, x_d-a_d)= \fm</m>.
              </p>
    
            </proof>
          </lemma>
    
            <example>
              <title></title>
    
              <p>
                Not all maximal ideals in <m>k[x_1, \ldots, x_d]</m> are necessarily of this form. For example, if <m>k = \mathbb{R}</m> and <m>d=1</m>, the ideal <m>(x^2+1)</m> is maximal, but <me>k[x]/(x^2+1) \cong \mathbb{C} \not\cong k.</me>
              </p>
    
            </example>
    
            <corollary xml:id="cor-nullstellensatz">
              <title>Nullstellensatz</title>
            <statement>
              <p>
                Let <m>S=k[x_1,\dots,x_d]</m> be a polynomial ring over an algebraically closed field <m>k</m>. There is a bijection \begin{center} #empty If <m>R</m> is a finitely generated <m>k</m>-algebra, we can write <m>R=S/I</m> for a polynomial ring <m>S</m>, and there is an induced bijection <me>\mathcal{Z}_k(I)\subseteq \mathbb{A}^d_k \longleftrightarrow \{ \text{maximal ideals $\fm$ of $R$}\}.</me>
              </p>
            </statement>
    
              <proof>
    
                <p>
                  The first part follows immediately from Lemma  and . Since we skipped the proof of Zariski's Lemma, we give a proof of the case when <m>k</m> is an uncountable field.
                </p>
    
                <p>
                  Let <m>k</m> be an uncountable algebraically closed field and <m>\fm</m> be any maximal ideal in <m>R</m>. Suppose that <m>L := R/\fm \not\cong k</m>. Then there exists some element <m>\alpha \in L</m> that is transcendental over <m>k</m>, since <m>k</m> is algebraically closed and <m>L</m> is an extension of <m>k</m>. Now consider the set <me>S = \left\lbrace \frac{1}{\alpha-c} \mid c \in k \right\rbrace.</me> If <m>S</m> is a linearly dependent set over <m>k</m>, then we can find finitely many <m>b_1, \ldots, b_n, c_1, \ldots, c_n \in k</m> such that <me>\frac{b_1}{\alpha-c_1} + \cdots + \frac{b_n}{\alpha-c_n} = 0.</me> Rewriting the left side as one fraction, the numerator is a polynomial in <m>\alpha</m> with coefficients in <m>k</m>. But <m>\alpha</m> is transcendental over <m>k</m>, so <m>S</m> is a linearly independent set. But <m>k</m> is uncountable, so <m>S</m> is uncountable, and that means that <m>\dim_k(L)</m> is uncountable. On the other hand, <m>L</m> is by construction algebra-finite over <m>k</m>. Since <m>k</m> is a field, being algebra-finite and module-finite over <m>k</m> are equivalent conditions, and thus <m>L</m> should be a finite dimensional vector space over~<m>k</m>. This is a contradiction, so we cannot have any transcendental element over <m>k</m> in <m>L</m>. Since <m>k</m> is algebraically closed, we conclude that <m>k = L</m>.
                </p>
    
                <p>
                  To show the second statement, fix an ideal <m>I</m> in <m>S</m>, and <m>R = S/I</m>. The maximal ideal ideals in <m>R</m> are in bijection with the maximal ideals <m>\fm</m> in <m>S</m> that contain <m>I</m>; those are the ideals of the form <m>(x_1-a_1, \ldots, x_d-a_d)</m> with <m>I \subseteq (x_1-a_1, \ldots, x_d-a_d)</m>. These are in bijection with the points <m>(a_1, \ldots, a_d) \in \mathbb{A}^d_k</m> satisfying <m>(a_1, \ldots, a_d) \in \mathcal{Z}_k(I)</m>.
                </p>
    
              </proof>
            </corollary>
    
            <theorem xml:id="thm-weak-nullstellensatz">
              <title>Weak Nullstellensatz</title>

              <statement>
    
              <p>
                Let <m>k</m> be an algebraically closed field. If <m>I</m> is a proper ideal in <m>R=k[x_1,\dots,x_d]</m>, then <m>\mathcal{Z}_k(I)\neq\varnothing</m>.
              </p>
            </statement>
    
    
              <proof>
    
                <p>
                  If <m>I\subseteq R</m> is a proper ideal, then by  there is a maximal ideal <m>\fm \supseteq I</m>, so <m>\mathcal{Z}(\fm)\subseteq \mathcal{Z}(I)</m>. Since <m>\fm=(x_1-a_1,\dots,x_d-a_d)</m> for some <m>a_i \in k</m>, <m>\mathcal{Z}(\fm)</m> is a point, and thus nonempty.
                </p>
    
              </proof>
            </theorem>
    
            <example>
              <title></title>
    
              <p>
                Many ideals define the same solution set. For example, in <m>R = k[x]</m>, the ideals <m>I_n = (x^n)</m>, for any <m>n \geqslant 1</m>, all define the same solution set <m>\mathcal{Z}_k(I_n) = \{ 0 \}</m>.
              </p>
    
            </example>
    
            <example xml:id="rabinowitzs-technique">
              <title>Rabinowitz's Technique</title>
    
              <p>
                Observe that, if <m>f(\vx)</m> is a polynomial and <m>\underline{a} \in \mathbb{A}^d</m>, <m>f(\underline{a})\neq 0</m> if and only if <m>f(\underline{a}) \in k</m> is invertible; equivalently, if there is a solution <m>y=b\in k</m> to <m>yf(\underline{a})-1=0</m>. In particular, a system of polynomial equations and inequations <me>\left\lbrace \begin{array}{c} f_1(\vx)=0 \\ \vdots \\ f_m(\vx)=0 \end{array}\right. \textrm{ and } \left\lbrace\begin{array}{c} g_1(\vx)\neq 0 \\ \vdots \\ g_n(\vx)\neq 0 \end{array}\right.</me> has a solution <m>\vx=\underline{a}</m> if and only if the system <me>\left\lbrace \begin{array}{c} f_1(\vx)=0 \\ \vdots \\ f_m(\vx)=0 \end{array}\right. \textrm{ and } \left\lbrace\begin{array}{c} y_1 g_1(\vx)-1=0 \\ \vdots \\ y_n g_n(\vx)-1=0 \end{array}\right.</me> has a solution <m>(\vx,\underline{y})=(\underline{a},\underline{b})</m>. In fact, this is equivalent to a system in one extra variable: <me>\left\lbrace \begin{array}{c} f_1(\vx)=0 \\ \vdots \\ f_m(\vx)=0 \\ y g_1(\vx)\cdots g_n(\vx)-1 = 0 \end{array}\right.</me>
              </p>
    
            </example>
    
            <theorem xml:id="thm-strong-nullstellensatz">
              <title>Strong Nullstellensatz</title>

              <statement>
    
              <p>
                Let <m>R=k[x_1,\dots,x_d]</m> be a polynomial ring over an algebraically closed field <m>k</m>. Let <m>I\subseteq R</m> be an ideal. The polynomial <m>f</m> vanishes on <m>\mathcal{Z}_k(I)</m> if and only if <m>f^n\in I</m> for some <m>n \geqslant 1</m>. In particular, <m>\cI(\cZ(J)) = \sqrt{J}</m>.
              </p>
            </statement>
    
    
              <proof>
    
                <p>
                  Suppose that <m>f^n\in I</m>. For each <m>\underline{a}\in \mathcal{Z}_k(I)</m>, <m>f(\underline{a})\in k</m> satisfies <m>f(\underline{a})^n =0 \in k</m>. Since <m>k</m> is a field, <m>f(\underline{a})=0</m>. Thus, <m>f\in \mathcal{Z}_k(I)</m> as well.
                </p>

                <p>
    
    Suppose that <m>f</m> vanishes along <m>\mathcal{Z}_k(I)</m>. This means that given any solution <m>\underline{a} \in \mathbb{A}^d</m> to the system determined by <m>I</m>, <m>f(\underline{a}) = 0</m>. In other words, the system <me>\left\lbrace \begin{array}{l} g(\vx)=0 \textrm{ for all } g \in I \\ f \neq 0 \end{array}\right.</me> has no solutions. By the discussion above, <m>\mathcal{Z}_k(I+(yf-1))=\varnothing</m> in a polynomial ring in one more variable. By the Weak Nullstellensatz, we have <m>I R[y]+(yf-1) = R[y]</m>, and equivalently <m>1 \in I R[y]+(yf-1)</m>. Write <m>I=(g_1(\vx),\dots,g_m(\vx))</m>, and
    
    <cd>
    \begin{center}
        $1 = r_0(\vx,y) (1-yf(\vx))+r_1(\vx,y) g_1(\vx) + \cdots + r_m(\vx,y) g_m(\vx).$
        \end{center}
    </cd>
    
    We can map <m>y</m> to <m>1/f</m> to get
    
    <cd>
    \begin{center}
        $1 = r_1(\vx,1/f) g_1(\vx) + \cdots + r_m(\vx,1/f) g_m(\vx)$
    \end{center}
    </cd>

                </p>
    
                <p>
                  in the fraction field of <m>R[y]</m>. Since each <m>r_i</m> is polynomial, there is a largest negative power of <m>f</m> occurring; say that <m>f^n</m> serves as a common denominator. We can multiply by <m>f^n</m> to obtain <m>f^n</m> as a polynomial combination of the <m>g</m>'s.
                </p>
    
              </proof>
            </theorem>

            <remark>
              <p>
                We showed before that <m>\mathcal{Z}(IJ) = \mathcal{Z}(I \cap J)</m>, despite the fact that we often have <m>IJ \neq I \cap J</m>. The  implies that <m>\sqrt{IJ} = \sqrt{I \cap J}</m>.
              </p>
            </remark>
    
            <corollary xml:id="cor-ord-pres-bij">
              <title>Ord-Pres-Bij</title>
    
              <p>
                Let <m>k</m> be an algebraically closed field. The associations <m>\cZ</m> and <m>\cI</m> induce order-reversing bijections EMPTY
              </p>
    
            </corollary>
    
            <lemma xml:id="lem-irreducible-variety-and-prime-vanishing-set">
              <title>Irreducible Variety and Prime Vanishing Set</title>
            <statement>
              <p>
                A variety <m>X \subseteq \A^d_k</m> is irreducible if and only if <m>\mathcal{I}(X)</m> is prime.
              </p>
            </statement>
    
              <proof>
    
                <p>
                  Suppose that <m>X</m> is reducible, say <m>X = V_1 \cup V_2</m> for two varieties <m>V_1</m> and <m>V_2</m> such that <m>V_1, V_2 \subsetneq X</m>. Note that this implies that <m>\mathcal{I}(X) \subsetneq \mathcal{I}(V_1)</m>, <m>\mathcal{I}(X) \subsetneq \mathcal{I}(V_2)</m>, and <m>\mathcal{I}(X) = \mathcal{I}(V_1) \cap \mathcal{I}(V_2)</m>. Then we can find <m>f \in \mathcal{I}(V_1)</m> such that <m>f \notin \mathcal{I}(V_2)</m>, and <m>g \in \mathcal{I}(V_2)</m> such that <m>g \notin \mathcal{I}(V_1)</m>. Notice that by construction <m>fg \in \mathcal{I}(V_1) \cap \mathcal{I}(V_2) \mathcal{I}(X)</m>, while <m>f \notin \mathcal{I}(X)</m> and <m>g \notin \mathcal{I}(X)</m>. Therefore, <m>\mathcal{I}(X)</m> is not prime.
                </p>
    
                <p>
                  Now assume that <m>\mathcal{I}(X)</m> is not prime, and fix <m>f, g \notin \mathcal{I}(X)</m> with <m>fg \in \mathcal{I}(X)</m>. Then <me>X \subseteq \mathcal{Z}(fg) = \mathcal{Z}(f) \cup \mathcal{Z}(g).</me> The intersections <me>V_f = \mathcal{Z}(f) \cap X = \mathcal{Z}(\mathcal{I}(X) + (f))
                  \quad \textrm{ and } \quad
                  V_g = \mathcal{Z}(g) \cap X = \mathcal{Z}(\mathcal{I}(X) + (g))</me> are varieties, and <m>X = V_f \cup V_g</m>. Finally, since <m>f \notin \mathcal{I}(X)</m>, then <m>X \not\subseteq V_f</m>. Similarly, <m>X \not\subseteq V_g</m>. Thus <m>X</m> is reducible.
                </p>
    
              </proof>
            </lemma>
    
            <example>
              <title></title>
    
              <p>
                In <m>k[x,y,z]</m>, the radical ideal <m>I = (xy,xz,yz)</m> corresponds to the variety <m>X</m> given by the union of the three coordinate axes. Each of these axes is a variety in its own right, corresponding to the ideals <m>(x,y)</m>, <m>(x,z)</m> and <m>(y,z)</m>. The three axes are the irreducible components of <m>X</m>. And indeed, <m>(x,y)</m>, <m>(x,z)</m> and <m>(y,z)</m> are the three minimal primes over <m>I</m>, and <me>(xy,xz,yz) = (x,y) \cap (x,z) \cap (y,z).</me> # Local Rings
              </p>
    
          </example>

        </section>
      </chapter>

      <chapter xml:id="ch-local-rings"><title>Local Rings</title>

        <!--****************
        Chapter: Local Rings
        *****************-->
  
        <section xml:id="sec-local-rings">
          <title>Local Rings</title>

          <!--****************
          Section: Local Rings
          *****************-->
          
          <blockquote>
            <p>
              <q>Virtue is too often merely local.</q>
            </p>
            <attribution>Samuel Johnson</attribution>
          </blockquote>

          <remark>

            <p>
              The study of local rings is central to commutative algebra. As we will see, life is easier in a local ring, so much so that we often want to localize so we can be in a local ring. A lot of the things we will say in this chapter have graded analogues: in some ways, <m>\N</m>-graded <m>k</m>-algebras and their homogeneous ideals behave like a local ring, where the homogenous maximal ideal plays the role of the maximal ideal.
            </p>
          </remark>
  
          <definition xml:id="defn-local-ring"><title>Local Ring</title>
          <statement>
            <p>
              A ring <m>R</m> is a <em>local ring</em> <idx><h>local ring</h></idx> if it has exactly one maximal ideal. We often use the notation <m>(R,\fm)</m> <idx><h><m>(R,\fm)</m></h></idx> to denote <m>R</m> and its maximal ideal, or <m>(R,\fm,k)</m><idx><h><m>(R,\fm,k)</m></h></idx> to also specify the residue field <m>k=R/\fm</m>.
            </p>
  
            <p>
              Some people reserve the term <em>local ring</em> for a noetherian local ring, and call what we have defined a <em>quasilocal ring</em><idx><h>quasilocal ring</h></idx>; we will not follow this convention here.
            </p>
          </statement>
          </definition>
  
          <lemma xml:id="lem-local-if-nonunits-form-an-ideal"><title>Local if Nonunits Form an Ideal</title>
  
  
            <statement>
              
  
              <p>
                A ring <m>R</m> is local if and only if the set of non-units of <m>R</m> forms an ideal.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                If <m>R</m> is a local with maximal ideal <m>\fm</m>, then every nonunit must be in <m>\fm</m>, and <m>\fm</m> contains no nonunits, so <m>\fm</m> must be the set of nonunits. Conversely, if the set of nonunits is an ideal, that must be the only maximal ideal, since any other element in <m>R</m> is a unit.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-zpn-is-local"><title><m>\Z/(p^n)</m> is Local</title>
  
  
            <statement>
              
  
              <p>
                The ring <m>\Z/(p^n)</m> is local with maximal ideal <m>(p)</m>.
              </p>
  
            </statement>
  
            <solution>
  
              <p>
                Let <m>R = \mathbb{Z}/(p^n)</m> for some prime <m>p</m> and <m>n\geqslant 1</m>. We want to show that <m>R</m> has a unique maximal ideal.
              </p>
  
              <p>
                Recall that a proper ideal <m>M</m> in <m>R</m> is maximal if and only if <m>R/M</m> is a field. Let <m>M</m> be a proper ideal of <m>R</m>. Since <m>\mathbb{Z}</m> is a PID, it follows that <m>M = (m)</m> for some <m>0 \leqslant m \leqslant p^n-1</m>.
              </p>
  
              <p>
                Now, note that <m>R/M</m> is an integral domain since <m>M</m> is a prime ideal of <m>R</m>. By the <xref provisional="cite"/> [[Mathematics/Number Theory/Results/Theorem - Sunzi's Remainder Theorem|Chinese Remainder Theorem]], we have the following isomorphism of rings: <me>R/M \cong \mathbb{Z}/(p^{n_1}) \times \cdots \times \mathbb{Z}/(p^{n_k}),</me> where <m>n_1,\ldots,n_k</m> are positive integers such that <m>n_1 + \cdots + n_k = n</m>, and <m>k</m> is the number of distinct prime factors of <m>m</m>.
              </p>
  
              <p>
                Since <m>R/M</m> is a product of fields, it follows that <m>M</m> is maximal in <m>R</m>. Hence, <m>R</m> has a unique maximal ideal <m>(p)</m>, since <m>(p)</m> is the only proper ideal of <m>R</m> that contains <m>p</m>.[^5
              </p>
  
            </solution>
          </example>
  
          <example xml:id="ex-power-series-ring-over-field-is-local"><title>Power Series Ring over Field is Local</title>
  
  
            <statement>
              
  
              <p>
                The ring of power series <m>k[[ \vx ]]</m> over a field <m>k</m> is local.
              </p>
  
            </statement>
  
            <solution>
  
              <p>
                Indeed, one can show that a power series has an inverse if and only if its constant term is nonzero; this can be done explicitly, by writing down the conditions for a power series to be the inverse of another. The unique maximal ideal is <m>(\vx)</m>. More generally, <m>[[k x_1, \ldots, x_d ]]</m> is local with maximal ideal <m>(x_1, \ldots, x_d)</m>.
              </p>
  
            </solution>
          </example>
  
          <example xml:id="ex-z_p-is-local"><title>Z_(p) is Local</title>
  
  
            <statement>
              
  
              <p>
                The ring <m>\Z_{(p)} = \{ \frac{a}{b} \in \Q \ | \ p\nmid b \text{ when in lowest terms}\}</m> is a local ring with maximal ideal <m>(p)</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-polynomial-rings-are-not-local"><title>Polynomial Rings are not Local</title>
  
  
            <statement>
              
  
              <p>
                A polynomial ring over a field is certainly not local; we have seen it has so many maximal ideals!
              </p>
  
            </statement>
          </example>
  
          <definition xml:id="defn-ring-characteristic"><title>Ring Characteristic</title>
          <statement>
            <p>
              Let R be a commutative ring. The <em>characteristic</em> <idx><h>characteristic of a ring</h></idx> of <m>R</m>, written <m>\char(R)</m>, is the unique non-negative generator of the kernel of the unique ring homomorphism <m>\varphi: \Z \to R</m>. (Recall <m>\varphi(n) = n \cdot 1_R</m>.)
            </p>
  
            <p>
              Equivalently, <m>\char(R)</m> is the smallest positive integer <m>n</m> such that <m>n\cdot 1_R=\underbrace{1_R+\cdots+1_R}_{n}=0_R</m>, if such and integer exists, and <m>\char(R) = 0</m> otherwise.
            </p>
          </statement>
          </definition>
  
          <proposition xml:id="prop-characteristic-in-local-rings"><title>Characteristic in Local Rings</title>
  
  
            <statement>
              
  
              <p>
                Let <m>(R,\fm,k)</m> be a local ring. Then one of the following holds: 
                (a) <m>\char(R)=\char(k)=0</m>. We say that <m>R</m> has <em>equal characteristic zero</em><idx><h>equal characteristic zero</h></idx>. 
                (b) <m>\char(R)=0</m>, <m>\char(k)=p</m> for a prime <m>p</m>, so <m>R</m> has <em>mixed characteristic</em> <m>(0,p)</m><idx><h>mixed characteristic <m>(0,p)</m></h></idx>
                (c) <m>\char(R)=\char(k)=p</m> for a prime <m>p</m>, so <m>R</m> has <em>equal characteristic</em> <m>p</m><idx><h>equal characteristic <m>p</m></h></idx>. 
                (d) <m>\char(R)=p^n</m>, <m>\char(k)=p</m> for a prime <m>p</m> and an integer <m>n&gt;1</m>. If <m>R</m> is reduced, then one of the first three cases holds.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Since <m>k</m> is a quotient of <m>R</m>, the characteristic of <m>R</m> must be a multiple of the characteristic of <m>k</m>, since the map <m>\Z\longrightarrow k</m> factors through <m>R</m>. We must think of <m>0</m> as a multiple of any integer for this to make sense. Now <m>k</m> is a field, so its characteristic is <m>0</m> or <m>p</m> for a prime <m>p</m>. If <m>\char(k)=0</m>, then necessarily <m>\char(R)=0</m>. If <m>\char(k)=p</m>, we claim that <m>\char(R)</m> must be either <m>0</m> or a power of <m>p</m>. Indeed, if we write <m>\char(R)=p^n \cdot a</m> with <m>a</m> coprime to <m>p</m>, note that <m>p\in \fm</m>, so if <m>a \in \fm</m>, we have <m>1\in (p,a)\subseteq \fm</m>, which is a contradiction. Since <m>R</m> is local, this means that <m>a</m> is a unit. But then, <m>p^n a=0</m> implies <m>p^n=0</m>, so the characteristic must be <m>p^n</m>.
              </p>
  
            </proof>
          </proposition>

          <remark>
            <p>
              If <m>R</m> is an <m>\N</m>-graded <m>k</m>-algebra with <m>R_0 = k</m>, and <m>\fm = \bigoplus_{n &gt; 0} R_0</m> is the homogeneous maximal ideal, <m>R</m> and <m>\fm</m> behave a lot like a local ring and its maximal ideal, and we sometimes use the suggestive notation <m>(R,\fm)</m> to refer to it. Many properties of local rings also apply to the graded setting, so given a statement about local rings, you might take it as a suggestion that there might be a corresponding statement about graded rings — a statement that, nevertheless, still needs to be proved. There are usually some changes one needs to make to the statement; for example, if a theorem makes assertions about the ideals in a local ring, the corresponding graded statement will likely only apply to homogeneous ideals, and a theorem about finitely generated modules over a local ring will probably translate into a theorem about graded modules in the graded setting.
            </p>
          </remark>
    
        </section>

        <section xml:id="sec-localization">
          <title>Localization</title>

          <!--*****************
          Section: Localization
          ******************-->
          
          <blockquote>
            <p>
              <q>The best way to be global is to be local.</q>
            </p>
            <attribution>Alex Atala</attribution>
          </blockquote>

          <example xml:id="ex-powers-of-element-is-multiplicatively-closed"><title>Powers of Element is Multiplicatively Closed</title>
    
    
            <statement>
              
    
              <p>
                Let <m>R</m> be a ring. For any <m>f\in R</m>, the set <m>W=\{1, f, f^2, f^3, \dots\}</m> is a multiplicative set.
              </p>
    
            </statement>
          </example>
    
          <example xml:id="ex-complement-of-prime-ideal-is-multiplicative"><title>Complement of Prime Ideal is Multiplicative</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring. If <m>P \subseteq R</m> is a prime ideal, the set <m>W=R \setminus P</m> is multiplicative
              </p>
  
            </statement>
          </example>
  
          <definition xml:id="defn-regular-element"><title>Regular Element</title>
          <statement>
            <p>
              Let <m>R</m> be a ring. An element that is not a zerodivisor is called a <em>nonzerodivisor</em><idx><h>nonzerodivisor</h></idx> or a <em>regular element</em><idx><h>regular element</h></idx>.
            </p>
          </statement>
          </definition>
  
          <example xml:id="ex-regular-elements-are-multiplicative"><title>Regular Elements are Multiplicative</title>
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring. The set of regular elements in <m>R</m> forms a multiplicatively closed subset.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-intersection-of-multiplicative-sets-is-multiplicative"><title>Intersection of Multiplicative Sets is Multiplicative</title>
  
  
            <statement>
              
  
              <p>
                An arbitrary intersection of multiplicatively closed subsets is multiplicatively closed. In particular, for any family of primes <m>\{\fp _{\lambda} \}</m>, the complement of <m>\bigcup_{\lambda} \fp _{\lambda}</m> is multiplicatively closed.
              </p>
  
            </statement>
          </example>
  
          <definition xml:id="defn-localization"><title>Localization of a Ring</title>
          <statement>
            <p>
              Let <m>R</m> be a ring, and <m>W</m> be a multiplicative set with <m>0\notin W</m>. The <em>localization</em><idx><h>localization of a ring</h></idx> of <m>R</m> at <m>W</m> is the ring <me>W^{-1} R :=  \left\{ \frac{r}{w} \ \Big| \ r\in R, w\in W \right\} / \sim</me>where <m>\sim</m> is the equivalence relation <me>\displaystyle \frac{r}{w}\sim \frac{r'}{w'} \textrm{ if there exists } u\in W : u(rw'-r'w)=0.</me> The operations are given by <me>\frac{r}{v}+\frac{s}{w}=\frac{rw+sv}{vw} \quad \text{and} \quad  \frac{r}{v}\frac{s}{w}=\frac{rs}{vw}.</me>The zero in <m>W^{-1}R</m> is <m>\frac{0}{1}</m> and the identity is <m>\frac{1}{1}</m>.
            </p>

            <p>
              EMPTY <idx><h><m>I\cap R</m></h></idx>
            </p>
          </statement>
          </definition>

          <remark>
            <p>
              Note that we write elements in <m>W^{-1}R</m> in the form <m>\frac{r}{w}</m> even though they are equivalence classes of such expressions.
            </p>
          </remark>
  
          <example xml:id="ex-field-of-fractions-is-a-localization"><title>Field of Fractions is a Localization</title>
  
  
            <statement>
              
  
              <p>
                Note that if <m>R</m> is a domain, the equivalence relation simplifies to <m>rw'=r'w</m>, so <m>R \subseteq W^{-1}R \subseteq \mathrm{Frac}(R)</m>, and in particular <m>W^{-1}R</m> is a domain too. In particular, <m>\mathrm{Frac}(R)</m> is a localization of <m>R</m>.
              </p>
  
            </statement>
          </example>

          <remark>
            <p>
              In the localization of <m>R</m> at <m>W</m>, every element of <m>W</m> becomes a unit. The following universal property says roughly that <m>W^{-1}R</m> is the smallest <m>R</m>-algebra in which every element of <m>W</m> is a unit.
            </p>
          </remark>
  
          <proposition xml:id="prop-ump-of-localizations"><title>UMP of Localizations</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, and <m>W</m> a multiplicative set with <m>0\notin W</m>. Let <m>S</m> be an <m>R</m>-algebra in which every element of <m>W</m> is a unit. Then there is a unique homomorphism <m>\alpha</m> such that the following diagram commutes:<me>\begin{CD}
                R@&gt;&gt;&gt;W\inv R\\
                @VVV \\ 
                S
                \end{CD}</me> #fix where the vertical map is the structure homomorphism and the horizontal map is the canonical homomorphism.
              </p>
  
            </statement>
          </proposition>
  
          <example xml:id="ex-localization-of-powers-of-element"><title>Localization of Powers of Element</title>
  
  
            <statement>
              
  
              <p>
                For <m>f\in R</m> and <m>W=\{1, f, f^2, f^3, \dots\} = \{ f^n \mid n \geqslant 0 \}</m>, we usually write <m>R_f</m><idx><h><m>R_f</m></h></idx> for <m>W^{-1}R</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-total-ring-of-fractions"><title>Total Ring of Fractions</title>
  
  
            <statement>
              
  
              <p>
                When <m>W</m> is the set of nonzerodivisors on <m>R</m>, we call <m>W^{-1}R</m> <em>the total ring of fractions</em><idx><h>total ring of fractions</h></idx> of <m>R</m>. When <m>R</m> is a domain, this is just the fraction field of <m>R</m>, and in this case this coincides with the localization at the prime <m>(0)</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-localization-at-a-prime"><title>Localization at a Prime</title>
  
  
            <statement>
              
  
              <p>
                For a prime ideal <m>P</m> in <m>R</m>, we generally write <m>R_{P}</m><idx><h><m>R_P</m></h></idx> for <m>(R\setminus P)^{-1} R</m>, and call it the <em>localization</em> of <m>R</m> at <m>P</m><idx><h>localization at a prime</h></idx>. Given an ideal <m>I</m> in <m>R</m>, we sometimes write <m>I_P</m> to refer to <m>I R_P</m>, the image of <m>I</m> via the canonical map <m>R \to R_P</m>. Notice that when we localize at a prime <m>P</m>, the resulting ring is a local ring <m>(R_P,P_{P})</m>. We can think of the process of localization at <m>P</m> as <em>zooming in</em> at the prime <m>P</m>. Many properties of an ideal <m>I</m> can be checked <em>locally</em>, by checking them for <m>I R_P</m> for each prime <m>P \in V(I)</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-kx_1dotsx_d_x_1dotsx_d-is-local"><title><m>k[x_1,\dots,x_d]_{(x_1,\dots,x_d)}</m> is Local</title>
  
  
            <statement>
              
  
              <p>
                A local ring one often encounters is <m>k[x_1,\dots,x_d]_{(x_1,\dots,x_d)}</m>. We can consider this as the ring of rational functions that in lowest terms have a denominator with nonzero constant term. Note that we can talk about lowest terms since the polynomial ring is a UFD.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-local-ring-of-the-point"><title>Local Ring of the Point</title>
  
  
            <statement>
              
  
              <p>
                If <m>k</m> is algebraically closed and <m>I</m> is a radical ideal, then <m>k[x_1,\dots,x_d]/I= k[X]</m> is the coordinate ring of some affine variety, and <m>(x_1,\dots,x_d)=\fm_{\underline{0}}</m> is the ideal defining the origin (as a point in <m>X \subseteq \mathbb{A}^d</m>). Then we call <me>k[X]_{\fm_{\underline{0}}} :=  (k[x_1,\dots,x_d]/I)_{(x_1,\dots,x_d)}</me>the <em>local ring of a point</em><idx><h>local ring of a point</h></idx> <m>\underline{0} \in X</m>; some people write this as <m>\mathcal{O}_{X,\underline{0}}</m>. The radical ideals of this ring consist of radical ideals of <m>k[X]</m> that are contained in <m>\fm_{\underline{0}}</m>, which by the Nullstellensatz correspond to subvarieties of <m>X</m> that contain <m>\underline{0}</m>. Similarly, we can define the local ring at any point <m>\underline{a} \in X</m>.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-localization-ideals"><title>Localization Ideals</title>
  
  
            <statement>
              
  
              <p>
                Let <m>W</m> be multiplicatively closed in <m>R</m>. (a) If <m>I</m> is an ideal in <m>R</m>, then <m>W^{-1} I = I W^{-1} R</m>. (b) If <m>I</m> is an ideal in <m>R</m>, then <m>W^{-1} I \cap R = \{ r \in R \ | \  wr\in I \textrm{ for some } w\in W\}</m>. (c) If <m>J</m> is an ideal in <m>W^{-1}R</m>, then <m>W^{-1}(J \cap R) = J</m>. (d) If <m>\fp</m> is prime and <m>W \cap \fp=\es</m>, then <m>W^{-1}\fp =\fp (W^{-1}R)</m> is prime. (e) The map <m>\Spec(W^{-1} R) \to \Spec(R)</m> is injective, with image <me>\{\fp \in \Spec(R) \ | \ \fp \cap W = \varnothing\}.</me>
              </p>
  
            </statement>
  
            <proof>
  
              <p><ol>
                <li>
                            <p>
                Note that <me>W^{-1} I = \left\{ \frac{a}{w} \mid a \in I, w \in W \right\},</me>while <m>I W^{-1}</m> is the ideal generated by all the elements of the form <me>a \cdot \frac{s}{w} \quad \textrm{where } s \in R, w \in W, a \in I.</me>Since we can rewrite <me>a \cdot \frac{s}{w} = \frac{sa}{w}</me>and <m>sa \in I</m>, we conclude that <m>W^{-1} I = I W^{-1} R</m>.
              </p>
                </li>
  
                <li>
                            <p>
                If <m>wr \in I</m> for some <m>w \in W</m>, then <me>\frac{r}{1} = \frac{wr}{w} \in W^{-1} I.</me>Conversely, if <m>r \in W^{-1} I \cap R</m>, then that means that <me>\frac{r}{1} = \frac{a}{w} \textrm{ for some } a \in I, w \in W.</me>By definition of the equivalence relation defining <m>W^{-1}R</m>, this means that there exists <m>u \in W</m> such that<me>u(rw - a \cdot 1) = 0 \Leftrightarrow  r(uw) = wa \in I.</me>Since <m>W</m> is multiplicatively closed, <m>uw \in W</m>, and thus the element <m>t := uw \in W</m> satisfies <m>tr \in I</m>.
              </p>
                </li>
  
                <li>
                            <p>
                The containment <m>W^{-1}(J \cap R) \subseteq J</m> holds for general reasons: given any map <m>f</m>, and a subset <m>J</m> of the target of <m>f</m>, <m>f(f^{-1}(J)) \subseteq J</m>. On the other hand, if <m>\frac{a}{w} \in J</m>, then <m>\frac{a}{1} \in J</m>, since its a unit multiple of an element of <m>J</m>, and thus <m>a \in J \cap R</m>, so <m>\frac{a}{w} \in W^{-1}(J \cap R)</m>.
              </p>
                </li>
  
                <li>
                            <p>
                First, since <m>W\cap P =\varnothing</m>, and <m>P</m> is prime, no element of <m>W</m> kills <m>\bar{1}=1 + P</m> in <m>R/P</m>, so <m>\bar{1}/1</m> is nonzero in <m>W^{-1}(R/P)</m>. Thus, <m>W^{-1}R / W^{-1}P \cong W^{-1}(R/P)</m> is nonzero, and a localization of a domain, hence is a domain. Thus, <m>W^{-1}P</m> is prime.
              </p>
                </li>
  
                <li>
                            <p>
                First, by part b), the map <m>P \mapsto W^{-1}P</m>, for <m>S=\{P \in \Spec(R) \ | \ P \cap W = \varnothing\}</m> sends primes to primes. We claim that
              </p>
                </li>
  
              </ol></p>
  
              <p>
                <m>\Spec(W^{-1} R)</m> <m>Q</m> <m>W^{-1}P</m>
              </p>
  
              <p>
                #empty
              </p>
  
              <p>
                <m>S</m> <m>Q \cap R</m> <m>P</m> are inverse maps.
              </p>
  
              <p>
                We have already seen that <m>J=(J\cap R) W^{-1}R</m> for any ideal <m>J</m> in <m>W^{-1}R</m>.
              </p>
  
              <p>
                If <m>W\cap P=\varnothing</m>, then using part a) and the definition of prime, we have that <me>W^{-1}P \cap R = \lbrace r \in R \, \mid \, rw \in P \textrm{ for some } w \in W \rbrace = \lbrace r \in R \, \mid \, r \in P \rbrace = P.</me>
              </p>
  
            </proof>
          </lemma>
  
          <corollary xml:id="cor-map-on-spec-localization-prime"><title>Map on Spec Localization Prime</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring and <m>P</m> be a prime ideal in <m>R</m>. The map on spectra induced by the canonical map <m>R \to R_P</m> corresponds to the inclusion <me>\{ \fq \in \Spec(R) \, \mid \, \fq \subseteq P \} \subseteq \Spec(R).</me>
              </p>
  
            </statement>
          </corollary>
  
          <definition xml:id="defn-module-localization"><title>Module Localization</title>
          <statement>
            <p>
              Let <m>R</m> be a ring, <m>W</m> be a multiplicative set, and <m>M</m> an <m>R</m>-module. The <em>localization</em><idx><h>localization of a module</h></idx><idx><h><m>W\inv M</m></h></idx> of <m>M</m> at <m>W</m> is the <m>W^{-1}R</m>-module <me>W^{-1} M := \left\{ \frac{m} {w} \ \Big| \ m\in M, w\in W \right\} / \sim</me>where <m>\sim</m> is the equivalence relation <m>\displaystyle \frac{m}{w}\sim \frac{m'}{w'}</m> if <m>u(mw'-m'w)=0</m> for some <m>u\in W</m>. The operations are given by <me>\frac{m}{v}+\frac{n}{w}=\frac{mw+nv}{vw} \quad \text{and} \quad \frac{r}{v} \frac{m}{w}=\frac{rm}{vw}.</me>
            </p>
          </statement>
          </definition>

          <p>We will use the notations <m>M_f</m><idx><h><m>M_f</m></h></idx> and <m>M_P</m><idx><h><m>M_P</m></h></idx> analagously to <m>R_f</m> and <m>R_P</m>.</p>

          <p>If <m>R</m> is not a domain, the canonical map <m>R\to W\inv R</m> is not necessarily injective.</p>
  
          <example xml:id="ex-kxyxy-has-non-injective-canonical-maps"><title><m>k[x,y]/(xy)</m> has Non Injective Canonical Maps</title>
  
  
            <statement>
              <p></p>
  
            </statement>
  
            <solution>
  
              <p>
                Consider <m>R = k[x,y]/(xy)</m>. The canonical maps <m>R \longrightarrow R_{(x)}</m> and <m>R \longrightarrow R_y</m> are not injective, since in both cases <m>y</m> is invertible in the localization, and thus<me>x \mapsto \frac{x}{1} = \frac{xy}{y} = \frac{0}{y} = \frac{0}{1}.</me>
              </p>
  
            </solution>
          </example>
  
          <definition xml:id="defn-annihilator"><title>Annihilator</title>
          <statement>
            <p>
              The <em>annihilator</em><idx><h>annihilator</h></idx><idx><h><m>\ann(M)</m></h></idx> of a module <m>M</m> is the ideal<me>\ann(M) :=  \lbrace r \in R \mid rm = 0 \textrm{ for all } m \in M \rbrace.</me>
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-colon-ideal"><title>Colon Ideal</title>
          <statement>
            <p>
              Let <m>I</m> and <m>J</m> be ideals in a ring <m>R</m>. The <em>colon</em><idx><h>colon</h></idx> of <m>I</m> and <m>J</m> is the ideal<me>(J : I) :=  \lbrace r \in R \mid rI \subseteq J \rbrace.</me>More generally, if <m>M</m> and <m>N</m> are submodules of some <m>R</m>-module <m>A</m>, the colon of <m>N</m> and <m>M</m> is<me>(N :_R M) :=  \lbrace r \in R \mid rM \subseteq N \rbrace.</me>
            </p>
          </statement>
          </definition>
  
          <example xml:id="ex-annihilators-and-colons-are-ideals"><title>Annihilators and Colons are Ideals</title>
  
  
            <statement>
              
  
              <p>
                The annihilator of <m>M</m> is an ideal in <m>R</m>, and<me>\ann (M) = (0 :_R M).</me>Moreover, any colon <m>(N :_R M)</m> is an ideal in <m>R</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-mcong-rannm"><title><m>M\cong R/\ann(M)</m></title>
  
  
            <statement>
              
  
              <p>
                If <m>M = R m</m> is a cyclic <m>R</m>-module, then <m>M \cong R/I</m> for some ideal <m>I</m>.
              </p>
  
            </statement>
  
            <solution>
  
              <p>
                Notice that <m>I \cdot (R/I) = 0</m>, and that given an element <m>g \in R</m>, we have <m>g (R/I) = 0</m> if and only if <m>g \in I</m>. Therefore, <m>M \cong R/\ann(M)</m>.
              </p>
  
            </solution>
          </example>
  
          <example xml:id="ex-ideals-contained-in-annihilator"><title>Ideals Contained in Annihilator</title>
  
  
            <statement>
              
  
              <p>
                Let <m>M</m> be an <m>R</m>-module. If <m>I</m> is an ideal in <m>R</m> such that <m>I \subseteq \ann(M)</m>, then <m>I M = 0</m>, and thus <m>M</m> is naturally an <m>R/I</m>-module with the <em>same</em> structure it has as an <m>R</m>-module, meaning<me>(r+I) \cdot m = rm</me>for each <m>r \in R</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-annihilator-of-quotient-is-colon"><title>Annihilator of Quotient is Colon</title>
  
  
            <statement>
              
  
              <p>
                If <m>N \subseteq M</m> are <m>R</m>-modules, then <m>\ann(M/N) = (N :_R M)</m>.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-zero-in-localization"><title>Zero in Localization</title>
  
  
            <statement>
              
  
              <p>
                Let <m>M</m> be an <m>R</m>-module, and <m>W</m> a multiplicative set. Then the following are equivalent: - <m>\frac{m}{w}\in W^{-1}M \ \text{ is zero}</m> - <m>vm=0 \textrm{ for some } v\in W</m> - <m>\ann_R(m) \cap W \neq \es.</m> Note in particular that this holds for <m>w=1</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                For the first equivalence, we use the equivalence relation defining <m>W^{-1}R</m> to note that <m>\frac{m}{w}=\frac{0}{1}</m> in <m>W^{-1}M</m> if and only if there exists some <m>v\in W</m> such that <m>0=v(1m-0w)=vm</m>. The second equivalence just comes from the definition of the annihilator.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-canonical-localization-map-and-injectivity"><title>Canonical Localization Map and Injectivity</title>
  
  
            <statement>
              
  
              <p>
                As a consequence of  <xref ref="lem-zero-in-localization"/>, it follows that if <m>R</m> is a domain, then the canonical map <m>R \to W^{-1}R</m> is always injective for any multiplicatively closed set <m>W</m>, since every nonzero <m>r \in R</m> has <m>\ann(r) = 0</m>.
              </p>
  
              <p>
                Notice, however, that even when <m>R</m> is a domain, the elements in a module <m>M</m> may still have nontrivial annihilators, and thus <m>M \to W^{-1} M</m> may fail to be injective.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-induced-localization-module-homomorphism"><title>Induced Localization Module Homomorphism</title>
  
            <statement>
              
              <p>
                If <m>M\xrightarrow{\alpha} N</m> is an <m>R</m>-module homomorphism, then there is a <m>W^{-1}R</m>-module homomorphism <m>W^{-1}M \xrightarrow{W^{-1}\alpha} W^{-1}N</m><idx><h><m>W\inv\a</m></h></idx> given by the rule <m>W^{-1}\alpha (\frac{m}{w}) = \frac{\alpha(m)}{w}</m>.
              </p>
  
            </statement>
  
            <solution>
  
              <p>
                Proving this lemma actually requires some homological algebra that we do not have, so for now we will just believe it.
              </p>
  
            </solution>
          </example>

          <lemma xml:id="lem-hom-localization"><title>Hom and Localization</title>
            <statement>
              <p>
                Let <m>R</m> be a noetherian ring, <m>W</m> be a multiplicative set, <m>M</m> be a finitely generated <m>R</m>-module, and <m>N</m> an arbitrary <m>R</m>-module. Then, <me>\Hom_{W^{-1}R}(W^{-1}M , W^{-1}N) \cong W^{-1} \Hom_R(M,N).</me> In particular, if <m>P</m> is prime, <me>\Hom_{R_{P}}(M_{P} , N_{P}) \cong \Hom_R(M,N)_{P}.</me>
              </p>
            </statement>
          </lemma>
  
          <theorem xml:id="thm-localization-is-exact"><title>Localization is Exact</title>
  
  
            <statement>
              
  
              <p>
                Given a short exact sequence of <m>R</m>-modules <me>\begin{CD}
  0@&gt;&gt;&gt;A@&gt;&gt;&gt;B@&gt;&gt;&gt;C@&gt;&gt;&gt;0
  \end{CD}</me>and a multiplicative set <m>W</m>, the sequence <me>\begin{CD}
  0@&gt;&gt;&gt;W\inv A@&gt;f&gt;&gt;W\inv B@&gt;g&gt;&gt;W\inv C@&gt;&gt;&gt;0
  \end{CD}</me>is also exact.
              </p>
  
            </statement>
          </theorem>
  
          <example xml:id="ex-localization-preserves-inclusions"><title>Localization Preserves Inclusions</title>
  
  
            <statement>
              
  
              <p>
                It follows from this <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Zero in Localization|Lemma]] that if <m>\begin{CD}N@&gt;\a&gt;&gt;M\end{CD}</m> is injective, then <m>W^{-1}\alpha</m> is also injective, since<me>0=W^{-1}\alpha \left( \frac{n}{w} \right) = \frac{\alpha(n)}{w} \ \implies \ 0=u\alpha(n)=\alpha(un) \textrm{ for some }  u \in W \implies un=0 \implies \frac{n}{w}=0.</me>So this explains some of <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Localization is Exact|Theorem]], since it shows that localization preserves inclusions.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-localizations-and-quotients-commute"><title>Localizations and Quotients Commute</title>
  
  
            <statement>
              
  
              <p>
                Given a submodule <m>N</m> of <m>M</m>, we can apply the <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Localization is Exact|Theorem]] to the short exact sequence<me>\begin{CD}
                0@&gt;&gt;&gt;N@&gt;&gt;&gt;M@&gt;&gt;&gt;M/N@&gt;&gt;&gt;0
                \end{CD}</me>and conclude that that <m>W^{-1}(M/N) \cong W^{-1}M / W^{-1}N</m>.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-localization-commutes-with-finite-intersections"><title>Localization Commutes with Finite Intersections</title>
  
            <statement>
              
              <p>
                Let <m>M</m> be a module, and <m>N_1,\dots,N_t</m> be a finite collection of submodules. Let <m>W</m> be a multiplicative set. Then,<me>W^{-1} (N_1 \cap \cdots \cap N_t) = W^{-1} N_1 \cap \cdots \cap W^{-1} N_t \subseteq W^{-1}M.</me> 
              </p>
  
            </statement>

            <proof>
              <p>
                The containment <m>W^{-1} (N_1 \cap \cdots \cap N_t) \subseteq W^{-1} N_1 \cap \cdots \cap W^{-1} N_t</m> is clear. Elements of <m>W^{-1} N_1 \cap \cdots \cap W^{-1} N_t</m> are of the form <m>\frac{n_1}{w_1}= \cdots = \frac{n_t}{w_t}</m>; we can find a common denominator to realize this in <m>W^{-1} (N_1 \cap \cdots \cap N_t)</m>.
              </p>
            </proof>
          </lemma>

        </section>

        <section xml:id="sec-nak">
          <title>NAK</title>

          <!--********
          Section: NAK
          *********-->
          
          <blockquote>
            <p>
              <q>The fundamental result of commutative algebra, and its power and elegance are second to none.</q>
            </p>
            <attribution>Jürgen Herzog, on NAK</attribution>
          </blockquote>


          <remark>
            <p>
              We will now show a very simple but extremely useful result known as Nakayama's Lemma. Nakayama himself claimed that this should be attributed to Krull and Azumaya, but it's not clear which of the three actually had the commutative ring statement first. So some authors (e.g., Matsumura) prefer to refer to it as NAK. There are actually a range of statements, rather than just one, that go under the banner of Nakayama's Lemma a.k.a. NAK.
            </p>
          </remark>

          <proposition xml:id="prop-nak-1"><title>NAK 1</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, <m>I</m> an ideal, and <m>M</m> a finitely generated <m>R</m>-module. If <m>IM = M</m>, then: (a) there is an element <m>r\in 1 + I</m> such that <m>rM=0</m>, and (b) there is an element <m>a\in I</m> such that <m>am=m</m> for all <m>m\in M</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Let <m>M = R m_1 + \cdots + R m_s</m>. By assumption, we have equations <me>m_1 = a_{11} m_1 + \cdots + a_{1s} m_s \ , \ \dots \ , \ m_s = a_{s1} m_1 + \cdots + a_{ss} m_s,</me>with <m>a_{ij}\in I</m>. Setting <m>A=[a_{ij}]</m> and <m>v=[m_i]</m>, we have a matrix equation <m>Av=v</m>. By the <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Determinantal Technique|Determinantal Technique]], the element <m>\det(I_{s \times s} - A) \in R</m> kills each <m>m_i</m>, and hence it kills <m>M</m>. Since <m>\det(I_{s \times s}-A)\equiv \det(I_{s \times s}) \equiv 1 (\!\pmod I)</m>, this determinant is the element <m>r</m> we seek for the first statement. For the latter statement, set <m>a=1-r</m>, which is in <m>I</m> and satisfies <m>am=m-rm=m</m> for all <m>m\in M</m>.
              </p>
  
            </proof>
          </proposition>
  
          <theorem xml:id="thm-nak-2"><title>NAK 2</title>
  
  
            <statement>
              
  
              <p>
                Let <m>(R,\fm,k)</m> be a local ring, and <m>M</m> be a finitely generated module. If <m>M=\fm M</m>, then <m>M=0</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - NAK 1|NAK1]], there exists an element <m>r\in 1+\fm</m> that annihilates <m>M</m>. Notice that <m>1 \notin \fm</m>, so any such <m>r</m> must be outside of <m>\fm</m>, and thus a unit. Multiplying by its inverse, we conclude that <m>1</m> annihilates <m>M</m>, or equivalently, that <m>M=0</m>.
              </p>
  
            </proof>
          </theorem>
  
          <theorem xml:id="thm-nak-3"><title>NAK 3</title>
  
  
            <statement>
              
  
              <p>
                Let <m>(R,\fm,k)</m> be a local ring, and <m>M</m> be a finitely generated module, and <m>N</m> a submodule of <m>M</m>. If <m>M = N + \fm M</m>, then <m>M = N</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                By taking the quotient by <m>N</m>, we see that <me>M/N = (N + \fm M)/N = \fm \left( M/N\right).</me> By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - NAK 2|NAK2]], <m>M = N</m>.
              </p>
  
            </proof>
          </theorem>
  
          <theorem xml:id="thm-nak-4"><title>NAK 4</title>
  
  
            <statement>
              
  
              <p>
                Let <m>(R,\fm,k)</m> be a local ring, and <m>M</m> be a finitely generated module. For <m>m_1,\dots,m_s\in M</m>, <me>m_1,\dots, m_s \text{ generate } M \Longleftrightarrow \overline{m_1},\dots,\overline{m_s} \text{ generate } M/\fm M.</me> Thus, any generating set for <m>M</m> consists of at least <m>\dim_k (M/\fm M)</m> elements.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The implication <m>(\implies)</m> is clear. If <m>m_1,\dots, m_s \in M</m> are such that <m>\overline{m_1},\dots,\overline{m_s}</m> generate <m>M/\fm M</m>, consider <m>N= R m_1 + \dots + R m_s \subseteq M</m>. Since <m>M/\fm M</m> is generated by the image of <m>N,</m> we have <m>M= N + \fm M</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - NAK 2|NAK2]], <m>M=N</m>.
              </p>
  
            </proof>
          </theorem>

          <remark>
            <p>
              Since <m>R/\fm</m> is a field, <m>M/\fm M</m> is a vector space over the field <m>R/\fm</m>.
            </p>
          </remark>
  
          <definition xml:id="defn-minimal-generators"><title>Minimal Generators</title>
          <statement>
            <p>
              Let <m>(R,\fm)</m> be a local ring, and <m>M</m> a finitely generated module. A set of elements <m>\{m_1,\dots,m_t\}</m> is a <em>minimal generating set</em><idx><h>minimal generators</h></idx><idx><h>minimal generating set</h></idx> of <m>M</m> if the images of <m>m_1,\dots,m_t</m> form a basis for the <m>R/\fm</m> vector space <m>M/\fm M</m>.
            </p>
          </statement>
          </definition>
  
          <lemma xml:id="lem-min-gen-sets-have-same-cardinality"><title>Min Gen Sets have Same Cardinality</title>
  
  
            <statement>
              
  
              <p>
                Let <m>(R,\fm,k)</m> be a local ring and <m>M</m> be a finitely generated module. Any generating set for <m>M</m> contains a minimal generating set, and every minimal generating set has the same cardinality.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                As a consequence of basic facts about basis for vector spaces
              </p>
  
            </proof>
          </lemma>
  
          <definition xml:id="defn-minimal-number-of-generators"><title>Minimal Number of Generators</title>
          <statement>
            <p>
              Let <m>(R,\fm)</m> be a local ring and <m>N</m> an <m>R</m>-module. The <em>minimal number of generators</em><idx><h>minimal number of generators</h></idx> of <m>M</m> is <me>\mu(M) :=  \dim_{R/\fm} \left( M / \fm M \right).</me>Equivalently, this is the number of elements in a minimal generating set for <m>M</m>.
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-minimal-number-of-generators-graded"><title>Minimal Number of Generators (Graded)</title>
          <statement>
            <p>
              Let <m>R</m> be an <m>\N</m>-graded ring with <m>R_0</m> a field, and <m>M</m> a finitely generated <m>\Z</m>-graded <m>R</m>-module. The <em>minimal number of generators</em><idx><h>minimal number of generators</h></idx> of <m>M</m> is <me>\mu(M) :=  \dim_{R/R_+} \left( M / R_+ M \right).</me>
            </p>
          </statement>
          </definition>
  
          <proposition xml:id="prop-gnak-1"><title>GNAK1</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be an <m>\N</m>-graded ring, and <m>M</m> a <m>\Z</m>-graded module such that <m>M_{&lt;a}=0</m> for some <m>a</m>. If <m>M= (R_+) M</m>, then <m>M=0</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                If <m>M \neq 0</m>, then <m>M</m> has a nonzero homogeneous element. Suppose <m>M_a \neq 0</m>. On the one hand, the homogeneous elements in <m>M</m> live in degrees at least <m>a</m>, but <m>(R_+)M</m> lives in degrees strictly bigger than <m>a</m>. Thus <m>(R_+)M \neq M</m>.
              </p>
  
            </proof>
          </proposition>

          <remark>
            <p>
              If <m>M</m> is finitely generated, then it can be generated by finitely many homogeneous elements, the homogeneous components of some finite generating set. If <m>a</m> is the smallest degree of a homogeneous element in a homogeneous generating set, since <m>R</m> lives only in positive degrees we must have <m>M \subseteq R M_{\geqslant a} \subseteq M_{\geqslant a}</m>, so <m>M_{&lt;a} = 0</m>.
            </p>
          </remark>
  
          <proposition xml:id="prop-graded-rings-and-generators"><title>Graded Rings and Generators</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be an <m>\N</m>-graded ring, with <m>R_0</m> a field, and <m>M</m> a <m>\Z</m>-graded module such that <m>M_{&lt;a}=0</m> for some degree <m>a</m>. A set of elements of <m>M</m> generates <m>M</m> if and only if their images in <m>M/(R_+)M</m> span <m>M/(R_+)M</m> as a vector space over <m>R_0</m>. Since <m>M</m> and <m>(R_+)M</m> are graded, <m>M/(R_+)M</m> admits a basis of homogeneous elements.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Just as above, we obtain the following:
              </p>
  
            </proof>
          </proposition>

          <paragraphs><title>Macaulay2</title>

            <p>
              In Macaulay2, the command <c>mingens</c> returns the a minimal generating set of the given module (as a list), while <c>numgens</c> returns the minimal number of generators. Notice that this computation is only reliable if the ring and module you are considering are defined to be graded.
            </p>
            
          </paragraphs>

          <remark>
            <p>
              Note that we can use <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - GNAK1|NAK]] to prove that certain modules are finitely generated in the graded case; in the local case, we cannot.
            </p>
          </remark>

        </section>
  
      </chapter>

      <chapter xml:id="ch-decomposing-ideals"><title>Decomposing Ideals</title>

        <!--***********************
        Chapter: Decomposing Ideals
        ************************-->
  
        <section xml:id="sec-min-support"><title>Minimal Primes and Support</title>

          <!--*****************************
          Section: Minimal Primes & Support
          ******************************-->
          
          <blockquote>
            <p>
              <q>There is no support so strong as the strength that enables one to stand alone.</q>
            </p>
            <attribution>Ellen Glasgow</attribution>
          </blockquote>
  
          <definition xml:id="defn-minimal-prime"><title>Minimal Prime</title>
          <statement>
            <p>
              Let <m>I</m> be an ideal in a ring <m>R</m>. A prime <m>P</m> is a <em>minimal prime</em><idx><h>minimal prime</h></idx> of <m>I</m> if <m>P</m> is minimal in <m>V(I)</m>. A <em>minimal prime</em> of <m>R</m> is a minimal element in <m>\Spec(R)</m>.
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-minimal-prime-1"><title>Minimal Prime</title>
          <statement>
            <p>
              Let <m>I</m> be an ideal in a ring <m>R</m>. A <em>minimal prime</em> of <m>I</m> is a minimal element (with respect to containment) in <m>V(I)</m>. More precisely, <m>P</m> is a minimal prime of <m>I</m> if the following hold: - <m>P</m> is a prime ideal, - <m>P \supseteq I</m>, and - if <m>Q</m> is also a prime ideal and <m>I \subseteq Q \subseteq P</m>, then <m>Q = P</m>.
            </p>
  
            <p>
              The set of minimal primes of <m>I</m> is denoted <m>\Min(I)</m><idx><h><m>\Min(I)</m></h></idx>
            </p>

            <p>FIX</p>
          </statement>
          </definition>
  
          <definition xml:id="defn-nilradical"><title>Nilradical</title>
          <statement>
            <p>
              The nilpotent elements of a ring <m>R</m> are exactly the elements in every minimal prime of <m>R</m>. The radical of <m>(0)</m> is often called the <em>nilradical</em><idx><h>nilradical</h></idx> of <m>R</m>, denoted <m>\mathcal{N}(R)</m><idx><h><m>\cN(R)</m></h></idx>.
            </p>
          </statement>
          </definition>
  
          <example xml:id="ex-minimal-primes-and-radical-ideals"><title>Minimal Primes and Radical Ideals</title>
  
  
            <statement>
              
  
              <p>
                If <m>P</m> is prime, then <m>\Min(P)=\{P\}</m>. Also, since <m>V(I)=V(\sqrt{I})</m>, we have <m>\Min(I)=\Min(\sqrt{I})</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-minimal-primes-of-x2xy"><title>Minimal Primes of <m>(x^2,xy)</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field and <m>R = k[x,y]</m>. Every prime containing <m>I = (x^2, xy)</m> must contain <m>x^2</m>, and thus <m>x</m>. On the other hand, <m>(x)</m> is a prime ideal containing <m>I</m>. Therefore, <m>I</m> has a unique minimal prime, and <m>\Min(I) = \{ (x) \}</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-nilradical-of-x2xy"><title>Nilradical of <m>(x^2,xy)</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field. The radical of the ideal <m>I = (x^2, xy)</m> in the ring <m>R = k[x,y]</m> is <m>\sqrt{I} = (x).</m> We saw before that <m>\Min(I) = \{ (x) \}</m>. The nilradical of <m>R = k[x,y]/(x^2,xy)</m> corresponds to the radical of <m>(x^2,xy)</m> is <m>k[x,y]</m>, so it is the ideal <m>(x)/(x^2,xy)</m>.
              </p>
  
            </statement>
          </example>
  
          <theorem xml:id="thm-finite-minimal-primes"><title>Finite Minimal Primes</title>
  
  
            <statement>
              
  
              <p>
                Over a noetherian ring <m>R</m>, every ideal <m>I</m> has finitely many minimal primes, and thus <m>\sqrt{I}</m> is a finite intersection of primes.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Let <m>S=\{ \text{ideals} \ I \subseteq R \ | \ \Min(I) \ \text{is infinite} \}</m>, and suppose, to obtain a contradiction, that <m>S\neq \es</m>. Since <m>R</m> is noetherian, <m>S</m> has a maximal element <m>J</m>. If <m>J</m> was a prime ideal, then <m>\Min(J) = \{ J \}</m> would be finite, by , so <m>J</m> is not prime. However, <m>\Min(J)=\Min(\sqrt{J})</m>, and thus <m>\sqrt{J} \supseteq J</m> is also in <m>S</m>, so we conclude that <m>J</m> is radical. Since <m>J</m> is not prime, we can find some <m>a, b \notin J</m> with <m>ab \in J</m>. Then <m>J \subsetneq J + (a) \subseteq \sqrt{J + (a)}</m> and <m>J \subsetneq \sqrt{J + (b)}</m>. Since <m>J</m> is maximal in <m>S</m>, we conclude that <m>\sqrt{J + (a)}</m> and <m>\sqrt{J + (b)}</m> have finitely many minimal primes, so we can write <me>\sqrt{J + (a)} = P_1 \cap \cdots \cap P_t \textrm{ and } \sqrt{J + (b)} = P_{t+1} \cap \cdots \cap P_s</me>for some prime ideals <m>P_i</m>.
              </p>
  
              <p>
                Let <m>f \in \sqrt{J + (a)} \cap \sqrt{J + (b)}</m>. Some sufficiently high power of <m>f</m> is in both <m>J + (a)</m> and <m>J + (b)</m>, so there exist <m>n, m \geq 1</m> such that<me>f^n \in J + (a) \quad \textrm{ and } \quad f^m \in J + (b).</me>Thus<me>f^{n+m} \in (J + (a))(J + (b)) \subseteq J^2 + J(a) + J(b) + (\underset{\in J}{ab}) \subseteq J.</me>Therefore, <m>f \in \sqrt{J} = J</m>. This shows that <me>J = \sqrt{J + (a)} \cap \sqrt{J + (b)} = P_1\cap \cdots \cap P_t \cap P_{t+1} \cap \cdots \cap P_s.</me>By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Intersection of Primes are Min Primes|Lemma]], we see that <m>\Min(J)</m> must be a subset of <m>\{P_1,\dots,P_s\}</m>, so it is finite.
              </p>
  
            </proof>
          </theorem>
  
          <lemma xml:id="lem-min-primes-intersection-all-important"><title>Min Primes Intersection All Important</title>
  
  
            <statement>
              
  
              <p>
                If <m>\Min(I) = \{ P_1, \ldots, P_n \}</m>, no <m>P_i</m> can be deleted in the intersection <m>P_1 \cap \cdots \cap P_n</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Suppose that we can delete <m>P_i</m>, meaning that <me>\bigcap_{j=1}^n P_j = \bigcap_{j \neq i} P_j.</me>Then <me>P_i \supseteq \bigcap_{j=1}^n P_j = \bigcap_{j \neq i} P_j \supseteq \prod_{j \neq i} P_j.</me>Since <m>P_i</m> is prime, this implies that <m>P_i \supseteq P_j</m> for some <m>j \neq i</m>, but this contradicts the assumption that the primes are incomparable.
              </p>
  
            </proof>
          </lemma>
  
          <lemma xml:id="lem-intersection-of-primes-are-min-primes"><title>Intersection of Primes are Min Primes</title>
  
  
            <statement>
              
  
              <p>
                Let <m>I</m> be an ideal in <m>R</m>. If <m>I = P_1 \cap \cdots \cap P_n</m> where each <m>P_i</m> is prime and <m>P_i \not\subseteq P_j</m> for each <m>i \neq j</m>, then <m>\Min(I)=\{ P_1, \ldots, P_n\}</m>. Moreover, <m>I</m> must be radical.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                If <m>Q</m> is a prime containing <m>I</m>, then <m>Q \supseteq (P_1 \cap \cdots \cap P_n)</m>. We claim that <m>Q</m> must contain one of the <m>P_i</m>. Indeed, if <m>Q \not\supseteq P_i</m> for all <m>i</m>, then there are elements <m>f_i \in P_i</m> such that <m>f_i \notin Q</m>, so their product satisfies <m>f_1 \cdots f_n \in (P_1 \cap \cdots \cap P_n)</m> but <m>f_1 \cdots f_n \notin Q</m>. This is a contradiction, so indeed any prime containing <m>I</m> must contain some <m>P_i</m>. Therefore, any minimal prime of <m>I</m> must be one of the <m>P_i</m>. Since we assumed that the <m>P_i</m> are incomparable, these are exactly all the minimal primes of <m>I.</m> By assumption, <m>I</m> coincides with the intersection of its minimal primes, which is <m>\sqrt{I}</m> by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Spectrum Analogue of Strong Nullstellensatz|Theorem]]. Therefore, <m>I = \sqrt{I}</m>.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-ideal-is-finite-intersection-of-primes-iff-i-is-radical"><title>Ideal is Finite Intersection of Primes iff I is Radical</title>
  
  
            <statement>
              
  
              <p>
                If <m>I = P_1 \cap \cdots \cap P_n</m> for some primes <m>P_i</m>, we can always delete unnecessary components until no component can be deleted. Therefore, <m>\Min(I) \subseteq \{ P_1, \ldots, P_n \}</m>.
              </p>
  
              <p>
                As a consequence of <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Min Primes Intersection All Important|Lemma]] and <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Intersection of Primes are Min Primes|Lemma]], if <m>I</m> is a radical ideal, there is a unique way to write <m>I</m> as a finite intersection of incomparable prime ideals. Moreover, <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Intersection of Primes are Min Primes|Lemma]], <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Finite Minimal Primes|Theorem]], and <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Spectrum Analogue of Strong Nullstellensatz|Spectrum Analogue]] also imply that an ideal <m>I</m> is equal to a finite intersection of primes if and only if <m>I</m> is radical.
              </p>
  
            </statement>
          </example>
  
          <definition xml:id="defn-support"><title>Support</title>
          <statement>
            <p>
              If <m>M</m> is an <m>R</m>-module, the <em>support</em><idx><h>support</h></idx> of <m>M</m> is <idx><h><m>\Supp(M)</m></h></idx> <me>\Supp(M) :=  \{ P \in \Spec(R) \ | \ M_P \neq 0\}.</me>
            </p>
          </statement>
          </definition>

          <theorem xml:id="thm-support-and-annihilator"><title> <m>\Supp(M) = \ann(M)</m> </title>
            <statement>
              <p>
                Given <m>M</m> a finitely generated <m>R</m>-module over a ring <m>R</m>, <me>\Supp(M)=V(\ann_R(M)).</me> In particular, <m>\Supp(R/I)=V(I)</m>.
              </p>
            </statement>

            <proof>
  
              <p>
                Let <m>M= R m_i + \cdots + R m_n</m>. We have <me>\ann_R(M)=\bigcap_{i=1}^n \ann_R(m_i),</me> so by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - Properties of V|Proposition]], <me>V(\ann_R(M))=\bigcup_{i=1}^n V( \ann_R(m_i)).</me> Notice that we need finiteness here. Also, we claim that <me>\Supp(M) = \bigcup_{i=1}^n \Supp(R m_i).</me> To show <m>(\supseteq)</m>, notice that <m>(R m_i)_P \subseteq M_P</m>, so <me>P \in \Supp(R m_i) \implies 0 \neq (R m_i)_P \subseteq M_P \implies P \in \Supp(M).</me> On the other hand, the images of <m>m_1, \ldots, m_n</m> in <m>M_P</m> generate <m>M_P</m> for each <m>P</m>, and thus <m>P \in \Supp(M)</m> if and only if <m>P \in \Supp(R m_i)</m> for some <m>m_i</m>. Thus, we can reduce the equality <m>\Supp(M)=V(\ann_R(M))</m> to the case of a cyclic module <m>R m</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Zero in Localization|Lemma]], <m>\frac{m}{1}=0</m> in <m>M_P</m> if and only if <m>(R\setminus P) \cap \ann_R (m) \neq \varnothing</m>, which is equivalent to <m>\ann_R (m) \not\subseteq P</m>.
              </p>
  
            </proof>
          </theorem>
  
          <example xml:id="ex-specific-direct-sum-and-support"><title>Specific Direct Sum and Support</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field, and <m>R=k[x]</m>. Take <me>M=R_x / R = \bigoplus_{i&gt;0} k \cdot x^{-i}.</me>With this <m>k</m>-vector space structure, the action is given by multiplication in the obvious way, then killing any nonnegative degree terms.
              </p>
  
              <p>
                Any element of <m>M</m> is killed by a large power of <m>x</m>, so <m>W^{-1}M=0</m> whenever <m>W</m> is a multiplicatively closed subset of <m>R</m> with <m>W \ni x</m>. Therefore, if <m>P \in \Supp(M)</m>, then <m>x \in P</m>, and thus <m>\Supp(M) \subseteq \{ (x)\}</m>. We will soon see, in , that the support of a nonzero module is nonempty, and thus <m>\Supp(M) = \{(x)\}</m>.
              </p>
  
              <p>
                On the other hand, the annihilator of the class of <m>x^{-n}</m> is <m>x^n</m>, so <me>\ann_R(M) \subseteq \bigcap_{n \geqslant 1}(x^n) = 0.</me>In particular, <m>V(\ann_R(M)) = \Spec(R)</m>, while <m>\Supp(M) = \{ (x) \} \neq \Spec(R)</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-support-of-direct-sum-in-cx"><title>Support of Direct Sum in <m>\C[x]</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>R=\C[x]</m>, and <m>M= \displaystyle\bigoplus_{n\in \Z} R/(x-n)</m>. First, note that <m>M_\fp = \displaystyle\bigoplus_{n\in \Z} (R/(x-n))_{\fp}</m>, so <me>\Supp(M)= \bigcup_{n\in \Z} \Supp(R/(x-n))= \bigcup_{n\in \Z} V((x-n))=\{(x-n) \ | \ n \in \Z\}.</me>On the other hand, <me>\ann_R(M)=\bigcap_{n\in \Z} \ann_R(R/(x-n)) = \bigcap_{n\in \Z} (x-n) = 0.</me>Note that in this example the support is not even closed.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-ses-support"><title>SES Support</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, <m>L,M,N</m> be modules. If <me>\begin{CD}
  0@&gt;&gt;&gt;L@&gt;&gt;&gt;M@&gt;&gt;&gt;N@&gt;&gt;&gt;0
  \end{CD}</me> is exact, then <m>\Supp(L) \cup \Supp(N) = \Supp(M)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                localization is exact, so for any <m>P</m>, <me>\begin{CD}
  0@&gt;&gt;&gt;L_{p}@&gt;&gt;&gt;M_{p}@&gt;&gt;&gt;N_{p}@&gt;&gt;&gt;0
  \end{CD}</me>is exact. If <m>P \in \Supp(L) \cup \Supp(N)</m>, then <m>L_P</m> or <m>N_P</m> is nonzero, so <m>M_P</m> must be nonzero as well. On the other hand, if <m>P \notin \Supp(L) \cup \Supp(N)</m>, then <m>L_P = N_P =0</m>, so <m>M_P=0</m>.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-supports-preserve-containment"><title>Support's Preserve Containment</title>
  
  
            <statement>
              
  
              <p>
                As a corollary of this <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - SES Support|Lemma]], given modules <m>L \subseteq M</m>, <m>\Supp(L) \subseteq \Supp (M)</m>.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-nonzero-element-localizes"><title>Nonzero Element Localizes</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, <m>M</m> an <m>R</m>-module, and <m>m\in M</m>. The following are equivalent: (a) <m>m=0</m> in <m>M</m>. (b) <m>\frac{m}{1}=0</m> in <m>M_P</m> for all <m>P \in \Spec(R)</m>. (c) <m>\frac{m}{1}=0</m> in <m>M_P</m> for all <m>P \in \mSpec(R)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The implications <m>1) \Rightarrow 2) \Rightarrow 3)</m> are clear. To show <m>3) \Rightarrow 1)</m>, we prove the contrapositive. Given <m>m \neq 0</m>, its annihilator is a proper ideal, which must be contained in a maximal ideal. In particular, <m>V(\ann_R m)=\Supp(Rm)</m> contains a maximal ideal, say <m>P</m>, so <m>\frac{m}{1} \neq 0</m> in <m>M_P</m>.
              </p>
  
            </proof>
          </lemma>
  
          <corollary xml:id="cor-support-of-nonzero-module-nonempty"><title>Support of Nonzero Module Nonempty</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, <m>M</m> an <m>R</m>-module, and <m>m\in M</m>. The following are equivalent: (a) <m>M=0</m>. (b) <m>M_P=0</m> in <m>M_P</m> for all <m>P \in \Spec(R)</m>. (c) <m>M_P=0</m> in <m>M_P</m> for all <m>P \in \mSpec(R)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The implications <m>\Rightarrow</m> are clear. To show <m>3) \Rightarrow 1)</m>, we show the contrapositive. If <m>m\neq 0</m>, consider <m>Rm \subseteq M</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Nonzero Element Localizes|Lemma]], there is a maximal ideal in <m>\Supp(Rm)</m>, and by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - SES Support|Lemma]] applied to the inclusion <m>Rm \subseteq M</m>, this maximal ideal is in <m>\Supp(M)</m> as well.
              </p>
  
            </proof>
          </corollary>

        </section>

        <section xml:id="sec-ass-primes">
          <title>Associated Primes</title>

          <!--**********************
          Section: Associated Primes
          ***********************-->
          
          <blockquote>
            <p>
              <q>People just kind of associate me with kicking some ass.</q>
            </p>
            <attribution>Yancy Butler</attribution>
          </blockquote>
  
          <example xml:id="ex-map-from-quotient-to-module-injective-iff-i-annihilates"><title>Map from Quotient to Module Injective iff I Annihilates</title>
  
  
            <statement>
              <p>
                Let <m>R</m> be a ring, <m>I</m> be an ideal in <m>R</m>, and <m>M</m> be an <m>R</m>-module. To give an <m>R</m>-module homomorphism <m>R \longrightarrow M</m> is the same as choosing an element <m>m</m> of <m>M</m> (the image of <m>1</m> via our map) or equivalently, to choose a cyclic submodule of <m>M</m> (the submodule generated by <m>m</m>).
              </p>
    
              <p>
                To give an <m>R</m>-module homomorphism <m>R/I \longrightarrow M</m> is the same as giving an <m>R</m>-module homomorphism <m>R \longrightarrow M</m> whose image is killed by <m>I</m>. Thus giving an <m>R</m>-module homomorphism <m>R/I \longrightarrow M</m> is to choose an element <m>m \in M</m> that is killed by <m>I</m>, meaning <m>I \subseteq \ann(m)</m>. The kernel of the map <m>R \to M</m> given by <m>1 \mapsto m</m> is precisely <m>\ann(m)</m>, so a well-defined map <m>R/I \to M</m> given by <m>1 \mapsto m</m> is injective if and only if <m>I = \ann(m)</m>.
              </p>
            </statement>
  
          </example>
  
          <definition xml:id="defn-associated-prime"><title>Associated Prime</title>
          <statement>
            <p>
              Let <m>R</m> be a ring and <m>M</m> an <m>R</m>-module. We say that <m>P \in \Spec(R)</m> is an <em>associated prime</em><idx><h>associated prime</h></idx> of <m>M</m> if <m>P = \ann_R(m)</m> for some <m>m \in M</m>. Equivalently, <m>P</m> is associated to <m>M</m> if there is an injective homomorphism <m>R/P \longrightarrow M</m>. We write <m>\Ass_R(M)</m><idx><h><m>\Ass_R(M)</m></h></idx> for the set of associated primes of <m>M</m>.
            </p>
  
            <p>
              If <m>I</m> is an ideal, by the <em>associated primes</em><idx><h>associated primes of an ideal</h></idx> of <m>I</m> we (almost always) mean the associated primes of the <m>R</m>-module <m>R/I</m>.
            </p>
          </statement>
          </definition>
  
          <example xml:id="ex-associated-primes-of-x2-xy-in-kxy"><title>Associated Primes of <m>(x^2, xy)</m> in <m>k[[x,y]]</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field and let <m>R = k[[x,y]]</m>. Consider ideal <m>I = (x^2, xy)</m> and the <m>R</m>-module <m>M = R/I.</m> The element <m>x + I</m> in <m>M</m> is killed by both <m>x</m> and <m>y</m>, and thus <m>(x,y) \subseteq \ann (x+I)</m>. On the other hand, <m>x+I \neq 0</m>, so <m>\ann(x+I) \neq R</m>. Since <m>(x,y)</m> is the unique maximal ideal in <m>R,</m> we conclude that <m>\ann(x+I) = (x,y)</m>. In particular, <m>(x,y) \in \Ass(M)</m>. Since <m>M = R/I</m>, this also says that <m>(x,y)</m> is an associated prime of <m>I</m>.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-associated-primes-and-localization"><title>Associated Primes and Localization</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a noetherian ring and <m>M</m> be an <m>R</m>-module. A prime <m>P</m> is associated to <m>M</m> if and if and only if <m>P_P \in \Ass(M_P)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                localization is exact, so any inclusion <m>R/P \subseteq M</m> localizes to an inclusion <m>R_P/P_P \subseteq M_P</m>.
              </p>
  
              <p>
                Conversely, suppose that <m>P_P = \ann(\frac{m}{w})</m> for some <m>\frac{m}{w} \in M_P</m>. Let <m>P = (f_1, \ldots, f_n)</m>. For each <m>i</m>, since <m>\frac{f_i}{1} \frac{m}{w} = \frac{0}{1}</m>, there exists <m>u_i \notin P</m> such that <m>u_i f_i m = 0</m>. Then <m>u = u_1 \cdots u_n</m> is not in <m>P</m>, since <m>P</m> is prime, and <m>u f_i m = 0</m> for all <m>i</m>. Since the <m>f_i</m> generate <m>P</m>, we have <m>P (um) = 0</m>. On the other hand, if <m>r \in \ann(um)</m>, then <m>\frac{ru}{1} \in \ann(\frac{m}{w}) = P_P</m>. We conclude that <m>ru \in P_P \cap R = P</m>. Since <m>u \notin P</m> and <m>P</m> is prime, we conclude that <m>r \in P</m>.
              </p>
  
            </proof>
          </lemma>
  
          <lemma xml:id="lem-associated-primes-and-quotients"><title>Associated Primes and Quotients</title>
  
  
            <statement>
              
  
              <p>
                If <m>P</m> is prime, <m>\Ass_R(R/P)=\{ P \}</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                For any nonzero <m>r + P \in R/P</m>, we have <m>\ann_R(r+P) = \{ s \in R \ | \ rs \in P\} = P</m> by definition of prime ideal.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-associated-primes-of-x2-in-kx"><title>Associated Primes of <m>(x^{2})</m> in <m>k[[x]]</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field and <m>R = k[[x]]</m>. Consider the ideal <m>I = (x^2)</m>, and the <m>R</m>-module <m>M = R/I</m>. If <m>P</m> is a prime ideal in <m>R</m> and <m>P</m> is associated to <m>M</m>, then <m>P = \ann(r+I)</m> for some <m>r \in R</m>.
              </p>
  
            </statement>
  
            <solution>
  
              <p>
                Since <m>I = \ann(M)</m>, <m>P</m> must contain <m>I</m>; since <m>P</m> is prime and <m>x^2 \in P</m>, we conclude that <m>P \supseteq (x)</m>. On the other hand, <m>(x)</m> is a maximal ideal, so <m>P = (x)</m>. Thus <m>\Ass(M) \subseteq \{ (x) \}</m>. Moreover, by an argument similar to the one we used in , we can show that <m>(x) = \ann(x+I)</m>. Therefore, <m>\Ass(M) = \{ (x) \}</m>, and <m>(x)</m> is the unique associated prime of <m>(x^2)</m>. However, <m>(x^2)</m> is not a prime ideal.
              </p>
  
            </solution>
          </example>
  
          <lemma xml:id="lem-graded-primes"><title>Graded Primes</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is a <m>\Z</m>-graded ring, then any ideal <m>I</m> with the property <me>
  \text{ for any homogeneous elements }r,s\in R, \quad rs\in I \Rightarrow r\in I \ \text{or} \ s\in I
  </me> is prime.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                We need to show that this property implies that for any <m>a,b\in R</m> not necessarily homogeneous, <m>ab\in I</m> implies <m>a\in I</m> or <m>b\in I</m>. We do this by induction on the number of nonzero homogeneous components of <m>a</m> plus the number of nonzero homogeneous components of <m>b</m>. This is not interesting if <m>a = 0</m> or <m>b=0</m>, so the base case is when this is two. In that case, both <m>a</m> and <m>b</m> are homogeneous, so the hypothesis already gives us this case. For the induction step, write <m>a=a' + a_m</m> and <m>b=b'+b_n</m>, where <m>a_m,b_n</m> are the nonzero homogeneous components of <m>a</m> and <m>b</m> of largest degree, respectively. We have <m>ab=(a'b'+a_m b' + b_n a') + a_m b_n</m>, where <m>a_m b_n</m> is either the largest homogeneous component of <m>ab</m> or zero. Either way, <m>a_m b_n\in I</m>, so <m>a_m\in I</m> or <m>b_n\in I</m>; without loss of generality, we can assume <m>a_m\in I</m>. Then <m>a b= a' b + a_m b</m>, and <m>ab, a_m b\in I</m>, so <m>a' b\in I</m>, and the total number of homogeneous pieces of <m>a'b</m> is smaller, so by induction, either <m>a'\in I</m> so that <m>a\in I</m>, or else <m>b\in I</m>.
              </p>
  
            </proof>
          </lemma>
  
          <definition xml:id="defn-module-zerodivisor"><title>Module Zerodivisor</title>
          <statement>
            <p>
              Let <m>M</m> be an <m>R</m>-module. An element <m>r \in R</m> is a <em>zerodivisor</em><idx><h>zerodivisor</h></idx> on <m>M</m> if <m>rm = 0</m> for some nonzero <m>m \in M</m>. We denote the set of zerodivisors of <m>M</m> by <m>\mathcal{Z}(M)</m><idx><h><m>\cZ(M)</m></h></idx>.
            </p>
          </statement>
          </definition>
  
          <lemma xml:id="lem-every-ann-contained-in-ass-prime"><title>Every Ann Contained in Ass Prime</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is noetherian, and <m>M</m> is an arbitrary <m>R</m>-module, then for any nonzero <m>m \in M</m>, <m>\ann_R(m)</m> is contained in an associated prime of <m>M</m>. If <m>R</m> and <m>M</m> are graded and <m>m</m> is a homogeneous element, then <m>\ann_R(m)</m> is contained in a homogeneous prime.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The set of ideals <m>S := \{ \ann_R(m) \ | \ m\in M, m \neq0\}</m> is nonempty, and any element in <m>S</m> is contained in a maximal element. Note in fact that any element in <m>S</m> must be contained in a maximal element of <m>S</m>. Let <m>I=\ann(m)</m> be any maximal element, and let <m>rs\in I</m>, <m>s\notin I</m>. We always have <m>\ann(sm)\supseteq \ann(m)</m>, and equality holds by the maximality of <m>\ann(m)</m> in <m>S</m>. Then <m>r(sm)=(rs)m=0</m>, so <m>r\in \ann(sm)=\ann(m)=I</m>. We conclude that <m>I</m> is prime, and therefore it is an associated prime of <m>M</m>.
              </p>
  
              <p>
                The same argument above works if we take <m>\{ \ann_R(m) \ | \ m\in M, m \neq 0 \ \text{homogeneous} \}</m>, using <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Graded Primes|Lemma]].
              </p>
  
            </proof>
          </lemma>
  
          <theorem xml:id="thm-associated-primes-nonzero"><title>Associated Primes Nonzero</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is noetherian, and <m>M</m> is an arbitrary <m>R</m>-module, then <me>\Ass(M)= \varnothing \Longleftrightarrow M=0.</me> If <m>R</m> and <m>M</m> are <m>\Z</m>-graded and <m>M\neq 0</m>, then <m>M</m> has an associated prime that is homogeneous.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Even if <m>R</m> is not noetherian, <m>M = 0</m> implies <m>\Ass(M) = \es</m> by definition. So we focus on the case when <m>M \neq 0</m>. If <m>M \neq 0</m>, then <m>M</m> contains a nonzero element <m>m</m>, and <m>\ann(m)</m> is contained in an associated prime of <m>M</m>. In particular, <m>\Ass(M) \neq 0</m>. In the graded setting, <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Every Ann Contained in Ass Prime|Lemma]] gives us a homogeneous associated prime.
              </p>
            </proof>
          </theorem>

          <theorem xml:id="thm-zerodivisors-associated-primes"><title>Zerodivisors Associated Primes</title>
            <statement>
              <p>
                If <m>R</m> is noetherian, and <m>M</m> is an arbitrary <m>R</m>-module, then <me>\bigcup\limits_{P \in \Ass(M)} P = \mathcal{Z}(M).</me> 
              </p>
            </statement>

            <proof>
              <p>
                If <m>r \in \mathcal{Z}(M)</m>, then by definition we have <m>r \in \ann(m)</m> for some nonzero <m>m \in M</m>. Since <m>\ann(m)</m> is contained in some associated prime of <m>M</m>, then <m>r</m> is also contained in some associated prime of <m>M</m>. On the other hand, if <m>P</m> is an associated prime of <m>M</m>, then by definition all elements in <m>P</m> are zerodivisors on <m>M</m>.
              </p>

              <p>
                For the graded case, replace the set of zerodivisors with the annihilators of homogeneous elements. Such annihilator is homogeneous, since if <m>m</m> is homogeneous, and <m>fm=0</m>, writing <m>f=f_{a_1}+\dots+f_{a_b}</m> as a sum of homogeneous elements of different degrees <m>a_i</m>, then <m>0=fm=f_{a_1}m+\dots+f_{a_b}m</m> is a sum of homogeneous elements of different degrees, so <m>f_{a_i}m=0</m> for each <m>i</m>.
              </p>
            </proof>
          </theorem>
          
          <lemma xml:id="lem-associated-primes-and-ses"><title>Associated Primes and SES</title>
  
  
            <statement>
              
  
              <p>
                If <me>\begin{CD}
  0@&gt;&gt;&gt;L@&gt;&gt;&gt;M@&gt;&gt;&gt;N@&gt;&gt;&gt;0
  \end{CD}</me>is an exact sequence of <m>R</m>-modules, then <m>\Ass(L) \subseteq \Ass(M) \subseteq \Ass(L) \cup \Ass(N)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                If <m>R/P</m> includes in <m>L</m>, then composition with the inclusion <m>L\hookrightarrow M</m> gives an inclusion <m>R/P \hookrightarrow M</m>. Therefore, <m>\Ass(L) \subseteq \Ass(M)</m>.
              </p>
  
              <p>
                Now let <m>P \in \Ass(M)</m>, and let <m>m \in M</m> be such that <m>P=\ann(m)</m>. First, note that <m>P \subseteq \ann(rm)</m> for all <m>r \in R</m>.
              </p>
  
              <p>
                Thinking of <m>L</m> as a submodule of <m>M</m>, suppose that there exists <m>r \notin P</m> such that <m>rm \in L</m>. Then <me>s(rm) = 0 \Longleftrightarrow (sr)m = 0 \implies sr \in P \implies s \in P.</me>So <m>P = \ann(rm)</m>, and thus <m>P \in \Ass(L)</m>.
              </p>
  
              <p>
                If <m>rm \notin L</m> for all <m>r \notin P</m>, let <m>n</m> be the image of <m>m</m> in <m>N</m>. Thinking of <m>N</m> as <m>M/L</m>, if <m>rn = 0</m>, then we must have <m>rm \in L</m>, and by assumption this implies <m>r \in P</m>. Since <m>P = \ann(m) \subseteq \ann(n)</m>, we conclude that <m>P = \ann(n)</m>. Therefore, <m>P \in \Ass(N)</m>.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-strict-containment-in-ass-ses"><title>Strict Containment in Ass SES</title>
  
  
            <statement>
              
  
              <p>
                If <m>M</m> is a module with at least two associated primes, and <m>P</m> is an associated prime of <m>M</m>, then <me>\begin{CD}
  0@&gt;&gt;&gt;R/P@&gt;&gt;&gt;M
  \end{CD}</me> is exact, but <m>\{ P \} = \Ass(R/P) \subsetneq \Ass(M)</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-strict-containment-in-ass-ses-1"><title>Strict Containment in Ass SES (2)</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R = k[x]</m>, where <m>k</m> is a field, and consider the short exact sequence of <m>R</m>-modules <me>\begin{CD}
  0@&gt;&gt;&gt;(x)@&gt;&gt;&gt;R@&gt;&gt;&gt;R/(x)@&gt;&gt;&gt;0
  \end{CD}</me>Then one can check that: - <m>\Ass(R/(x)) = \Ass(k) = \{ (x) \}</m>. - <m>\Ass(R) = \Ass((x)) = \{ (0) \}</m>. In particular, <m>\Ass(R) \subsetneq \Ass(R/(x)) \cup \Ass((x))</m>.
              </p>
  
            </statement>
          </example>
  
          <corollary xml:id="cor-ass-direct-sum"><title>Ass Direct Sum</title>
  
  
            <statement>
              
  
              <p>
                Let <m>A</m> and <m>B</m> be <m>R</m>-modules. Then <m>\Ass(A \oplus B) = \Ass(A) \cup \Ass(B)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Apply this <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Associated Primes and SES|Lemma]] to the short exact sequence <me>\begin{CD}
  0@&gt;&gt;&gt;A@&gt;&gt;&gt;A\oplus B@&gt;&gt;&gt;B@&gt;&gt;&gt;0
  \end{CD}</me>We obtain <m>\Ass(A) \subseteq \Ass(A \oplus B) \subseteq \Ass(A) \cup \Ass(B)</m>. Repeat with <me>\begin{CD}
  0@&gt;&gt;&gt;B@&gt;&gt;&gt;A\oplus B@&gt;&gt;&gt;A@&gt;&gt;&gt;0
  \end{CD}</me>to conclude that <m>\Ass(B) \subseteq \Ass(A \oplus B)</m>. So we have shown both <m>\Ass(A) \subseteq \Ass(A \oplus B)</m> and <m>\Ass(B) \subseteq \Ass(A \oplus B)</m>, so <m>\Ass(A) \cup \Ass(B) \subseteq \Ass(A \oplus B)</m>. Since we have also already shown <m>\Ass(A \oplus B) \subseteq \Ass(A) \cup \Ass(B)</m>, we must have <m>\Ass(A \oplus B) = \Ass(A) \cup \Ass(B)</m>.
              </p>
  
            </proof>
          </corollary>
  
          <definition xml:id="defn-shift"><title>Shift</title>
          <statement>
            <p>
              Let <m>R</m> and <m>M</m> be <m>T</m>-graded, and <m>t\in T</m>. The <em>shift</em><idx><h>shift</h></idx><idx><h><m>M(t)</m></h></idx> of <m>M</m> by <m>t</m> is the graded <m>R</m>-module <m>M(t)</m> with graded pieces <m>M(t)_i:=M_{t+i}</m>. This is isomorphic to <m>M</m> as an <m>R</m>-module, when we forget about the graded structure.
            </p>
          </statement>
          </definition>
  
          <theorem xml:id="thm-filtration"><title>Filtration</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a noetherian ring, and <m>M</m> is a finitely generated module. There exists a <em>filtration</em><idx><h>filtration</h></idx> of <m>M</m> <me>M=M_t \supsetneq M_{t-1} \supsetneq M_{t-2} \supsetneq \cdots \supsetneq  M_1 \supsetneq M_0 = 0</me> such that <m>M_i / M_{i-1} \cong R/P_i</m> for primes <m>P_i\in \Spec(R)</m>. This is a <em>prime filtration</em><idx><h>prime filtration</h></idx> of <m>M</m>.
              </p>
  
              <p>
                If <m>R</m> and <m>M</m> are <m>\Z</m>-graded, there exists a prime filtration of <m>M</m> where the quotients <m>M_i / M_{i-1} \cong (R/P_i)(t_i)</m> are graded modules, the <m>P_i</m> are homogeneous primes, and <m>t_i \in \Z</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                If <m>M\neq 0</m>, then <m>M</m> has at least one associated prime, by , so there is an inclusion <m>R/P_1 \subseteq M</m>. Let <m>M_1</m> be the image of this inclusion. If <m>M/M_1\neq 0</m>, it has an associated prime, so there is an <m>M_2 \subseteq M</m> such that <m>R/P_2 \cong M_2/M_1 \subseteq R/M_1</m>. Continuing this process, we get a strictly ascending chain of submodules of <m>M</m> where the successive quotients are of the form <m>R/P_i</m>. If we do not have <m>M_t=M</m> for some <m>t</m>, then we get an infinite strictly ascending chain of submodules of <m>M</m>, which contradicts that <m>M</m> is a noetherian module.
              </p>
  
              <p>
                In the graded case, if <m>P_i</m> is the annihilator of an element <m>m_i</m> of degree <m>t_i</m>, we have a degree-preserving map <m>(R/P_i)(t_i)\cong R m_i</m> sending the class of <m>1</m> to <m>m_i</m>.
              </p>
  
            </proof>
          </theorem>

          <example><title>Building Prime Filtration</title>

            <p>
              Let's build a prime filtration for the module <m>M = R/I</m>, where <m>I = (x^2,yz)</m> and <m>R = \mathbb{Q}[x,y,z]</m>. With a little help from Macaulay2, we find that
            </p>

            <pre>
            i4 : associatedPrimes M

            o4 = {ideal (y, x), ideal (z, x)}

            o4 : List
            </pre>

            <p>
              So our first goal is to find <m>m \in M</m> such that <m>\operatorname{ann}(m) = (x,z)</m> or <m>\operatorname{ann}(m) = (x,y)</m>. Let’s start from <m>(x,z)</m>. To find such an element, we can start by searching for all the elements killed by <m>(x,z)</m>:
            </p>

            <pre>
              i5 : I : ideal"x,z"
                                    2
              o5 = ideal (y*z, x*y, x )

              o5 : Ideal of R
            </pre>

            <p>
              Now <m>yz</m> and <m>x^2</m> are both <m>0</m> in <m>M</m>, so the submodule of <m>M</m> generated by <m>xy</m> is precisely the set of elements killed by <m>(x,z)</m>. Is <m>\operatorname{ann}(R \cdot xy) = (x,z)</m>?
            </p>

            <pre>
              i6 : ann ((I + ideal(x*y))/I)

              o6 = ideal (z, x)

              o6 : Ideal of R
            </pre>

            <p>
              Yes, it is! So our prime filtration starts with <me>M_0 = 0 \subseteq M_1 = \frac{I + (xy)}{I},</me> where our computations so far show that <m>\operatorname{ann}(M_1) = (x,z)</m>. For step <m>2</m>, we start from scratch, and compute the associated primes of <m>M/M_1 \cong R/(I+(y))</m>:
            </p>

            <pre>
              i7 : associatedPrimes (R^1/(I + ideal"xy"))

              o7 = {ideal (y, x), ideal (z, x)}

              o7 : List   
            </pre>

            <p>
              Unfortunately, we will again have to find another element killed by <m>(x,z)</m>. So we repeat the process:
            </p>

            <pre>
              i8 : (I + ideal"xy") : ideal"x,z"
                              2
              o8 = ideal (y, x )

              o8 : Ideal of R

              i9 : ann((I + ideal"y")/(I + ideal"xy"))

              o9 = ideal (z, x)

              o9 : Ideal of R
            </pre>

            <p>
              So in <m>M_1</m>, <m>\operatorname{ann}(y) = (x,z)</m>, so we can take the submodule generated by <m>y</m> for our next step, so our prime filtration for now looks like <me>M_0 = 0 \underset{R/(x,z)}{\subseteq} M_1 = \frac{I + (xy)}{I} \underset{R/(x,z)}{\subseteq} M_2 = \frac{I + (y)}{I}.</me> So now we repeat the process with <m>M/M_2 \cong R/(I + (y))</m>:
            </p>

            <pre>
              i10 : associatedPrimes (R^1/(I + ideal"y"))

              o10 = {ideal (y, x)}

              o10 : List

              i11 : (I + ideal"y") : ideal"x,y"

              o11 = ideal (y, x)

              o11 : Ideal of R

              i12 : ann((I + ideal"x")/(I + ideal"y"))

              o12 = ideal (y, x)

              o12 : Ideal of R
            </pre>

            <p>
              This gives us <me>M_0 = 0 \underset{R/(x,z)}{\subseteq} M_1 = \frac{I + (xy)}{I} \underset{R/(x,z)}{\subseteq} M_2 = \frac{I + (y)}{I} \underset{R/(x,y)}{\subseteq} M_3 = \frac{I + (x,y)}{I}.</me> Next, we take <m>M/M_3 \cong R/(I + (x,y))</m> and find that
            </p>

            <pre>
              i13 : associatedPrimes (R^1/(I + ideal"x,y"))

              o13 = {ideal (y, x)}

              o13 : List

              i14 : (I + ideal"x,y") : ideal"x,y"

              o14 = ideal 1

              o14 : Ideal of R
            </pre>

            <p>
              This last computation actually says we are done: since <m>(x,y)</m> kills everything inside <m>M/M_3</m>, we can now complete our prime filtration with <me>0 \underset{R/(x,z)}{\subseteq} M_1 = \frac{I + (xy)}{I} \underset{R/(x,z)}{\subseteq} M_2 = \frac{I + (y)}{I} \underset{R/(x,y)}{\subseteq} M_3 = \frac{I + (x,y)}{I} \underset{R/(x,y)}{\subseteq} M_4 = R/I.</me>
            </p>

            <p>
              The prime ideals that appear in this filtration are <m>(x,y)</m> and <m>(x,z)</m>. From the computation in the beginning, these are precisely the associated primes of <m>M</m>. 
            </p>

          </example>
  
          <corollary xml:id="cor-ass-finite"><title>Ass Finite</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is a noetherian ring, and <m>M</m> is a finitely generated module, and <me>M=M_t \supsetneq M_{t-1} \supsetneq M_{t-2} \supsetneq \cdots \supsetneq  M_1 \supsetneq M_0 = 0</me> is a prime filtration of <m>M</m> with <m>M_i/M_{i-1}\cong R/P_i</m>, then <me>\Ass_R(M)\subseteq \{ P_1, \dots, P_t \}.</me>Therefore, <m>\Ass_R(M)</m> is finite. Moreover, if <m>M</m> is graded, then <m>\Ass_R(M)</m> is a finite set of homogeneous primes.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                For each <m>i</m>, we have a short exact sequence <me>\begin{CD}
  0@&gt;&gt;&gt;M_{i-1}@&gt;&gt;&gt;M_{i}@&gt;&gt;&gt;M_{i}/M_{i-1}@&gt;&gt;&gt;0
  \end{CD}</me> By , <m>\Ass(M_i) \subseteq \Ass(M_{{i-1}})\cup \Ass(M_i/M_{i-1}) = \Ass(M_{{i-1}}) \cup \{P_i\}</m>. Inductively, we have <m>\Ass(M_i)\subseteq\{P_1,\dots,P_i\}</m>, and <m>\Ass_R(M) = \Ass_R(M_t) \subseteq \{ P_1, \dots, P_t \}</m>. This immediately implies that <m>\Ass(M)</m> is finite. In the graded case,  gives us a filtration where all the <m>P_i</m> are homogeneous primes, and those include all the associated primes.
              </p>
  
            </proof>
          </corollary>
  
          <example xml:id="ex-prime-ideals-are-assm-for-some-m"><title>Prime Ideals are Ass(M) for some M</title>
  
  
            <statement>
              
  
              <p>
                Any subset <m>X\subseteq\Spec(R)</m> (for any <m>R</m>) can be realized as <m>\Ass(M)</m> for some module <m>M</m>: take <m>M=\displaystyle\bigoplus_{P \in X} R/P</m>. However, <m>M</m> is not finitely generated when <m>X</m> is infinite.
              </p>
  
            </statement>
  
            <solution>

  
              <p>
                Let <m>X</m> be a subset of <m>\Spec(R)</m>. We construct an <m>R</m>-module <m>M</m> such that <m>\Ass(M) = X</m>.
              </p>
  
              <p>
                Let <m>I = \bigcap_{\fp \in X} \fp</m> and consider the <m>R</m>-module <m>M = R/I</m>. Then for any prime ideal <m>\fp \in \Spec(R)</m>, we have <m>\fp \in \Ass(M)</m> if and only if <m>\fp \supseteq I</m>. Thus, we have <m>\Ass(M) = { \fp \in \Spec(R) \mid \fp \supseteq I }</m>.
              </p>
  
              <p>
                It remains to show that <m>I</m> is an ideal in <m>R</m>. Since <m>X</m> is a subset of <m>\Spec(R)</m>, we have <m>R \setminus X \subseteq \bigcup_{\fp \in X} \fp^c</m>, where <m>\fp^c</m> denotes the complement of <m>\fp</m> in <m>R</m>. Taking the intersection of both sides with <m>X</m>, we have <m>X \subseteq \bigcup_{\fp \in X} \fp^c \cap X</m>. Since <m>\fp^c \cap X</m> is closed under finite intersection and contains the empty set, it is a closed set of <m>\Spec(R)</m>. Hence, we can apply the prime avoidance lemma to get <m>I = \bigcap_{\fp \in X} \fp \subseteq \bigcap_{\fp \in X} \fp^c \cap X = \emptyset</m>. Thus, <m>I</m> is an ideal in <m>R</m>.
              </p>
  
            </solution>
          </example>
  
          <example xml:id="ex-module-with-no-associated-primes"><title>Module with no Associated Primes</title>
  
            <statement>
              <p>
                If <m>R</m> is not noetherian, then there may be modules (or ideals even) with no associated primes. Let <m>R=\bigcup_{n\in \N} \C[[x^{1/n}]]</m> be the ring of nonnegatively-valued Puiseux series. We claim that <m>R/(x)</m> is a cyclic module with no associated primes, i.e., the ideal <m>(x)</m> has no associated primes.
              </p>
            </statement>
  
            <solution>
  
              <p>
                First, observe that any element of <m>R</m> can be written as a unit times <m>x^{m/n}</m> for some <m>m,n</m>, so any associated prime of <m>R/(x)</m> must be the annihilator of <m>x^{m/n}+(x)</m> for some <m>m \leq n</m>. However, we claim that these are never prime. Indeed, we have <m>\ann(x^{m/n}+(x))=(x^{1-m/n})</m>, which is not prime since <m>(x^{1/2-m/2n})^2 \in (x^{1-m/n})</m> but <m>x^{1/2-m/2n} \notin (x^{1-m/n})</m>.
              </p>

            </solution>
          </example>

          <theorem xml:id="thm-local-ass-in-noeth"><title>Associated Primes Localize in Noetherian Rings</title>
            <statement>
              <p>
                Let <m>R</m> be a noetherian ring, <m>W</m> a multiplicative set, and <m>M</m> a module. Then <me>\Ass_{W^{-1}R}(W^{-1}M)=\{W^{-1}P  \ | \ P \in \Ass_R(M), \, P \cap W = \varnothing\}.</me> 
                
              </p>
            </statement>

            <proof>
              <p>
                Given <m>P \in \Ass_R(M)</m> such that <m>P \cap W= \varnothing</m>, <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Localization Ideals|Lemma]] says that <m>W^{-1}P</m> is a prime in <m>W^{-1}R</m>. Then <m>W^{-1}R /W^{-1}P \cong W^{-1}(R/P) \hookrightarrow W^{-1}M</m> by exactness, so <m>W^{-1}P</m> is an associated prime of <m>W^{-1} M</m>.
              </p>

              <p>
                Now suppose that <m>Q \in \Spec(W^{-1}R)</m> is associated to <m>W^{-1}M</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Localization Ideals|Lemma]], we know this is of the form <m>W^{-1}P</m> for some prime <m>P</m> in <m>R</m> such that <m>P \cap W = \varnothing</m>. Since <m>R</m> is noetherian, <m>P</m> is finitely generated, say <m>P = (f_1, \ldots, f_n)</m> in <m>R</m>, and so <m>Q = \left( \frac{f_1}{1}, \ldots, \frac{f_n}{1} \right)</m>.
              </p>
  
              <p>
                By assumption, <m>Q = \ann(\frac{m}{w})</m> for some <m>m \in M</m>, <m>w \in W</m>. Since <m>w</m> is a unit in <m>W^{-1}R</m>, we can also write <m>Q = \ann(\frac{m}{1})</m>. By definition, this means that for each <m>i</m><me>\frac{f_i}{1} \frac{m}{1} = \frac{0}{1} \, \Longleftrightarrow \, u_i f_i m = 0 \textrm{ for some } u_i \in W.</me>Let <m>u = u_1 \cdots u_n \in W</m>. Then <m>u f_i m = 0</m> for all <m>i</m>, and thus <m>P u m = 0</m>. We claim that in fact <m>P = \ann(um)</m> in <m>R</m>. Consider <m>v \in \ann(um)</m>. Then <m>u (vm) = 0</m>, and since <m>u \in W</m>, this implies that <m>\frac{vm}{1} = 0</m>. Therefore, <m>\frac{v}{1} \in \ann(\frac{m}{1}) = W^{-1}P</m>, and <m>vw \in P</m> for some <m>w \in W</m>. But <m>P \cap W = \varnothing</m>, and thus <m>v \in P</m>. Thus <m>P \in \Ass(M)</m>.
              </p>
            </proof>
          </theorem>
  
          <theorem xml:id="thm-support-and-associated-primes"><title>Support and Associated Primes</title>
  
            <statement>
  
              <p>
                Let <m>R</m> be noetherian and <m>M</m> be an <m>R</m>-module. <me>\Supp(M) \,\, = \displaystyle\bigcup_{P \in \Ass(M)} V(P).</me> 
              </p>
  
            </statement>

            <proof>
              <p>
                Let <m>P \in \Ass_R(M)</m>, and fix <m>m \in M</m> such that <m>P = \ann_R(m)</m>. Let <m>Q \in V(P)</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - Supp(M) = Ann(M)|Proposition]], <m>Q \in \Supp(R/P)</m>. Since <m>0 \to R/P \xrightarrow{m} M</m> is exact and localization is exact, <m>0 \to (R/P)_Q \to M_{Q}</m> is also exact. Since <m>(R/P)_Q \neq 0</m>, we must also have <m>M_{Q} \neq 0</m>, and thus <m>Q \in \Supp(M)</m>. This shows <m>\Supp(M) \, \supseteq \displaystyle\bigcup_{P \in \Ass(M)} V(P)</m>. Now let <m>Q</m> be a prime ideal and suppose that <me>Q \notin \bigcup_{P\in \Ass(M)} V(P).</me>In particular, <m>Q</m> does not contain any associated prime of <m>M</m>. Then there is no associated prime of <m>M</m> that does not intersect <m>R \setminus Q</m>, so <m>\Ass_{R_{Q}}(M_{Q})=\varnothing</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Nonzero Element Localizes|Lemma]], <m>M_{Q}=0</m>.
              </p>
            </proof>
          </theorem>
  
          <theorem xml:id="thm-min-contained-in-ass"><title>Min Contained in Ass</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be noetherian and <m>M</m> be an <m>R</m>-module. If <m>M</m> is a finitely generated <m>R</m>-module, then <m>\Min(\ann_R(M))\subseteq \Ass_R(M)</m>. In particular, <m>\Min(I)\subseteq \Ass_R(R/I)</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Support and Associated Primes|Theorem]],<me>V(\ann_R(M))=\Supp_R(M)=\bigcup_{P \in \Ass(M)} V(P),</me> so the minimal elements of both sets agree. In particular, the right hand side has the minimal primes of <m>\ann_R(M)</m> as minimal elements, and they must be associated primes of <m>M</m>, or else this would contradict minimality.[^3
              </p>
  
            </proof>
          </theorem>
  
          <definition xml:id="defn-embedded-prime"><title>Embedded Prime</title>
          <statement>
            <p>
              If <m>I</m> is an ideal, then an associated prime of <m>I</m> that is not a minimal prime of <m>I</m> is called an <em>embedded prime</em><idx><h>embedded prime</h></idx> of <m>I</m>.
            </p>
          </statement>
          </definition>
  
          <theorem xml:id="thm-ideal-of-zerodivisors"><title>Ideal of Zerodivisors</title>
  
  
            <statement>
              
  
              <p>
                Let <m>I</m> be an ideal and <m>M</m> a finitely generated module over a noetherian ring <m>R</m>. If <m>I</m> consists of zerodivisors on <m>M</m>, then <m>Im=0</m> for some nonzero <m>m\in M</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                The assumption says that <me>I\subseteq \displaystyle\bigcup_{P \in \Ass(M)}(P).</me>By the assumptions, <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Corollary - Ass Finite|Corollary]] applies, and it guarantees that this is a finite set of primes. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Prime Avoidance|prime avoidance]], <m>I \subseteq P</m> for some <m>P \in \Ass(M)</m>. Equivalently, <m>I\subseteq \ann_R(m)</m> for some nonzero <m>m\in M</m>.
              </p>
  
            </proof>
          </theorem>

        </section>

        <section xml:id="sec-primary-decomp">
          <title>Primary Decomposition</title>

          <!--**************************
          Section: Primary Decomposition
          ***************************-->
          
          <blockquote>
            <p>
              <q>How weird was it that so many bits and pieces, all diverse, could make someting whole. Something with potential. Perfect.</q>
            </p>
            <attribution>Sarah Dessen</attribution>
          </blockquote>

          <remark>
            <p>
              We refine our decomposition theory once again, and introduce primary decompositions of ideals. One of the fundamental classical results in commutative algebra is the fact that every ideal in any noetherian ring has a primary decomposition. This can be thought of as a generalization of the Fundamental Theorem of Arithmetic:
            </p>
          </remark>
      
          <theorem xml:id="thm-fundamental-theorem-of-arithmetic"><title>Fundamental Theorem of Arithmetic</title>
  
  
            <statement>
              
  
              <p>
                Every nonzero integer <m>n \in \mathbb{Z}</m> can be written as a product of primes: there are distinct prime integers <m>p_1, \ldots, p_n</m> and integers <m>a_1, \ldots, a_n \geqslant 1</m> such that <me>n = p_1^{a_1} \cdots p_n^{a_n}.</me>Moreover, such a a product is unique up to sign and the order of the factors.
              </p>

              
  
              
  
            </statement>

          </theorem>

          <remark>
                <p>
                  We will soon discover that such a product  a primary decomposition, perhaps after some light rewriting. But before we get to the  and the  of primary decomposition, it is worth discussing the . If we wanted to extend the Fundamental Theorem of Arithmetic to other rings, our first attempt might involve irreducible elements. Unfortunately, we don't have to go far to find rings where we  write elements as a unique product of irreducibles up to multiplying by a unit.
                </p>
          </remark>

          <example><title></title>
  
            <p>
              In <m>\mathbb{Z}[\sqrt{-5}]</m>, <me>6 = 2 \cdot 3 = (1 + \sqrt{-5}) (1 - \sqrt{-5})</me>are two  ways to write <m>6</m> as a product of irreducible elements. In fact, we cannot obtain <m>2</m> or <m>3</m> by multiplying <m>1 + \sqrt{-5}</m> or <m>1 - \sqrt{-5}</m> by a unit.
            </p>
  
          </example>
  
          <definition xml:id="defn-primary-ideal"><title>Primary Ideal</title>
          <statement>
            <p>
              We say that an ideal is <em>primary</em><idx><h>primary ideal</h></idx> if <me>xy\in I \implies x\in I \text{ or } y\in \sqrt{I}.</me> We say that an ideal is <m>P</m>-<em>primary</em><idx><h><m>P</m>-primary ideal</h></idx>, where <m>P</m> is prime, if <m>I</m> is primary and <m>\sqrt{I}=P</m>.
            </p>
          </statement>
          </definition>
  
          <lemma xml:id="lem-radical-of-primary-ideal-is-prime"><title>Radical of Primary Ideal is Prime</title>
  
  
            <statement>
              
  
              <p>
                The radical of a primary ideal is prime.
              </p>
  
            </statement>
  
            <proof>
  
  
              <p>
                Suppose that <m>Q</m> is primary and <m>xy \in \sqrt{Q}</m>. Then <m>x^n y^n\in Q</m> for some <m>n</m>. If <m>y\notin \sqrt{Q}</m>, then <m>y^n\notin \sqrt{Q}</m>. Since <m>Q</m> is primary, we must have <m>x^n\in Q</m>, so <m>x\in \sqrt{Q}</m>.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-prime-ideals-are-primary"><title>Prime Ideals are Primary</title>
  
  
            <statement>
              
  
              <p>
                Any prime ideal is also primary.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-principal-primary-ideals-in-ufds"><title>Principal Primary Ideals in UFDs</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is a UFD, we claim that a principal ideal is primary if and only if it is generated by a power of a prime element.
              </p>
  
            </statement>
  
            <solution>

  
              <p>
                Indeed, if <m>a=f^n</m>, with <m>f</m> irreducible, then <me>xy\in (f^n) \Longleftrightarrow f^n | xy \Longleftrightarrow f^n | x \text{ or } f| y \Longleftrightarrow x\in (f^n) \text{ or } y\in \sqrt{(f^n)} = (f).</me>Conversely, if <m>a</m> is not a prime power, then <m>a=gh</m>, for some <m>g</m>, <m>h</m> nonunits with no common factor, then take <m>gh\in (a)</m> but <m>g\notin (a)</m> and <m>h\notin \sqrt{(a)}</m>.
              </p>
  
            </solution>
          </example>
  
          <example xml:id="ex-primary-ideals-in-z"><title>Primary Ideals in <m>\Z</m></title>
  
  
            <statement>
              
  
              <p>
                The nonzero primary ideals in <m>\mathbb{Z}</m> are of the form <m>(p^n)</m> for some prime <m>p</m> and some <m>n \geqslant 1</m>. This example is a bit misleading, as it suggests that primary ideals are the same as powers of primes. We will soon see that it not the case.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-y2yzz2-primary-in-rkxyz"><title><m>(y^2,yz,z^2)</m> Primary in <m>R=k[x,y,z]</m></title>
  
  
            <statement>
              
  
              <p>
                In <m>R=k[x,y,z]</m>, the ideal <m>I=(y^2,yz,z^2)</m> is primary.
              </p>
  
            </statement>
  
            <solution>

  
              <p>
                Give <m>R</m> the grading with weights <m>\deg(y)=\deg(z)=1</m> and <m>\deg(x)=0</m>. If <m>g\notin \sqrt{I}=(y,z)</m>, then <m>g</m> has a degree zero term. If <m>f\notin I</m>, then <m>f</m> has a term of degree zero or one. The product <m>fg</m> has a term of degree zero or one, so is not in <m>I</m>.
              </p>
  
            </solution>
          </example>
  
          <example xml:id="ex-x2xy-not-primary-in-rkxyz"><title><m>(x^2,xy)</m> Not Primary in <m>R=k[x,y,z]</m></title>
  
  
            <statement>
              
  
              <p>
                In <m>R=k[x,y,z]</m>, the ideal <m>Q =(x^2,xy)</m> is not primary, even though <m>\sqrt{Q}=(x)</m> is prime.
              </p>
  
            </statement>
  
            <solution>
      
  
              <p>
                The offending product is <m>xy</m>: we have <m>x \notin Q</m> and <m>y \notin \sqrt{Q}</m>.
              </p>
  
            </solution>
          </example>

          <remark>
            <p>
              One thing that can be confusing about primary ideals is that the definition is not symmetric. For <m>Q</m> to be a primary ideal, given a product <m>xy \in Q</m>, the definition says that if <m>x \notin Q</m>, then <m>y \in \sqrt{Q}</m>, and it <em>also</em> says that if <m>y \notin Q</m>, then <m>x \in \sqrt{Q}</m>. In , we found that <m>x \notin Q</m> and <m>y \notin \sqrt{Q}</m>, so <m>Q</m> is not primary. Notice that if we switch the roles of <m>x</m> and <m>y</m>, we <em>do</em> have <m>x \in \sqrt{Q}</m>, but that is not sufficient to make <m>Q</m> a primary ideal.
            </p>
          </remark>
  
          <theorem xml:id="thm-characterization-of-primary-ideals"><title>Characterization of Primary Ideals</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is noetherian, the following are equivalent: (a) <m>Q</m> is primary. (b) Every zerodivisor in <m>R/Q</m> is nilpotent on <m>R/Q</m>. (c) <m>\Ass(R/Q)</m> is a singleton. (d) <m>Q</m> has exactly one minimal prime, and no embedded primes. (e) <m>\sqrt{Q} = P</m> is prime and for all <m>r, w \in R</m> with <m>w \notin P</m>, <m>rw \in Q \Rightarrow r \in Q</m>. (f) <m>\sqrt{Q}= P</m> is prime, and <m>Q R_{P} \cap R = Q</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                <m>(1) \iff (2)</m>: Saying <m>y</m> is a zerodivisor modulo <m>Q</m> if there is some <m>x\notin Q</m> with <m>xy\in Q</m>. So the condition that every zerodivisor on <m>R/Q</m> must be nilpotent is equivalent to<me>\exists x \notin Q : xy \in Q \implies y^n \in Q.</me>This is exactly the condition that <m>Q</m> is a primary ideal.
              </p>
  
              <p>
                <m>(2) \iff (3)</m>: First, note that the associated primes of <m>R/Q</m> are the associated primes of the ideal <m>Q</m>, while the minimal primes of <m>R/Q</m> are the minimal primes of <m>Q</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Zerodivisors Associated Primes|Theorem]], <me>\bigcup_{P \in \Ass(Q)} P \, = \, \mathcal{Z}(R/Q).</me>Every minimal prime of <m>Q</m> is associated to <m>Q</m>, so<me>\bigcap_{P \in \Min(Q)} P = \bigcap_{P \in \Ass(Q)} P.</me>Finally, every nilpotent element is always a zerodivisor. Putting all these together, we always have the following:<me>\bigcup_{P \in \Ass(Q)} P \, = \, \mathcal{Z}(R/Q) \, \supseteq  \{ r \in R \mid r + Q \in \mathcal{N}(R/Q) \} \, = \bigcap_{P \in \Min(Q)} P = \bigcap_{P \in \Ass(Q)} P.</me> On the one hand, (2) says that the set of zerodivisors on <m>R/Q</m> coincides with the elements in the nilradical of <m>R/Q</m>; thus (2) is the statement that we have equality throughout. So (2) holds if and only if<me>\bigcup_{P \in \Ass(Q)} P \, = \bigcap_{P \in \Ass(Q)} P.</me>The rest of the proof is elementary set theory: the intersection and union of a collection of sets agree if and only if there is only one set. More precisely, we have equality above if and only if there is only one associated prime.
              </p>
  
              <p>
                <m>(3) \iff (4)</m> is clear, given that every ideal has a minimal prime and minimal primes are always associated, so having a single associated prime means having only one minimal prime and no embedded primes.
              </p>
  
              <p>
                <m>(1) \iff (5)</m>: Given the observation that the radical of a primary ideal is prime, this is just a rewording of the definition.
              </p>
  
              <p>
                <m>(5) \iff (6)</m>: By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Localization Ideals|Lemma]], we have the following characterization:<me>Q R_P \cap R = \lbrace r \in R \mid sr \in Q \textrm{ for some } s \notin P \rbrace.</me>Thus the second condition in <m>(5)</m> is equivalent to <m>Q R_Q \cap R = Q</m>.
              </p>
  
            </proof>
          </theorem>
  
          <lemma xml:id="lem-radical-max-implies-primary"><title>Radical Max Implies Primary</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a noetherian ring and <m>I</m> be an ideal. If <m>\sqrt{I}=\fm</m> a maximal ideal, then <m>I</m> is a primary ideal.
              </p>
  
            </statement>
  
            <proof>
  
  
              <p>
                By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Support and Associated Primes|Theorem]], <m>\Ass(R/I)</m> is nonempty and contained in <m>\Supp(R/I)=V(I)=\{\fm\}</m>, so <m>\Ass(R/I) = \{ \fm \}</m>, and hence by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Characterization of Primary Ideals|Proposition]] <m>I</m> is primary.
              </p>
  
            </proof>
          </lemma>

          <remark>
            <p>
              Note that the assumption that <m>\fm</m> is maximal was necessary here. Indeed, having a prime radical does not guarantee an ideal is primary, as we saw <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Exercise - <m>(x2,xy)</m> Not Primary in <m>R=kx,y,z</m>|here]]. Moreover, even the powers of a prime ideal may fail to be primary.
            </p>
          </remark>
        
          <example xml:id="ex-powers-of-prime-not-primary"><title>Powers of Prime not Primary</title>
  
  
            <statement>
              
  
              <p>
                Fix a field <m>k</m> and an integer <m>n \geqslant 2</m>, and let <m>R = k[x,y,z]/(xy-z^n)</m>. Consider the prime ideal <m>P = (x,z)</m> in <m>R</m>. On the one hand, <m>xy = z^n \in P^n</m>, while <m>x \notin P^n</m> and <m>y \notin \sqrt{P^n} = P</m>. Therefore, <m>P^n</m> is not primary, even though its radical is the prime <m>P</m>.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-contraction-of-primary-ideals-is-primary"><title>Contraction of Primary Ideals is Primary</title>
  
  
            <statement>
              
  
              <p>
                Let <m>f:R\to S</m> be a ring homomorphism. If <m>Q</m> is a primary ideal in <m>S</m>, then <m>Q \cap R</m> is a primary ideal in <m>R</m>.
              </p>
  
            </statement>
  
            <proof>
  
  
              <p>
                if <m>xy \in Q \cap R</m>, and <m>x \notin Q \cap R</m>, then <m>f(x) \notin Q</m>, so <m>f(y^n) = f(y)^n \in Q</m> for some <m>n</m>. Therefore, <m>y^n \in Q \cap R</m>, and <m>Q \cap R</m> is indeed primary.
              </p>
  
            </proof>
          </lemma>
  
          <lemma xml:id="lem-ass-intersection"><title>Ass Intersection</title>
  
  
            <statement>
              
  
              <p>
                If <m>I_1,\dots,I_t</m> are ideals, then <me>\Ass \left( R/ \bigcap_{j=1}^t I_j \right) \subseteq \bigcup_{j=i}^t \Ass(R/I_j).</me> 
                
              </p>

              </statement>

              <proof>
                <p>
                  The canonical map <m>R \to R/I_1 \oplus R/I_2</m> sending <m>r \mapsto (r+I_1, r+I_2)</m> has kernel <m>I_1 \cap I_2</m>, so there is an inclusion <m>R/(I_1 \cap I_2) \subseteq R/I_1 \oplus R/I_2</m>. Hence, by  and , <me>\Ass(R/(I_1\cap I_2)) \subseteq \Ass(R/I_1 \oplus R/I_2) = \Ass(R/I_1) \cup \Ass(R/I_2).</me>The statement for larger <m>t</m> follows by an easy induction.
                </p>
              </proof>
  
          </lemma>
  
          <corollary xml:id="cor-intersections-primary"><title>Intersections Primary</title>
  
  
            <statement>
              
  
              <p>
                A finite intersection of <m>P</m>-primary ideals is <m>P</m>-primary.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Let <m>I_1, \ldots, I_t</m> be <m>P</m>-primary ideals. Then by ,<me>\Ass \left( \bigcap_{j=1}^t I_j \right) \subseteq \bigcup_{j=i}^t \Ass(I_j) = \{ P \}.</me>On the other hand, <me>\bigcap_{j=1}^t I_j \subseteq I_1 \neq R \quad \textrm{so} \quad R/(\bigcap_{j=1}^t I_j) \neq 0.</me> By , <m>\Ass(I_1 \cap \cdots \cap I_t)</m> is nonempty, and thus <m>\Ass(I_1 \cap \cdots \cap I_t) = \{ P \}</m>. Then <m>I_1 \cap \cdots \cap I_t</m> is <m>P</m>-primary by the characterization of primary in  (3) above.
              </p>
  
            </proof>
          </corollary>
  
          <definition xml:id="defn-primary-decomposition"><title>Primary Decomposition</title>
          <statement>
            <p>
              A <em>primary decomposition</em><idx><h>primary decompostion</h></idx><idx><h>irredundant primary decompostion</h></idx> of an ideal <m>I</m> is an expression of the form <me>I = Q_1 \cap \cdots \cap Q_t</me>with each <m>Q_i</m> primary. A primary decomposition is <em>irredundant</em> if <me>\sqrt{Q_i} \neq \sqrt{Q_j} \textrm{ for } i\neq j \quad \textrm{ and } \quad Q_i \not\supseteq \displaystyle\bigcap_{j\neq i} Q_j \textrm{ for all } i.</me>
            </p>
          </statement>
          </definition>

          <remark>
            <p>
              By <xref ref="cor-intersections-primary"/>, the intersection of <m>P</m>-primary ideals is <m>P</m>-primary. Thus we can turn any primary decomposition into an irredundant one by combining the terms with the same radical, then removing redundant terms.
            </p>
          </remark>
        
          <example xml:id="primary-decomposition-in-mathbbz"><title>Primary decomposition in <m>\mathbb{Z}</m></title>
  
            <p>
              Given a decomposition of <m>n \in \mathbb{Z}</m> as a product of distinct primes, say <m>n = p_1^{a_1} \cdots p_k^{a_k}</m>, then the primary decomposition of the ideal <m>(n)</m> is <m>(n) = (p_1^{a_1}) \cap \cdots \cap (p_k^{a_k})</m>. However, this example can be deceiving, in that it suggests that primary ideals are just powers of primes; as we saw in <xref ref="ex-powers-of-prime-not-primary"/>, powers of primes may fail to be primary! Moreover, an ideal might be primary but not a power of a prime.
            </p>
  
          </example>

          <remark>
            <p>
              The existence of primary decompositions was first shown by Emanuel Lasker (yes, the chess champion!) for polynomial rings and power series rings in 1905, and then extended to any noetherian ring (which were not called that yet at the time) by Emmy Noether in 1921.
            </p>
          </remark>
        
          <theorem xml:id="thm-lasker-1905-noether-1921"><title>Lasker, 1905, Noether, 1921</title>
  
  
            <statement>
              
  
              <p>
                Every ideal in a noetherian ring admits a primary decomposition.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                We will say that an ideal is irreducible <idx><h>irreducible ideal</h></idx> if it cannot be written as a proper intersection of larger ideals. If <m>R</m> is noetherian, we claim that any ideal of <m>R</m> can be expressed as a finite intersection of irreducible ideals. If the set of ideals that are not a finite intersection of irreducibles were nonempty, then by noetherianity there would be an ideal maximal with the property of not being an intersection of irreducible ideals. Such a maximal element must be an intersection of two larger ideals, each of which are finite intersections of irreducibles, giving a contradiction.
              </p>
  
              <p>
                We claim that every irreducible ideal is primary. If we show this, any decomposition into an intersection of irreducible ideals will be a primary decomposition. To prove the contrapositive, suppose that <m>Q</m> is not primary, and take <m>xy\in Q</m> with <m>x\notin Q</m>, <m>y\notin \sqrt{Q}</m>. The ascending chain of ideals <me>(Q : y) \subseteq (Q : y^2) \subseteq (Q : y^3) \subseteq \cdots</me>stabilizes for some <m>n</m>, since <m>R</m> is moetherian. Note that this means that for any element <m>f \in R</m>, we have <m>y^{n+1} f\in Q \implies y^n f\in Q</m>. Using this, we will show that <me>{(Q + (y^n))\cap( Q +(x)) = Q},</me>proving that <m>Q</m> is not irreducible. The containment <m>Q \subseteq (Q + (y^n))\cap( Q + (x))</m> is clear. On the other hand, if <me>a \in (Q + (y^n))\cap( Q + (x)),</me> we can write <m>a=q+by^n</m> for some <m>q \in Q</m>, and <me>a\in Q + (x) \implies ay \in Q + (xy) = Q.</me>So<me>b y^{n+1} = ay - qy \in Q \implies b \in (Q : y^{n+1}) = (Q : y^n).</me>By definition, this means that <m>by^n \in Q</m>, and thus <m>a = q+by^n \in Q</m>. This shows that <m>Q</m> is not irreducible, concluding the proof.
              </p>
  
            </proof>
          </theorem>
  
          <example xml:id="ex-irredundant-decompositions-for-ix2xy"><title>Irredundant Decompositions for <m>I=(x^2,xy)</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>R=k[x,y]</m>, where <m>k</m> is a field, and <m>I=(x^2,xy)</m>. We can write <me>I = (x) \cap (x^2,xy,y^2) = (x) \cap (x^2,y).</me>These are two different irredundant primary decompositions of <m>I</m>.
              </p>
  
            </statement>
  
            <solution>

  
              <p>
                To check this, we just need to see that each of the ideals <m>(x^2,xy,y^2)</m> and <m>(x^2,y)</m> are primary. Observe that each has radical <m>\fm=(x,y)</m>, which is maximal, so these ideals are both primary. In fact, our ideal <m>I</m> has infinitely many minimal primary decompositions: given any <m>n \geqslant 1</m>, <me>I = (x) \cap (x^2, xy, y^n)</me>is an irredundant primary decomposition. One thing all of these have in common is the radicals of the primary components: they are always <m>(x)</m> and <m>(x,y)</m>.
              </p>
  
            </solution>
          </example>
  
          <theorem xml:id="thm-1st-uniqueness-theorem-for-primary-decompositions"><title>1st Uniqueness Theorem for Primary Decompositions</title>
  
  
            <statement>
              
  
              <p>
                Suppose <m>I</m> is an ideal in a noetherian ring <m>R</m>. Given any irredundant primary decomposition of <m>I</m>, say <me>I = Q_1 \cap \cdots \cap Q_t,</me>we have <me>\{ \sqrt{Q_1}, \ldots, \sqrt{Q_t}\}=\Ass(I).</me> In particular, this set is the same for all irredundant primary decompositions of <m>I</m>.
              </p>
  
            </statement>
  
            <proof>
              
  
              <p>
                For any primary decomposition, irredundant or not, by  we have <me>\Ass(I) \subseteq \bigcup_i \Ass(Q_i) = \{ \sqrt{Q_1},\dots,\sqrt{Q_t}\}.</me> We just need to show that in an irredundant decomposition as above, every <m>P_j := \sqrt{Q_j}</m> is indeed an associated prime of <m>I</m>. So fix <m>j</m>, and let <me>I_j = \displaystyle\bigcap_{i\neq j} Q_i \supseteq I.</me>Since the decomposition is irredundant, the module <m>I_j/I</m> is nonzero. By , <m>I_j/I</m> has an associated prime, say <m>\mathfrak{a}</m>. Fix <m>x_j\in R</m> such that <m>\mathfrak{a}</m> is the annihilator of <m>x_j+I</m> in <m>I_j/I</m> for some <m>x_j \in I_j</m>. Since <me>Q_j x_j \subseteq Q_j \cdot \displaystyle\bigcap_{i\neq j} Q_i \subseteq Q_1 \cap \cdots \cap Q_n = I,</me> we conclude that <m>Q_j \subseteq \ann(x_j+I) = \mathfrak{a}</m>. Since <m>P_j</m> is the unique minimal prime of <m>Q_j</m> and <m>\mathfrak{a}</m> is a prime containing <m>Q_j</m>, we must have <m>P_j \subseteq \mathfrak{a}</m>. On the other hand, for any <m>r\in \mathfrak{a}</m>, we have <m>rx_j\in I \subseteq Q_j</m>, and since <m>x_j\notin Q_j</m>, we must have <m>r \in \sqrt{Q_j} = P_j</m> by the definition of primary ideal. Thus <m>\mathfrak{a} \subseteq P_j</m>, so we can now conclude that <m>\mathfrak{a} = P_j</m>. This shows that <m>P_j</m> is an associated prime of <m>I_j/I</m> for all <m>j</m>. But this is a submodule of <m>R/I</m>, and thus <m>P_j</m> is associated to <m>R/I</m>.<me>\{ \sqrt{Q_1}, \ldots, \sqrt{Q_t}\}=\Ass(I).</me>
              </p>
  
            </proof>
          </theorem>
  
          <theorem xml:id="thm-2nd-uniqueness-theorem-for-primary-decompositions"><title>2nd Uniqueness Theorem for Primary Decompositions</title>
  
  
            <statement>
              
  
              <p>
                If <m>I</m> is an ideal in a noetherian ring <m>R</m>, then the minimal components in any irredundant primary decomposition of <m>I</m> are unique. More precisely, if <me>I = Q_1 \cap \cdots \cap Q_t</me> is an irredundant primary decomposition, and <m>\sqrt{Q_i} \in \Min(I)</m>, then <m>Q_i</m> is given by the formula <me>Q_i = I R_{\sqrt{Q_i}} \cap R,</me>which does not depend on our choice of irredundant decomposition.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Let <m>Q</m> be a primary ideal, and let <m>P</m> be any prime. If <m>Q \subseteq P</m>, then <m>\sqrt{Q} \subseteq P</m>. Since the associated primes of an ideal localize well, by , <m>Q_P</m> will still have a unique associated prime. Thus, the localization <m>Q_P</m> is either: - the unit ideal, if <m>Q \not\subseteq P</m>, or - a primary ideal, if <m>Q \subseteq P</m>. Finite intersections commute with localization, by , so for any prime <m>P</m>, <me>I_{P} = (Q_1)_{P} \cap \cdots \cap (Q_t)_{P}</me>is a primary decomposition, although not necessarily irredundant. Fix a minimal prime <m>P=P_i</m> of <m>I</m>, and let <m>Q = Q_i</m>. When we localize at <m>P</m>, all the other components become the unit ideal, since their radicals are not contained in <m>P</m>, and thus <m>I_{P} = Q_P</m>. We can then contract to <m>R</m> to get <m>I_{P} \cap R = (Q_i)_{P_i} \cap R = Q_i</m>, since <m>Q_i</m> is <m>P_i</m>-primary and we can then apply  (6).
              </p>
  
            </proof>
          </theorem>

          <remark>
            <p>
              If <m>R</m> is not noetherian, we may or may not have a primary decomposition for a given ideal. It is true that if an ideal <m>I</m> in a general ring has a primary decomposition, then the primes occurring are the same in any irredundant decomposition. However, they are not the associated primes of <m>I</m> in general; rather, they are the primes that occur as radicals of annihilators of elements.
            </p>
          </remark>
        
          <example xml:id="ex-decomposition-of-radical-ideal-is-unique"><title>Decomposition of Radical Ideal is Unique</title>
  
            <p>
              If <m>R</m> is noetherian, and <m>I</m> is a radical ideal, then we have seen that <m>I</m> coincides with the intersection of its minimal primes <m>P_i</m>, meaning <m>I=P_1 \cap \cdots \cap P_t</m>. This is the <em>only</em> primary decomposition of a radical ideal.
            </p>
  
            <p>
              For a more concrete example, take the ideal <m>I = \left( xy, xz, yz \right)</m> in <m>k[x,y,z]</m>. This ideal is radical, so we just need to find its minimal primes. And indeed, one can check that <m>\left( xy, xz, yz \right) = \left( x, y \right) \cap \left( x, z \right) \cap \left( y, z \right)</m>. More generally, the radical monomial ideals are precisely those that are squarefree, and the primary components of a monomial ideal are also monomial.
            </p>
  
          </example>
  
          <example xml:id="ex-decomposition-of-6-in-zsqrt-5-unique"><title>Decomposition of <m>(6)</m> in <m>\Z[\sqrt{-5}]</m> Unique</title>
  
            <p>
              Let's get back to our motivating example in <m>\mathbb{Z}[\sqrt{-5}]</m>, where some elements can be written as products of irreducible elements in more than one way. For example, we saw that<me>6 = 2 \cdot 3 = (1 + \sqrt{-5}) (1 - \sqrt{-5}).</me>So <m>(6) = (2) \cap (3)</m>, but while <m>(2)</m> is primary, <m>(3)</m> is not. In fact, <m>(3)</m> has two distinct minimal primes, and the following is a minimal primary decomposition for <m>(6)</m>:<me>(6) = (2) \cap (3, 1+\sqrt{-5}) \cap (3, 1 - \sqrt{-5}).</me>In fact, all of these come components are minimal, and so this primary decomposition is unique. Primary decomposition saves the day!
            </p>
  
          </example>
  
          <definition xml:id="defn-symbolic-power"><title>Symbolic Power</title>
          <statement>
            <p>
              If <m>P</m> is a prime ideal in a ring <m>R</m>, the <m>n\th</m> <em>symbolic power</em><idx><h>symbolic power</h></idx><idx><h><m>P^{(n)}</m></h></idx> of <m>P</m> is <m>P^{(n)} := P^n R_{P} \cap R</m>.
            </p>
          </statement>
          </definition>
  
          <proposition xml:id="prop-characterizations-of-symbolic-powers"><title>Characterizations of Symbolic Powers</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be noetherian, and <m>P</m> a prime ideal of <m>R</m>. (a) <m>P^{(n)}=\{ r\in R \ \mid \ rs\in P^n \textrm{ for some } s\notin P \}</m>. (b) <m>P^{(n)}</m> is the unique smallest <m>P</m>-primary ideal containing <m>P^n</m>. (c) <m>P^{(n)}</m> is the <m>P</m>-primary component in any minimal primary decomposition of <m>P^n</m>.
              </p>
  
            </statement>
  
            <proof>
    
  
              <p>
                The first characterization follows from the definition, and the fact that expanding and contraction to/from a localization is equivalent to saturating with respect to the multiplicative set, which we proved in .
              </p>
  
              <p>
                We know that <m>P^{(n)}</m> is <m>P</m>-primary from one of the characterizations of primary we gave in . Any <m>P</m>-primary ideal satisfies <m>\fq R_{P} \cap R = \fq</m>, and if <m>\fq\supseteq P^{n}</m>, then <m>P^{(n)} = P^n R_{P} \cap R \subseteq \fq R_{P} \cap R = \fq</m>. Thus, <m>P^{(n)}</m> is the unique smallest <m>P</m>-primary ideal containing <m>P^n</m>.
              </p>
  
              <p>
                The last characterization follows from the second uniqueness theorem, .
              </p>
  
            </proof>
          </proposition>
  
          <example><title></title>
  
            <p><ol>
              <li>
              In <m>R=k[x,y,z]</m>, the prime <m>P=(y,z)</m> satisfies <m>P^{(n)}=P^n</m> for all <m>n</m>. This follows along the same lines as .
              </li>
  
              <li>
              In <m>R=k[x,y,z]=(xy-z^n)</m>, where <m>n \geqslant 2</m>, we have seen in Example  that the square of <m>P=(y,z)</m> is not primary, and therefore <m>P^{(2)}\neq P^2</m>. Indeed, <m>xy=z^n \in P^2</m>, and <m>x\notin P</m>, so <m>y\in P^{(2)}</m> but <m>y \notin P^2</m>.
              </li>
  
              <li>
              Let <m>X=X_{3\times 3}</m> be a <m>3\times 3</m> matrix of indeterminates, and <m>k[X]</m> be a polynomial ring over a field~<m>k</m>. Let <m>P=I_2(X)</m> be the ideal generated by <m>2\times 2</m> minors of <m>X</m>. Write <m>\Delta_{\substack{i|k \\j |l}}</m> for the determinant of the submatrix with rows <m>i,j</m> and columns <m>k,l</m>. We find <me>\begin{align*} x_{11} \det(X) = &amp; \, x_{11}x_{31} \Delta_{\substack{1|2 \\2 |3}} - x_{11}x_{32} \Delta_{\substack{1|1 \\2 |3}} + x_{11}x_{33} \Delta_{\substack{1|1 \\2 |2}} \\
              =&amp; \, (x_{11}x_{31} \Delta_{\substack{1|2 \\2 |3}} - x_{11}x_{32} \Delta_{\substack{1|1 \\2 |3}} + x_{11}x_{33} \Delta_{\substack{1|1 \\2 |2}} ) \\
              -&amp;\, (x_{11}x_{31} \Delta_{\substack{1|2 \\2 |3}} - x_{12}x_{31} \Delta_{\substack{1|1 \\2 |3}} + x_{13}x_{31} \Delta_{\substack{1|1 \\2 |2}} )\\
              =&amp;\,  -\Delta_{\substack{1|1 \\3 |2}} \Delta_{\substack{1|1 \\2 |3}} + \Delta_{\substack{1|1 \\3 |3}} \Delta_{\substack{1|1 \\2 |2}}\in I_2(X)^2.
              \end{align*}</me> Note that in the second row, we subtracted the Laplace expansion of the determinant of the matrix with row 3 replaced by another copy of row 1. That is, we subtracted zero.
              </li>
  
            </ol></p>
  
          </example>

          <remark>
            <p>
              While we will not discuss symbolic powers in detail, they are ubiquitous in commutative algebra. They show up as tools to prove various important theorems of different flavors, and they are also interesting objects in their own right. In particular, symbolic powers can be interpreted from a geometric perspective, via the Zariski-Nagata Theorem. Roughly, this theorem says that when we consider symbolic powers of prime ideals over <m>\mathbb{C}[x_1, \ldots, x_d]</m>, the polynomials in <m>P^{(n)}</m> are precisely the polynomials that vanish  on the variety corresponding to <m>P</m>. This result can be made sense of more generally, for any radical ideal in <m>\mathbb{C}[x_1, \ldots, x_d]</m> over any perfect field <m>k</m>, and even when <m>k = \mathbb{Z}</m>.
            </p>
          </remark>

        </section>

        <section xml:id="sec-krull-intersection">
          <title>The Krull Intersection Theorem</title>

          <!--***********************
          Section: Krull Intersection
          ************************-->
          
          <blockquote>
            <p>
              <q>Life happens at intersections.</q>
            </p>
            <attribution>Jack Dorsey</attribution>
          </blockquote>

          
          <p>Coming soon to an OER near you!</p>
        </section>
  
      </chapter>

      <chapter xml:id="ch-global-dim-theory"><title>Global Dimension Theory</title>

        <!--****************************
        Chapter: Global Dimension Theory
        *****************************-->
  
        <section xml:id="sec-dim-height">
          <title>Dimension and Height</title>

          <!--***********************
          Section: Dimension & Height
          ************************-->
          
          <blockquote>
            <p>
              <q>I don't like heights. This is why I stopped growing at fifth grade.</q>
            </p>
            <attribution>Billy Crystal</attribution>
          </blockquote>

          <remark>
            <p>
              We will now spend a while discussing the notion of dimension of a ring and dimension of a variety. To motivate the definition, let's first think in terms of varieties.
            </p>
    
            <p>
              We take our inspiration from the fundamental setting of dimension theory: vector spaces. The notion of basis doesn't make sense for varieties (What does it mean to span? Where is zero?), but one relevant thing we do have for both vector spaces and for varieties is subobjects.
            </p>
    
            <p>
              One way to characterize the dimension of a vector space <m>V</m> is the the largest number <m>d</m> such that there is a proper chain of subspaces <me>\{0\} = V_0 \subsetneq V_1 \subsetneq V_2 \subsetneq \cdots \subsetneq V_d = V.</me> We can try something similar for varieties, but for a reducible variety, this is not a very good notion. For example, for a union of <m>m</m> points, we can cook up a chain of <m>m</m> proper subvarieties by adding one more point each time, but a point should be zero-dimensional by any reasonable measure. So, if we want this approach to work, we should stick to chains of irreducible subvarieties.
            </p>

          </remark>

          <definition xml:id="defn-dimension-of-variety"><title>Dimension of Variety</title>
          <statement>
            <p>
              The <em>dimension</em><idx><h>dimension of a variety</h></idx> of an affine variety<m>X</m> is defined as <me>\sup \{ d \ | \ \exists \ \text{a strictly decreasing chain of irreducible subvarieties of $X$:} \ \ X_d \supsetneq X_{d-1} \supsetneq \cdots \supsetneq X_0\}.</me>
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-krull-dimension-of-a-ring"><title>Krull Dimension of a Ring</title>
          <statement>
            <p>
              The <em>Krull dimension</em><idx><h>Krull dimension</h></idx><idx><h>dimension</h></idx><idx><h><m>\dim(R)</m></h></idx> of a ring <m>R</m> is<me>\dim(R) :=  \sup \{d \mid \exists \text{ a strictly increasing chain of prime ideals } P_0 \subsetneq \cdots \subsetneq P_d\}.</me>We often call it simply the <em>dimension</em> of <m>R</m>. Alternatively, <m>\dim(R)</m> is the supremum of the lengths of saturated chains of primes of <m>R</m>.
            </p>

            <p>FIX</p>
          </statement>
          </definition>
  
          <definition xml:id="defn-dimension-of-a-module"><title>Dimension of a Module</title>
          <statement>
            <p>
              The <em>dimension</em><idx><h>dimension of a module</h></idx> of an <m>R</m>-module <m>M</m> is defined as <m>\dim(R/\ann_R(M))</m>.
            </p>
          </statement>
          </definition>
  
          <example xml:id="ex-dimension-of-field-is-zero"><title>Dimension of Field is Zero</title>
  
            <p>
              The dimension of any field is zero.
            </p>
  
          </example>
  
          <example xml:id="ex-equivalent-zero-dimensional-ring-definition"><title>Equivalent Zero Dimensional Ring Definition</title>
  
            <p>
              A ring is zero-dimensional if and only if every minimal prime of <m>R</m> is a maximal ideal.
            </p>
  
          </example>
  
          <example xml:id="ex-dimension-of-pids-not-fields-is-1"><title>Dimension of PIDs not Fields is <m>1</m></title>
  
            <p>
              The ring of integers <m>\Z</m> has dimension <m>1</m>, since there is one minimal prime <m>(0)</m> and every other prime is maximal. Likewise, any PID that is not a field has dimension one.
            </p>
  
          </example>
  
          <lemma xml:id="lem-ufd-height-1"><title>UFD height 1</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring and <m>I</m> be an ideal in <m>R</m>. If <m>R</m> is a UFD, <m>I</m> is a prime of height one if and only if <m>I=(f)</m> for a prime element <m>f</m>.
              </p>
  
            </statement>
  
            <proof>
    
  
              <p>
                If <m>I=(f)</m> with <m>f</m> irreducible, and <m>0 \subsetneq P \subseteq I</m>, then <m>P</m> contains some nonzero multiple of <m>f</m>, say <m>af^n</m> with <m>a</m> and <m>f</m> coprime. Since <m>a \notin I</m>, <m>a \notin P</m>, so we must have <m>f \in P</m>, so <m>P = (f)</m>. Thus, <m>I</m> has height one. On the other hand, if <m>I</m> is a prime of height one, we claim <m>I</m> contains an irreducible element. Indeed, <m>I</m> is nonzero, so contains some <m>f \neq 0</m>, and primeness implies one of the prime factors of <m>f</m> is contained in <m>I</m>. Thus, any nonzero prime contains a prime ideal of the form <m>(f)</m>, so a height one prime must be of this form.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-dim-of-kx_1x_2dotsx_12x_22dots-is-zero"><title>Dim of <m>k[x_1,x_2,\dots]/(x_1^2,x_2^2,\dots)</m> is Zero</title>
  
            <p>
              For a field <m>k</m>, the ring <m>R = k[x_1,x_2,\dots]/(x_1^2,x_2^2,\dots)</m> is not noetherian, as <me>(x_1) \subsetneq (x_1,x_2) \subsetneq (x_1,x_2,x_3) \subsetneq \cdots</me> is an infinite ascending chain, so <m>R</m> is not noetherian. However, <m>\sqrt{(0)} = (x_1,x_2,\dots)</m> is a maximal ideal, and hence <m>(x_1,x_2,\dots)</m> is the unique minimal prime of <m>R</m>, which is also maximal. Therefore, <m>\dim(R) = 0</m>.
            </p>
  
          </example>
  
          <example xml:id="nagata"><title>Nagata</title>
  
            <p>
              Let <m>R = k[x_{11},x_{21},x_{22}, x_{31}, x_{32}, x_{33},\ldots]</m> be a polynomial ring in infinitely many variables, which we are thinking of as arranged in an infinite triangle. <m>R</m> is clearly infinite-dimensional and not noetherian. Let <me>W = R \setminus \big((x_{11}) \cup (x_{21},x_{22}) \cup (x_{31},x_{32},x_{33})  \cup \cdots \big) = \bigcap_{n \geqslant 1} \big(R \setminus (x_{n1},\dots,x_{nn})\big)</me>and <m>S=W^{-1}R</m>. Note that <m>W</m> is an intersection of multiplicatively closed subsets, so this is a valid localization of <m>R</m>.
            </p>
  
            <p>
              For any <m>n</m>, we have a chain of primes <me>(x_{n1}) \subsetneq (x_{n1},x_{n2}) \subsetneq \cdots \subsetneq (x_{n1},\ldots, x_{nn})</me>in <m>R</m>. As these primes are all contained in <m>(x_{n1},\ldots, x_{nn})</m>, none of these intersects <m>W</m>, so the expansion to <m>S</m> of the chain above yields a proper chain of primes in <m>S</m>. It follows that <m>\dim(S) \geqslant n</m> for all <m>n \geqslant 1</m>, so <m>S</m> is infinite-dimensional.
            </p>
  
            <p>
              It turns out that <m>S</m> is noetherian, which is not at all obvious and a bit technical, so we will not prove it.
            </p>
  
          </example>
  
          <lemma xml:id="lem-properties-of-dimension-and-height"><title>Properties of Dimension and Height</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring. (a) A prime has height zero if and only if it is a minimal prime of <m>R</m>. (b) An ideal has height zero if and only if it is contained in a minimal prime of <m>R</m>. In particular, in a domain, every nonzero ideal has positive height. (c) <m>\dim(R) = \sup \{ \dim(R/P) \mid P \in \Spec(R) \} = \sup\{ \dim(R/P) \mid P \in \Min(R) \}</m>. (d) <m>\dim(R) = \sup \{ \ht(P) \mid P \in \Spec(R) \}=\sup\{ \mathrm{height}(Q) \mid Q \in \mSpec(R) \}</m>. (e) If <m>I</m> is an ideal, then <m>\dim(R/I) = \sup \{ n \mid \exists P_0 \subsetneq P_1 \subsetneq \cdots \subsetneq P_n, P_i \in V(I) \}</m>. (f) If <m>P</m> is prime, <me>\dim(R/P) + \ht(P) \leqslant \dim(R).</me> (g) If <m>I</m> is an ideal, <me>\dim(R/I) + \ht(I) \leqslant \dim(R).</me> (h) If <m>W</m> is a multiplicative set, then <m>\dim(W^{-1}R) \leqslant \dim(R)</m>. (i) If <m>P</m> is prime, then <m>\ht(P)=\dim(R_P)</m>. (j) If <m>P \subseteq Q</m> are primes, then <m>\dim(R_Q/ P R_Q)</m> is the supremum of the lengths of saturated chains of primes in <m>R</m> of the form <m>P = P_0 \subsetneq P_1 \subsetneq \cdots \subsetneq P_n = Q</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                We will prove some of these and leave the rest as an exercise.
              </p>
  
              <p>
                A prime has height <m>0</m> if and only if it contains no other prime, which is equivalent being a minimal prime of <m>R</m>.
              </p>
  
              <p>
                If <m>I</m> is contained in a minimal prime <m>Q</m> of <m>R</m>, then <m>\ht(Q)=0</m> by (1), so <m>\ht(I)=0</m> by definition. Conversely, if <m>\ht(I)=0</m>, by definition, there is a minimal prime of <m>I</m> of height <m>0</m>, so some minimal prime of <m>I</m> is a minimal prime of <m>R</m>, so <m>I</m> is contained in a minimal prime of <m>R</m>.
              </p>
  
              <p>
                It suffices to show that if <m>\dim(R/P) \geqslant a</m> and <m>\ht(P) \geqslant b</m> then <m>\dim(R) \geqslant a+b</m>. By definition, <m>\ht(P) \geqslant b</m> means that there is a chain of primes <me>Q_0 \subsetneq Q_1 \subsetneq \cdots \subsetneq Q_b = P.</me> By (5), <m>\dim(R/P) \geqslant a</m> means that there is a chain of primes <me>\mathfrak{a}_0 \subsetneq \mathfrak{a}_1 \subsetneq \cdots \subsetneq \mathfrak{a}_a</me> with <m>\mathfrak{a}_0 \supseteq P</m>. We can assume without loss of generality that <m>\mathfrak{a}_0 = P</m>, since if not, we can add it to the bottom of the chain. Putting these chains together, we get a chain of length <m>a+b</m> in <m>\Spec(R)</m>, so <m>\dim(R) \geqslant a+b</m>.
              </p>
  
              <p>
                Let <m>\dim(R/I) \geqslant a</m> and <m>\ht(I) \geqslant b</m>. The inequality <m>\ht(I) \geqslant b</m> means that for every minimal prime <m>P</m> of <m>I</m>, <m>\ht(P) \geqslant b</m>. The inequality <m>\dim(R/I) \geqslant a</m> implies that there exists a minimal prime of <m>P</m> of <m>I</m> such that <m>\dim(R/P) \geqslant a</m>. For such a minimal prime as in the latter statement, using (5), we get the desired conclusion.
              </p>
  
            </proof>
          </lemma>

          <remark>
            <p>
              We know that in noetherian rings, there can be arbitrarily long chains of primes, since the dimension can be infinite as in Nagata's . On the other hand, any ascending proper chain of primes is finite, as a consequence of the definition. Does this imply that every prime has finite height? This does not prevent that possibility that there could be an infinite descending chain of primes, which would then give any of the primes in the chain infinite height. (This seems strange in conjunction with the fact that in any ring, any prime contains a minimal prime, but it does not contradict this.) Another possible problem is there being two primes <m>P \subseteq Q</m> such that for all <m>n \geqslant 1</m> there exists a chain of primes of length <m>n</m> from <m>P</m> to <m>Q</m>.
            </p>
  
            <p>
              However, we will later show that the height of any ideal in a noetherian ring is finite.
            </p>
          </remark>
  
          <example xml:id="ex-int-extension-of-domains-nonzero-multiple"><title>Int Extension of Domains Nonzero Multiple</title>
  
            <p>
              Let <m>R \subseteq S</m> be an integral extension of domains. Show that every nonzero <m>s \in S</m> has a nonzero multiple in <m>R</m>, meaning that there exists <m>t \in S</m> such that <m>ts \neq 0</m> and <m>ts \in R</m>.
            </p>
  
          </example>
  
          <example><title></title>
  
            <p>
              Let <m>k</m> be an infinite field and <m>R = k[t^3,t^4,t^5]</m>. We have shown that <me>\displaystyle R\cong \frac{k[x,y,z]}{(x^3-yz,y^2-xz,z^2-x^2y)},</me> and that <m>R</m> is the coordinate ring of the curve <me>X = \{ (t^3,t^4,t^5) \ | t\in k\}.</me> As <m>X</m> is a curve (meaning it is parameterized by a single parameter), we should expect the dimension of the variety <m>X</m>, and equivalently of the ring <m>R</m>, to be <m>1</m>. Let's prove this.
            </p>
  
            <p>
              On the one hand, <m>R</m> is a domain, so <m>(0)</m> is the unique minimal prime. To show that <m>\dim(R) = 1</m>, we need to show that any nonzero prime ideal is maximal.
            </p>
  
            <p>
              Set <m>S = k[t^3]\subseteq R</m>. We note that <m>t^3</m> does not satisfy any algebraic relation over <m>k</m>, so <m>S</m> is isomorphic to a polynomial ring in one variable, where that one variable corresponds to <m>t^3</m>. Moreover, note that the inclusion <m>S \subseteq R</m> is integral, since <m>t^4</m> satisfies the monic polynomial <m>(T^4)^3- (t^3)^4=0</m> and <m>t^5</m> satisfies the monic polynomial <m>(T^5)^3 - (t^3)^5=0</m>. Polynomial rings in one variable have dimension <m>1</m>, so <m>\dim(S) = 1</m>.
            </p>
  
            <p>
              Let <m>P \in \Spec(R)</m> be nonzero. Note first that <m>P \cap S \neq 0</m>, since if <m>f \in P</m>, then there is some nonzero multiple of <m>f</m> in <m>S</m> by . Since <m>\dim(S)=1</m>, <m>P \cap S</m> is maximal. The inclusion<me>\frac{S}{P \cap S} \hookrightarrow \frac{R}{P}</me> is integral: a dependence relation for any representative yields a dependence relation. Since <m>\frac{S}{P \cap S}</m> is a field, <m>\frac{R}{P}</m> is a domain, and the inclusion is integral, by  we can conclude that <m>R/P</m> is a field, so <m>P</m> is a maximal ideal. This shows that every nonzero prime in <m>R</m> is maximal, and thus <m>\dim(R) = 1</m>.
            </p>
  
          </example>
  
          <definition xml:id="defn-catenary-ring"><title>Catenary Ring</title>
          <statement>
            <p>
              A ring is <em>catenary</em><idx><h>caternary ring</h></idx> if for every pair of primes <m>Q \supseteq P</m>, every saturated chain of primes <me>P = P_0 \subsetneq P_1  \subsetneq \cdots \subsetneq P_n = Q</me>has the same length.
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-equidimensional-ring"><title>Equidimensional Ring</title>
          <statement>
            <p>
              A ring is <em>equidimensional</em><idx><h>equidimensional ring</h></idx> if every maximal ideal has the same finite height, and every minimal prime has the same dimension.
            </p>
          </statement>
          </definition>
  
          <example><title></title>
  
            <p>
              Consider the ring <me>R = \displaystyle \frac{k[x,y,z]}{(xy,xz)}.</me>We can find the minimal primes of <m>R</m> by computing <m>\Min((xy,xz))</m> in <m>k[x,y,z]</m>. The prime ideals <m>(x)</m> and <m>(y,z)</m> are incomparable, and <m>(x)\cap(y,z)=(xy,xz)</m>, so <m>\Min(R)=\{(x),(y,z)\}</m>. We claim that the height of <m>(x-1,y,z)</m> is one: it contains the minimal prime <m>(y,z)</m>, and any saturated chain from <m>(y,z)</m> to <m>(x-1,y,z)</m> corresponds to a saturated chain from <m>(0)</m> to <m>(x-1)</m> in <m>k[x]</m>, which must have length 1 since this is a PID. The height of <m>(x,y-1,z)</m> is at least 2, as witnessed by the chain <m>(x) \subseteq (x,y-1) \subseteq (x,y-1,z)</m>. So <m>R</m> is not equidimensional.
            </p>
  
          </example>
  
          <example><title></title>
  
            <p>
              The ring <m>\Z_{(2)}[x]</m> is a domain that is not equidimensional. On the one hand, the maximal ideal <m>(2,x)</m> has height at least two, which we see from the chain <me>(0) \subsetneq (x) \subseteq (x,2).</me> Thus <m>\dim(R) \geqslant 2</m>. On the other hand, we will show later that the prime ideal <m>P = (2x-1)</m> has height 1, and it is maximal since <m>R/P \cong \Q</m>. Therefore, <m>\dim(R/P)=0</m>, and thus <me>\dim(R/P)+ \ht(P)=1</me> whereas <m>\dim R \geqslant 2</m>. %In fact, <m>\dim R=2</m>, but I won't justify this.
            </p>
  
            <p>
              The ring <m>R</m> in this example is in fact a catenary domain, which we will not justify. Notice that there are maximal ideals of distinct heights in this ring, for example the ideal <m>P</m> given above is a prime of height 1 whereas and the maximal ideal <m>\fm=(2,x)</m> has height 2. Thus this ring is not equidimensional.
            </p>
  
          </example>

        </section>

        <section xml:id="sec-over-up-down">
          <title>Over, Up, and Down</title>

          <!--*******************
          Section: Over, Up, Down
          ********************-->
          
          <blockquote>
            <p>
              <q>You're either down or you're up.</q>
            </p>
            <attribution>Shaun White</attribution>
          </blockquote>

          <remark>
            <p>
              In this section, we will collect theorems about the spectrum of a ring: theorems that assert that the map on Spec is surjective, and theorems about lifting chains of primes. Given a ring homomorphism <m>R \to S</m>, we want to study the behavior of chains of primes: how chains in <m>R</m> behave under expansion to <m>S</m> and how chains in <m>S</m> behave under contraction to <m>R</m>.
            </p>
          </remark>

          <definition xml:id="defn-fiber">
            <title>Fiber</title>
          <statement>
            <p>
              For a map of topological spaces <m>f: X\to Y</m> and <m>y \in Y</m>, the <em>fiber</em><idx><h>fiber of a map</h></idx> over <m>y</m> is the subspace <me>f^{-1}(y)= \{x\in X \ | \ f(x)=y\} \subseteq X.</me>
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-fiber-ring"><title>Fiber Ring</title>
          <statement>
            <p>
              Let <m>\psi:R\to S</m> be a ring homomorphism and <m>P \in \Spec(R)</m>. The <em>fiber ring</em><idx><h>fiber ring</h></idx><idx><h><m>\kappa_{\psi}(\fp)</m></h></idx> of <m>\psi</m> over <m>P</m> is <me>\kappa_{\psi}(P) :=  (R \setminus P)^{-1}(S/P S),</me> where by abuse of notation we write <m>R \setminus P</m> for the image of <m>R \setminus P</m> in <m>S</m>, and <m>P S</m> for <m>\psi(P) S</m>.
            </p>
          </statement>
          </definition>

          <p>EMPTY<idx><h><m>\kappa(P)</m></h></idx></p> 
  
          <lemma xml:id="lem-primes-contracting-to-p-fiber-ring">
            <title>Primes Contracting to p Fiber Ring</title>
  
  
            <statement>
              
  
              <p>
                Let <m>\psi:R\to S</m> be a ring homomorphism and <m>P \in \Spec(R)</m> be a prime ideal. The natural map <m>S \to \kappa_{\psi}(P)</m> induces a homeomorphism (in particular, an order-preserving bijection) <me>\Spec( \kappa_{\psi}(P) ) \cong \{ Q \in \Spec(S) \ | \ \psi^*(Q) = P \},</me> where the right-hand side has the subspace topology induced by the Zariski topology on <m>\Spec(S).</m>
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Consider the maps <me>\begin{CD}
  S@&gt;\pi&gt;&gt;S/PS@&gt;g&gt;&gt;(R\setminus P)\inv(S/PS).
  \end{CD}</me>For any localization map or any quotient map, the induced map on Spec is a homeomorphism onto its image. The map on spectra induced by <m>\pi</m> can be identified with the inclusion of <m>V(P S)</m> into <m>\Spec(S)</m>. For the second map, <m>g</m>, we saw in  that the map on spectra can be identified with the inclusion of the set of primes that do not intersect <m>R \setminus P</m>, i.e., those whose contraction is contained in <m>P</m>. Therefore, <m>(g \circ \pi)^*</m> is injective, since it is the composition of two injective maps.
              </p>
  
              <p>
                On the one hand, if a prime <m>Q</m> contains <m>PS</m>, then <m>Q \cap R \supseteq PS \cap R \supseteq P</m>. If moreover <m>Q \cap R \subseteq P</m>, we must have <m>Q \cap R = P</m>.
              </p>
  
              <p>
                We have thus shown that the image of <m>(g \circ \pi)^*</m> is the set of primes in <m>S</m> that contract to <m>P</m>. %So <m>Q</m> is in the image if and only if <m>\psi^{-1}(Q) = P</m>.
              </p>
  
            </proof>
          </lemma>
  
          <lemma xml:id="lem-image-criterion"><title>Image Criterion</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R \xrightarrow{\varphi} S</m> be a ring homomorphism. For any <m>P \in \Spec(R)</m>, <m>P \in \im(\varphi^*)</m> if and only if <me>P S \cap R = P.</me>
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                If <m>P S \cap R = P</m>, then <me>\frac{R}{P} = \frac{R}{P S \cap R} \hookrightarrow \frac{S}{P S},</me> so localizing at <m>(R \setminus P)</m>, we get an inclusion <m>\kappa(P) \subseteq \kappa_{\varphi}(P)</m>. Since <m>\kappa(P)</m> is nonzero, so is <m>\kappa_{\varphi}(P).</m> and thus its spectrum is nonempty. By , there is a prime mapping to <m>P</m>.
              </p>
  
              <p>
                If <m>P S \cap R \neq P</m>, then <m>P S \cap R \supsetneq P</m>. If <m>Q \cap R = P</m>, then <m>Q \supseteq P S</m>, so <m>Q \cap R \supsetneq P</m>. So no prime contracts to <m>P</m>.
              </p>
  
            </proof>
          </lemma>
  
          <example><title></title>
  
            <p>
              Let <m>R = \C[x^n] \subseteq S = \C[x]</m>. The ideal <m>x^n R</m> is prime, while <m>x^n S</m> is not even radical. Nevertheless, <m>x^n S \cap R = (x) \cap R = x^n R</m>.
            </p>
  
          </example>
  
          <example xml:id="inclusion-triangle"><title>Inclusion Triangle</title>
  
            <p>
              Consider the inclusion <m>R:=k[xy,xz,yz]\to S:=k[x,y,z]</m> and the prime <m>P = (xy)</m> in <m>R</m>. Notice that <m>(xz)(yz) \in P S \cap R</m>, but <em>not</em> in <m>P</m>, so <m>P S \cap R \supsetneq P</m>, and thus <m>P \notin \im(\varphi^*)</m>. We can check this more directly, by noting that any prime <m>Q</m> in <m>S</m> contracting to <m>P</m> would contain <m>P S = (x) \cap (y)</m>, so <m>Q \supseteq (x)</m> or <m>Q \supseteq (y)</m>. But <m>(x) \cap R = (xy,xz) \supsetneq P</m> and <m>(y) \cap R = (xy,yz) \supsetneq P</m>, so no prime in <m>S</m> contracts to <m>P</m>.
            </p>
  
          </example>
  
          <corollary xml:id="cor-direct-summand-and-surj-spec-map"><title>Direct Summand and Surj Spec Map</title>
  
  
            <statement>
              
  
              <p>
                If <m>R\subseteq S</m> is a direct summand, the map <m>\Spec(S) \to \Spec(R)</m> is surjective.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                By , we know <m>I S \cap R = I</m> for all ideals in this case, so  says the map on Spec is surjective.
              </p>
  
            </proof>
          </corollary>
  
          <definition xml:id="defn-integral-element-1"><title>Integral Element</title><statement>
            <p>
              Let <m>R</m> be a ring, <m>S</m> an <m>R</m>-algebra, and <m>I</m> an ideal. An element <m>r</m> of <m>R</m> is <em>integral</em><idx><h>integral over an ideal</h></idx> over <m>I</m> if it satisfies an equation of the form <me>r^n + a_1 r^{n-1} + \cdots + a_{n-1} r + a_n = 0 \quad \text{with} \ a_i \in I^i \ \text{for all} \  i.</me> An element of <m>S</m> is <em>integral</em> over <m>I</m> if <me>s^n + a_1 s^{n-1} + \cdots + a_{n-1} s + a_n = 0 \quad \text{with} \ a_i \in I^i \ \text{for all} \  i.</me> In both cases, we say that <m>r</m> and <m>s</m> satisfy an <em>equation of integral dependence</em> over <m>I.</m>
            </p>

            <p>FIX <idx><h>integral closure of an ideal</h></idx><idx><h><m>\overline I</m></h></idx><idx><h><m>\overline{I}^S</m></h></idx></p>
          </statement>
          </definition>

          <remark>
            <p>
              Notice that <m>\overline{I}^S \cap R = \overline{I}</m> is immediate from the definition.
            </p>
          </remark>

          <example xml:id="ex-rees-algebra"><title>Rees Algebra</title>
  
            <p>
              Let <m>R\subseteq S</m>, <m>I</m> be an ideal of <m>S</m>, and <m>t</m> be an indeterminate. Consider the rings <m>R[It]\subseteq R[t] \subseteq S[t].</m> Here <m>R[It]</m> is the subalgebra of <m>R[t]</m> generated by elements of the form <m>at</m> for all <m>a \in I</m>. Notice that we can give this a structure of a graded ring by setting all elements in <m>R</m> to have degree <m>0</m> and <m>t</m> to have degree <m>1</m>, so<me>R[It] = \bigoplus_{n \geqslant 0} I^n t^n.</me> This is usually called the <em>Rees algebra</em><idx><h>Rees algebra</h></idx> of <m>I</m>. 
              - <m>\overline{I}^S =\{ s \in S \ | \ st\in S[t] \ \text{is integral over the ring} \ R[It]\}</m>. 
              - <m>\overline{I}^S</m> is an ideal of <m>S</m>.
            </p>
  
          </example>
  
          <lemma xml:id="lem-extension-contraction-lemma-for-int.-ext."><title>Extension-Contraction Lemma for Int. Ext.</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R \subseteq S</m> be integral, and <m>I</m> be an ideal of <m>R</m>. Then <m>IS \subseteq\overline{I}^S</m>, and hence <m>I S \cap R \subseteq \overline{I}</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Let <m>x\in IS</m>. We can write <m>x = a_1 s_1 + \cdots + a_t s_t</m> for some <m>a_i\in I</m>. Moreover, taking <m>S'=R[s_1,\dots,s_t]</m>, we also have <m>x\in IS'</m>. We will show that <m>x \in \overline{I}^{S'}</m>, so <m>x \in \overline{I}^{S}</m> follows as a corollary. So we might as well replace <m>S</m> with <m>S'</m>, so that <m>R \subseteq S</m> is also integral and module-finite. By , the extension is also module-finite.
              </p>
  
              <p>
                Let <m>S= R b_1 + \cdots + R b_n</m>. We can write <me>x b_i = \left(\sum_{k=1}^t a_k s_k \right) b_i = \sum_j a_{ij} b_j</me> with <m>a_{ij}\in I</m>. We can write these equations in the form <m>x v = Av</m>, where <m>v=(b_1,\dots,b_u)</m>, and <m>A=[a_{ij}]</m>. By the determinantal trick, , we have <m>\det(xI-A)v=0</m>. Since we can assume <m>b_1=1</m>, we have <m>\det(xI-A)=0</m>. The fact that this is the type of equation we want follows from the monomial expansion of the determinant: any monomial is a product of <m>n</m> terms where some of them are copies of <m>x</m>, and the rest are elements of <m>I</m>. Since this is a product of <m>n</m> terms, a term in <m>x^i</m> has a coefficient coming from a product of <m>n-i</m> elements of <m>I</m>.
              </p>
  
              <p>
                So this shows that <m>IS \subseteq\overline{I}^S</m>. Now notice that <m>\overline{I}^S \cap R = \overline{I}</m> is immediate from the definition, as noted in .
              </p>
  
            </proof>
          </lemma>
  
          <theorem xml:id="thm-lying-over"><title>Lying Over</title>
            <idx><h>Lying Over Theorem</h></idx>
  
            <statement>
              
  
              <p>
                If <m>R\subseteq S</m> is an integral extension, then <m>P S \cap R = P</m> for every <m>P \in \Spec(R)</m>, and the induced map <m>\Spec(S) \longrightarrow \Spec(R)</m> is surjective.
              </p>
  
            </statement>
  
            <proof>
      
  
              <p>
                Let <m>I</m> be any ideal in <m>R</m>. Given any <m>r \in \overline{I}</m>, we have<me>r^n + a_1 r^{n-1} + \cdots + a_{n-1} r + a_n = 0</me>for some <m>n</m> and some <m>a_i \in I^i</m> for all <m>i</m>, so<me>r^n = - a_1 r^{n-1} - \cdots - a_{n-1} r - a_n \in I.</me>Thus <m>\overline{I} \subseteq \sqrt{I}</m>. Therefore, if <m>P</m> is a prime in <m>R</m>, by  we have <m>P S \cap R \subseteq \overline{P}</m>, and<me>P S \cap R \subseteq \overline{P} \subseteq \sqrt{P} = P.</me>Then <m>P S \cap R = P</m>, and by  we conclude that <m>P</m> is in the image of the map on Spec.
              </p>
  
            </proof>
          </theorem>

          <remark>
            <p>
              Both assumptions that the extension is integral and that it is an inclusion are needed in <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Lying Over|Lying Over]]; we cannot reduce to the case of an integral inclusion. The point is that <m>R \to S</m> being an inclusion does not translate into a property of the induced map on Spec.
            </p>
          </remark>
  
          <example><title></title>
  
            <p>
              We saw in  that the map induced on Spec by the inclusion <m>k[xy,xz,yz] \subseteq k[x,y,z]</m> is not surjective. So  does not apply — indeed, this inclusion is not module-finite, and thus by  it is not integral. For example, the infinite set <m>\{ 1, x^n, y^n, z^n \mid n \geqslant 1\}</m> is a minimal generating set for <m>k[x,y,z]</m> over <m>k[xy,xz,yz]</m>.
            </p>
  
          </example>
  
          <example><title></title>
  
            <p>
              Suppose <m>f</m> is a regular element on <m>R</m>, but not a unit. Since <m>f</m> is regular, the map <m>R \longrightarrow R_f</m> is an inclusion, but we claim it is not integral. If <m>\frac{1}{f}</m> is integral over <m>R</m>, there would be <m>a_i \in R</m> such that <me>\frac{1}{f^n} + \frac{a_{n-1}}{f^{n-1}} + \cdots + \frac{a_1}{f} + a_0 = 0.</me> After multiplying by <m>f^n</m> all terms are of the form <m>\frac{r}{1}</m>, and thus in <m>R</m>, since the localization map is injective. So <me>1 = -( a_{n-1} f + \cdots + a_1 f^{n-1} + a_0 f^n) \in (f),</me> and <m>f</m> must be a unit. So whenever <m>f</m> is a regular element but not a unit, <m>R \longrightarrow R_f</m> is an example of an inclusion that is not integral. Note that the image of the map on Spec is the complement of <m>V(f)</m>, so in particular the map is not surjective.
            </p>
  
            <p>
              In contrast, the map <m>R \longrightarrow R/(f)</m> is integral, since it is module-finite, but it is not an inclusion. The map on Spec is again not surjective: its image is <m>V(f)</m>.
            </p>
  
          </example>

          <remark>
            <p>
              Let <m>I</m> be an ideal in <m>S</m>. Suppose <m>R \to S</m> is an integral extension. There is an induced map <m>R/(I \cap R) \to S/I</m>, and that map is integral: an equation of integral dependance for <m>s \in S</m> over <m>R</m> gives an equation for integral dependance of its class in <m>S/I</m> over <m>R/(I \cap R)</m>.
            </p>
          </remark>

          <lemma xml:id="lem-integral-extension-maximal-contracts-to-maximal"><title>Integral Extension Maximal Contracts to Maximal</title>
  
  
            <statement>
              
  
              <p>
                If <m>\varphi: R\to S</m> is integral, <m>Q \cap R</m> is maximal if and only if <m>Q</m> is maximal in <m>S</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                By , the induced map <m>R/(Q \cap R) \subseteq S/Q</m> is an integral extension of domains, and <m>Q</m> (respectively, <m>Q \cap R</m>) is maximal if and only if <m>S/Q</m> (respectively, <m>R/(Q \cap R)</m>) is a field. So this follows by .
              </p>
  
            </proof>
          </lemma>
  
          <lemma xml:id="lem-integral-preserved-by-localization"><title>Integral Preserved by Localization</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R \to S</m> be integral, and let <m>W</m> be a multiplicatively closed subset of <m>R</m>. Then <m>W^{-1}R \to W^{-1}S</m> is integral.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Since <m>W</m> is a multiplicatively closed subset of <m>R</m>, its image in <m>S</m> is also multiplicatively closed. Given <m>x\in S</m> and <m>w\in W</m>, then we have equations of the form <me>x^n + r_1 x^{n-1} + \cdots + r_n = 0 \implies \left( \frac{x}{w} \right)^n + \frac{r_1}{w} \left( \frac{x}{w} \right)^{n-1} + \cdots + \frac{r_n}{w^n}  =0.</me> Thus <m>\frac{x}{w}</m> is integral over <m>W^{-1}S</m>, and <m>S</m> is integral over <m>R</m>.
              </p>
  
            </proof>
          </lemma>
  
          <theorem xml:id="thm-incomparability"><title>Incomparability</title>
            <idx><h>Incomparability</h></idx>
  
  
            <statement>
              
  
              <p>
                If <m>R \longrightarrow S</m> is integral and <m>P \subseteq Q</m> are primes in <m>S</m> that satisfy <m>P \cap R = Q \cap R</m>, then <m>P = Q</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                In this case we can reduce to the case of an inclusion: <m>f\!: R \to S</m> factors through <m>R/\ker f</m>, and the map induced on Spec factors as <me>\Spec(S) \longrightarrow \Spec(R) = \Spec(S) \longrightarrow \Spec(R/\ker f) \longrightarrow \Spec(R).</me> Since the map on spectra induced by <m>R \longrightarrow R/\ker(f)</m> is injective, we can replace <m>R</m> by the quotient and assume <m>\varphi</m> is an integral inclusion.
              </p>
  
              <p>
                So suppose <m>R \subseteq S</m> is integral, and let <m>\fa = P \cap R = Q \cap R</m>. By , localizing at <m>(R\setminus \fa)</m> preserves integrality. %We claim that localizing at <m>(R\setminus \fp)</m> preserves integrality: if <m>x\in S</m> and <m>w\in R\setminus \fp</m>, then we have equations of the form
              </p>
  
              <p>
                By localizing <m>R</m> at <m>(R \setminus \fa)</m>, the image of <m>\fa</m> is a maximal ideal. So we can reduce to the situation where <m>R \cap P = R \cap Q</m> is a maximal ideal. By , <m>P \subseteq Q</m> are both maximal ideals. Therefore, <m>P = Q</m>.
              </p>
  
            </proof>
          </theorem>
  
          <corollary xml:id="cor-finite-contractions-in-int-noeth-alg"><title>Finite Contractions in Int Noeth Alg</title>
  
  
            <statement>
              
  
              <p>
                Let <m>S</m> be an integral <m>R</m>-algebra. If <m>S</m> is noetherian, then only finitely many primes contract to each <m>P \in \Spec(R)</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                If <m>Q' \in \Spec(S)</m> contracts to <m>P</m>, then <m>Q' \supseteq P S</m>, so in particular <m>Q'</m> contains some prime <m>Q</m> minimal over <m>P S</m>. Then <me>P S \subseteq Q \subseteq Q' \implies P \subseteq Q \cap R \subseteq Q' \cap R = P,</me>so <m>Q' \cap R = Q \cap R</m>. By , <m>Q = Q'</m>. So all the primes contracting to <m>P</m> are in <m>\Min(P S)</m>, which is a finite set since <m>R</m> is noetherian, by .
              </p>
  
            </proof>
          </corollary>
  
          <corollary xml:id="cor-integral-dim-inequality"><title>Integral Dim Inequality</title>
  
  
            <statement>
              
  
              <p>
                If <m>R \longrightarrow S</m> is integral, then for any <m>Q \in \Spec(S)</m> we have <me>\ht(Q) \leqslant \ht(Q \cap R)</me> In particular, <m>\dim(S) \leqslant \dim(R)</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Given a chain of primes <m>P_0 \subsetneq \cdots \subsetneq P_n = Q</m> in <m>\Spec(S)</m>, we can contract to <m>R</m>, and by  we get a chain of distinct primes in <m>\Spec(R)</m>.
              </p>
  
            </proof>
          </corollary>
  
          <theorem xml:id="thm-going-up"><title>Going Up</title>
            <idx><h>Going Up Theorem</h></idx>
  
  
            <statement>
              
  
              <p>
                If <m>R \longrightarrow S</m> is integral, then for every <m>P \subsetneq P'</m> in <m>\Spec(R)</m> and <m>Q \in \Spec(S)</m> with <m>Q \cap R = P</m>, there is some <m>Q' \in \Spec(S)</m> with <m>Q \subsetneq Q'</m> and <m>Q' \cap R = P'</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Consider the map <m>R / P \to S / Q</m>. This is integral, as we observed in . It is also injective, so  applies. Thus, there is a prime <m>\fa</m> of <m>S/Q</m> that contracts to the prime <m>P' / P</m> in <m>\Spec(R/P)</m>. We can write <m>\fa = Q' / Q</m> for some <m>Q' \in \Spec(S)</m>, and we must have that <m>Q'</m> contracts to <m>P'</m>.
              </p>
  
            </proof>
          </theorem>
  
          <corollary xml:id="cor-integral-dim-equality"><title>Integral Dim Equality</title>
  
  
            <statement>
              
  
              <p>
                If <m>R\subseteq S</m> is integral, then <m>\dim(R)=\dim(S)</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                We have already shown that <m>\dim(S) \leqslant \dim(R)</m> in , so we just need to show that <m>\dim(R) \leqslant \dim(S)</m>. Fix a chain of primes <m>P_0 \subsetneq \cdots \subsetneq P_n</m> in <m>\Spec(R)</m>. By Lying Over, , there is a prime <m>Q_0 \in \Spec(S)</m> contracting to <m>P_0</m>. Then by Going up, , we have <m>Q_0 \subsetneq Q_1</m> with <m>Q_1 \cap R = P_1</m>. Continuing, we can build a chain of distinct primes in <m>S</m> of length <m>n</m>. So <m>\dim(R) \leqslant \dim(S)</m>, and equality follows.
              </p>
  
            </proof>
          </corollary>
  
          <lemma xml:id="lem-lemma-minimal-polynomial"><title>Lemma Minimal Polynomial</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a integrally closed and let <m>x</m> be an element in some larger domain that is integral over <m>R</m>. Let <m>k</m> be the fraction field of <m>R</m>, and <m>f(t)\in k[t]</m> be the minimal polynomial of <m>x</m> over <m>k</m>. (a) If <m>x</m> is integral over <m>R</m>, then <m>f(t) \in R[t]\subseteq k[t]</m>. (b) If <m>x</m> is integral over a prime <m>P</m>, then <m>f(t)</m> has all of its nonleading coefficients in <m>P</m>.
              </p>
  
            </statement>
  
            <proof>
        
  
              <p>
                Let <m>x</m> be integral over <m>R</m>. Fix an algebraic closure of <m>k</m> containing <m>x</m>, and let <m>x_1~=~x</m>, <m>x_2,\ldots,x_u</m> be the roots of <m>f</m>. Since <m>f(t)</m> divides any polynomial with coefficients in <m>k</m> that <m>x</m> satisfies, it also divides a monic equation of integral dependance for <m>x</m> over <m>R</m>. Therefore, each <m>x_i</m> is a solution to such an equation of integral dependence, and thus must be integral over <m>R</m>.
              </p>
  
              <p>
                Let <m>S=R[x_1,\dots,x_u] \subseteq \overline{k}</m>. This is a module-finite extension of <m>R</m>, so all of its elements are integral over <m>R</m>. The leading coefficient of <m>f(t)</m> is 1, and the remaining coefficients of <m>f(t)</m> are polynomials in the <m>x_i</m>, hence they lie in <m>S</m>. On the other hand, <m>R</m> is normal, so <m>S \cap k = R</m>. We conclude that all the coefficients of <m>f</m> are in <m>R</m>, and <m>f \in R[t]</m>.
              </p>
  
              <p>
                Now let <m>x</m> be integral over <m>P</m>. By the same argument as above, all of the <m>x_i</m> are integral over <m>P</m>. Since each <m>x_i \in \overline{P}^S</m>, any polynomial in the <m>x_i</m> lies in <m>\overline{P}^S</m>. So the nonleading coefficients of <m>f</m> lie in <m>\overline{P}^S \cap R = P</m>, by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Lying Over|Lying Over]].
              </p>
  
            </proof>
          </lemma>
  
          <theorem xml:id="thm-going-down"><title>Going Down</title>
            <idx><h>Going Down Theorem</h></idx>
  
  
            <statement>
              
  
              <p>
                Suppose that <m>R</m> is a integrally closed, <m>S</m> is a domain, and <m>R\subseteq S</m> is integral. Then, for every <m>P \subsetneq P'</m> in <m>\Spec(R)</m> and <m>Q'</m> in <m>\Spec(S)</m> with <m>Q' \cap R = P'</m>, there is some <m>Q \in \Spec(S)</m> with <m>Q \subsetneq Q'</m> and <m>Q \cap R = P</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Let <m>W=(S \setminus Q')(R \setminus P)</m> be the multiplicative set in <m>S</m> consisting of products of elements in <m>S \setminus Q'</m> and <m>R \setminus P</m>. Note that each of the sets <m>S \setminus Q'</m> and <m>R \setminus P</m> contains <m>1</m>, so <m>S \setminus Q'</m> and <m>R \setminus P</m> are both contained in <m>W</m>. We will show that <m>W \cap P S</m> is empty. Once we do that, it will follow from  that there is a prime ideal <m>Q</m> in <m>S</m> containing <m>P S</m> such that <m>W \cap Q</m> is empty. Since <m>S \setminus Q' \subseteq W</m>, our new prime <m>Q</m> must necessarily be contained in <m>Q'</m>.
              </p>
  
              <p>
                Moreover, <m>R \setminus P \subseteq W</m>, so <m>(Q \cap R) \cap (R \setminus P)</m> is empty, or equivalently, <m>Q \cap R \subseteq P</m>. Since <m>Q \cap R \subseteq P</m> and <m>Q \cap R \supseteq P</m>, we conclude that <m>Q \cap R = P</m>.
              </p>
  
              <p>
                So our goal is to show that <m>W \cap P S</m> is empty. We proceed by contradiction, and assume there is some <m>x \in P S \cap W</m>. We can write <m>x=rs</m> for some <m>r\in R \setminus P</m> and <m>s \in S \setminus Q'</m>. Moreover, since <m>x \in P S</m>, <m>x</m> is integral over <m>P</m>, by .
              </p>
  
              <p>
                Consider the minimal polynomial of <m>x</m> over <m>\mathrm{frac}(R)</m>, say<me>h(x) = x^n + a_1 x^{n-1} + \cdots + a_n = 0.</me>By , each <m>a_i\in P' \subseteq R</m>. Then substituting <m>x=rs</m> in <m>\textrm{frac}(R)</m> and dividing by <m>r^n</m> yields <me>g(s) = s^n + \frac{a_1}{r} s^{n-1} + \cdots + \frac{a_n}{r^n} = 0.</me>We claim that this is the minimal polynomial of <m>s</m>. If <m>s</m> satisfied a monic polynomial of degree <m>d &lt; n</m>, multiplying by <m>r^d</m> would give us a polynomial of degree <m>d</m> that <m>x</m> satisfies, which is impossible. So indeed, this is the minimal polynomial of <m>s</m>.
              </p>
  
              <p>
                Since <m>s\in S</m>, and thus integral over <m>R</m>,  says that each <m>\frac{a_i}{r^i} =: v_i\in R</m>. Since <m>r \notin P</m> and <m>r^i v_i =a_i \in P</m>, we must have <m>v_i\in P</m>. The equation <m>g(s)=0</m> then shows that <m>s \in \sqrt{P S}</m>. Since <m>Q' \in \Spec(S)</m> contains <m>P' S</m> and hence <m>P S</m>, we have <m>s \in \sqrt{P S} \subseteq Q'</m>. This is the desired contradiction, since <m>s \notin Q'</m> by construction.
              </p>
  
            </proof>
          </theorem>
  
          <corollary xml:id="cor-height-in-normal-domains"><title>Height in Normal Domains</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is a integrally closed, <m>S</m> is a domain, and <m>R \subseteq S</m> is integral, then <m>\ht(Q) = \ht(Q \cap R)</m> for any <m>Q \in \Spec(S)</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                We already know from  that <m>\ht(Q) \leqslant \ht(Q \cap R)</m>. To show that <m>\ht(Q) \geqslant \ht(Q \cap R)</m>, given a saturated chain up to <m>Q \cap R</m>, we can apply  to get a chain just as long that goes up to <m>Q</m>.
              </p>
  
            </proof>
          </corollary>

        </section>

        <section xml:id="sec-noether-normalizations">
          <title>Noether Normalizations</title>

          <!--***************************
          Section: Noether Normalizations
          ****************************-->
          
          <blockquote>
            <p>
              <q>I think normalization is a good thing.</q>
            </p>
            <attribution>Jamie Dimon</attribution>
          </blockquote>
  
  
          <lemma xml:id="lem-making-a-pure-power-leading-term"><title>Making a Pure-Power Leading Term</title>
    
    
            <statement>
              
    
              <p>
                Let <m>A</m> be a domain, <m>R=A[x_1,\dots,x_n]</m>, and let <m>f\in R</m> be a polynomial of degree at most <m>N</m>. The <m>A</m>-algebra automorphism of <m>R</m> given by <me>\phi(x_i)=x_i + x_n^{N^{n-i}} \textrm{ for } i&lt;n \quad \textrm{ and } \quad \phi(x_n)=x_n</me>maps <m>f</m> to a polynomial that, viewed as a polynomial in <m>x_n</m> with coefficients in <m>A[x_1,\dots,x_{n-1}]</m>, has leading term <m>d x_n^a</m> for some <m>d\in A</m> and <m>a\in \N</m>.
              </p>

            </statement>
    
    
              <proof>

    
                <p>
                  The map <m>\phi</m> sends a monomial term <m>d x_1^{a_1} \cdots x_n^{a_n}</m> to a polynomial with unique highest degree term <m>d x_n^{a_1 N^{n-1} + a_2 N^{n-2} + \cdots + a_{n-1} N + a_n}</m>. For each of the monomials <m>d x_1^{a_1} \cdots x_n^{a_n}</m> in <m>f</m> with nonzero coefficient <m>d \neq 0</m>, we must have each <m>a_i \leqslant N</m>, so the map <me>(a_1,\dots,a_n) \mapsto a_1 N^{n-1} + a_2 N^{n-2} + \cdots + a_{n-1} N + a_n</me> is injective when restricted to the set of exponent tuples of <m>f</m>. Therefore, none of the terms can cancel. We find that the leading term is of the promised form.
                </p>
    
              </proof>
          </lemma>
  
          <lemma xml:id="lem-making-a-pure-power-leading-term-graded-version"><title>Making a Pure-Power Leading Term (Graded Version)</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be an infinite field, and let <m>R=k[x_1,\dots,x_n]</m> be standard graded, meaning <m>\deg(x_i)=1</m>. Let <m>f\in R</m> be a homogeneous polynomial of degree <m>N</m>. There is a degree-preserving <m>k</m>-algebra automorphism of <m>R</m> given by <m>\phi(x_i) = x_i + a_i x_n</m> for <m>i&lt;n</m> and <m>\phi(x_n)=x_n</m> that maps <m>f</m> to a polynomial that viewed as a polynomial in <m>x_n</m> with coefficients in <m>k[x_1,\dots,x_{n-1}]</m>, has leading term <m>a x_n^N</m> for some (nonzero) <m>a\in k</m>.
              </p>
  
            </statement>
  
            <proof>
  
  
              <p>
                Given , we just need to show that the <m>x^N</m> coefficient of <m>\phi(f)</m> is nonzero for some choice of <m>a_i</m>. One can check that the coefficient of the <m>x^N</m> term is <m>f(-a_1,\dots,-a_{n-1},1)</m>. But <m>f(-a_1,\dots,-a_{n-1},1)</m>, when thought of as a polynomial in the <m>a_i</m>, is identically zero, then <m>f</m> must be the zero polynomial.
              </p>
  
            </proof>
          </lemma>
  
          <theorem xml:id="thm-noether-normalization"><title>Noether Normalization</title>
            <idx><h>Noether normalization</h></idx>
  
  
            <statement>
              
  
              <p>
                Let <m>A</m> be a domain, and <m>R</m> be a finitely generated <m>A</m>-algebra. There is some nonzero <m>a\in A</m> and <m>x_1,\dots,x_t\in R</m> algebraically independent over <m>A</m> such that <m>R_a</m> is module-finite over <m>A_a[x_1,\dots,x_t]</m>.
              </p>
  
              <p>
                In particular, if <m>k</m> is a field and <m>R</m> is a finitely generated <m>k</m>-algebra, then there exist <m>x_1, \ldots, x_t \in R</m> algebraically independent over <m>k</m> such that <m>k[x_1,\ldots,x_t] \subseteq R</m> is module-finite.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                We proceed by induction on the number of algebra generators <m>n</m> of <m>R</m> over <m>A</m>. There is nothing to prove in the case when <m>n=0</m>.
              </p>
  
              <p>
                Now suppose that we know the result holds for <m>A</m>-algebras generated by at most <m>n-1</m> elements, and let <m>R=A[r_1,\dots,r_n]</m>. If <m>r_1,\dots,r_n</m> are algebraically independent over <m>A</m>, we are done: <m>R</m> is module-finite over <m>R = A[r_1,\dots,r_n]</m>. If not, there is some algebraic relation among the generators <m>r_1, \ldots, r_n</m>, meaning there exists <m>f(x_1,\dots,x_n) \in A[x_1,\dots,x_n]</m> such that <m>f(r_1,\dots,r_n)=0</m>. After possibly applying  to change our choice of algebra generators, we can assume that <m>f</m> has leading term <m>a x_n^N</m> for some <m>a</m>. Then <m>f</m> is monic in <m>x_n</m> after inverting <m>a</m>, so <m>r_n</m> is integral over <m>A_a[r_1,\dots,r_{n-1}]</m>, and thus <m>R_a</m> is module-finite over <m>A_a[r_1,\dots,r_{n-1}]</m> by . By hypothesis, <m>A_{ab}[r_1,\dots,r_{n-1}]</m> is module-finite over <m>A_{ab}[x_1,\dots,x_s]</m> for some <m>b\in A</m> and <m>x_1,\dots,x_s</m> that are algebraically independent over <m>A</m>. Since <m>R_{ab}</m> is module-finite over <m>A_{ab}[r_1,\dots,r_{n-1}]</m>, then by  <m>R_{ab}</m> must also be module-finite over <m>A_{ab}[x_1,\dots,x_s]</m>, and we are done.
              </p>
  
            </proof>
          </theorem>
  
          <definition xml:id="defn-noether-normalization"><title>Noether Normalization</title>
          <statement>
            <p>
              Let <m>R</m> be a finitely generated algebra for some field <m>k</m>. Then a <em>noether normalization</em><idx><h>Noether normalization</h></idx> of <m>R</m> is a polynomial ring <m>A=k[x_1,\ldots, x_t]\subseteq R</m> such that <m>x_1,\ldots, x_t</m> are algebraically independent over <m>k</m> and <m>R</m> is module-finite over <m>A</m>.
            </p>
          </statement>
          </definition>
  
          <theorem xml:id="thm-graded-noether-normalization"><title>Graded Noether Normalization</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be an infinite field, and <m>R</m> be a finitely generated <m>\N</m>-graded <m>k</m>-algebra with <m>R_0=k</m> and <m>R=k[R_1]</m>. There are homogeneous elements <m>x_1,\dots,x_t\in R_1</m> algebraically independent over <m>k</m> such that <m>R</m> is module-finite over <m>k[x_1,\dots,x_t]</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                We repeat the proof of  but use  in place of .
              </p>
  
            </proof>
          </theorem>

          <remark>
            <p>
              There also exist Noether normalizations for quotients of power series rings over fields: the key change is that after a change of coordinates, one can rewrite any nonzero power series in <m>k [[ x_1,\dots, x_n \Rbracket</m> as a series of the form <m>u (x_n^d + a_{d-1} x_n^{d-1} + \cdots + a_0)</m> for a unit <m>u</m> and <m>a_0,\dots,a_{d-1}\in k [[ x_1,\dots,x_{n-1}\Rbracket</m>. This is called . The rest of the proof of the Noether normalization theorem proceeds in essentially the same way. Thus, given <m>k[[ x_1,\dots, x_n \Rbracket / I</m>, we have some module-finite inclusion of another power series ring <m>k[[ z_1,\dots, z_d \Rbracket \subseteq k[[ x_1,\dots, x_n \Rbracket/I</m>.
            </p>
          </remark>

          <theorem xml:id="thm-noether-normalization-height-and-dimension"><title>Noether Normalization Height and Dimension</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a domain that is a finitely generated algebra over a field <m>k</m>, or a quotient of a power series ring over a field. Let <m>k[z_1,\dots,z_d]</m> be any noether normalization for <m>R</m>. For any maximal ideal <m>\fm</m> of <m>R</m>, the length of any saturated chain of primes from <m>0</m> to <m>\fm</m> is <m>d</m>. In particular, <m>\dim(R) = d</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                We will show the proof in the case when <m>R</m> is a finitely generated domain over a field <m>k</m>; the power series case is similar, and left as an exercise. We will prove by induction on~<m>d</m> that for any finitely generated domain with a Noether normalization with <m>d</m> algebraically independent elements, any saturated chain of primes ending in a maximal ideal has length~<m>d</m>.
              </p>
  
              <p>
                When <m>d=0</m>, <m>R</m> is a domain that is integral over a field, hence <m>R</m> is a field by . Now suppose the statement holds for <m>d-1</m>, and let <m>R</m> be a finitely generated domain over some field <m>k</m> with Noether normalization <m>A = k[z_1, \ldots, z_d]</m>. Consider a maximal ideal <m>\fm</m> of <m>R</m> and a saturated chain <me>0 \subsetneq Q_1 \subsetneq \cdots \subsetneq  Q_s = \fm.</me>By , its contraction to <m>A=k[z_1,\dots,z_d]</m> is a chain of <m>s</m> distinct primes in <m>R</m>: <me>0 \subsetneq P_1 :=  Q_1 \cap A \subsetneq \cdots \subsetneq P_s :=  Q_s \cap A.</me>Our assumption that the original chain is saturated implies that <m>Q_1</m> has height 1. Suppose that <m>P_1</m> had height <m>2</m> or more. By , we would be able to construct a chain up to $Q_1 $ of length <m>2</m> or more, but <m>Q_1</m> has height <m>1</m>. Thus <m>P_1</m> has height <m>1</m>. Since <m>k[z_1,\dots,z_d]</m> is a UFD, <m>P_1=(f)</m> for some prime element <m>f</m>, by . After a change of variables, as in , we can assume that <m>f</m> is monic in <m>z_d</m> with coefficients in <m>k[z_1,\dots,z_{d-1}]</m>. So <m>k[z_1,\dots,z_{d-1}] \subseteq A/(f) \subseteq R/Q_1</m> are module-finite extensions, and the induction hypothesis applies to <m>R/Q_1</m>. Now <me>0 = Q_1/Q_1 \subsetneq Q_2/Q_1 \subsetneq \cdots\subsetneq Q_s/Q_1 = \fm/Q_1</me>is a saturated chain in the domain <m>R/Q_1</m> going up to the maximal ideal <m>\fm/Q_1</m>. The induction hypothesis then says that this chain has length <m>d-1</m>, so <m>k-1=d-1</m>, and <m>k=d</m>.
              </p>
  
            </proof>
          </theorem>
  
          <corollary xml:id="cor-dimension-of-polynomial-ring"><title>Dimension of Polynomial Ring</title>
  
  
            <statement>
              
  
              <p>
                The dimension of the polynomial ring <m>k[x_1,\dots,x_d]</m> is <m>d</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                The polynomial ring <m>k[x_1,\dots,x_d]</m> is a Noether normalization of itself, so  says that it must have dimension <m>d</m>.
              </p>
  
            </proof>
          </corollary>
  
          <corollary xml:id="cor-dimension-of-algebra"><title>Dimension of Algebra</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is a <m>k</m>-algebra, the dimension of <m>R</m> is less than or equal to the minimal size of an algebra generating set for <m>R</m> over <m>k</m>. If <m>R = k[f_1, \ldots, f_d]</m> and <m>\dim(R) = d</m>, then <m>R</m> is isomorphic to a polynomial ring over <m>k</m>, and the generators <m>f_i</m> are algebraically independent.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The first statement is trivial unless <m>R</m> is finitely generated, in which case we can write <m>R=k[f_1,\dots,f_s] \cong k[x_1,\dots,x_s]/I</m> for some ideal <m>I</m>, so <me>\dim(R) \leqslant \dim(k[x_1,\dots,x_s]) = d.</me> Suppose we chose <m>s</m> to be minimal. If <m>I\neq 0</m>, then <m>\dim(R)&lt; s</m>, since the zero ideal is not contained in <m>I</m>.
              </p>
  
            </proof>
          </corollary>
  
          <corollary xml:id="cor-f.g.-algebra-catenary-domain"><title>F.G. Algebra Catenary Domain</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a finitely generated algebra or a quotient of a power series ring over a field. (a) <m>R</m> is catenary. If additionally <m>R</m> is a domain, then (b) <m>R</m> is equidimensional, and (c) <m>\ht(I)=\dim(R)-\dim(R/I)</m> for all ideals <m>I</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Let <m>P \subseteq Q</m> be primes in <m>R</m>. After quotient out by <m>P</m>, we can assume that <m>R</m> is a domain and <m>P=0</m>. Fix a saturated chain <m>C</m> from <m>Q</m> to a maximal ideal <m>\fm</m>. Given two saturated chains <m>C'</m>, <m>C''</m> from <m>0</m> to <m>Q</m>, the concatenations <m>C'|C</m> and <m>C''|C</m> are saturated chains from <m>0</m> to <m>\fm</m>, so by  they must have the same length. It follows that <m>C'</m> and <m>C''</m> have the same length.
              </p>
  
              <p>
                Equidimensionality is immediate from .
              </p>
  
              <p>
                We have <me>\ht(I) = \min\{\ht(P) \mid P\in \Min(I)\}</me> and <me>\dim(R/I) = \max\{\dim(R/P) \mid P \in \Min(I)\}.</me> Therefore, it suffices to show the equality for prime ideals, since if <m>P \in \Min(I)</m> attains <m>\ht(I)</m>, which is the minimal value of <m>\ht(Q)</m> for <m>Q \in \Min(I)</m>, then it also attains the maximal value of <m>\dim(R/Q)</m> for <m>Q \in \Min(I)</m>. Now, take a saturated chain of primes <m>C</m> from <m>0</m> to <m>P</m>, and a saturated chain <m>C'</m> from <m>P</m> to a maximal ideal <m>\fm</m>. Since <m>R</m> is catenary, <m>C</m> has length <m>\ht(P)</m>. Moreover, <m>C'</m> has length <m>\dim(R/P)</m> by , and <m>C|C'</m> has length <m>\dim(R)</m> by .
              </p>
  
            </proof>
          </corollary>
  
          <definition xml:id="defn-transcendence-basis"><title>Transcendence Basis</title>
          <statement>
            <p>
              Let <m>K\subseteq L</m> be an extension of fields. A <em>transcendence basis</em><idx><h>transcendence basis</h></idx> for <m>L</m> over <m>K</m> is a maximal algebraically independent subset of <m>L</m> over <m>K</m>.
            </p>
          </statement>
          </definition>
  
          <lemma xml:id="lem-transcendence-basis-well-defined-1"><title>Transcendence Basis Well-Defined 1</title>
  
  
            <statement>
              
  
              <p>
                Let <m>\{x_1,\dots,x_m\}</m> and <m>\{y_1,\dots,y_n\}</m> be two transcendence bases for <m>L</m> over <m>K</m>. Then, there is some <m>i</m> such that <m>\{x_i,y_2,\dots,y_n\}</m> is a transcendence basis.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Since <m>L</m> is algebraic over <m>K(y_1,\dots,y_n)</m>, for each <m>i</m> there is some <m>p_i(t)\in K(y_1,\dots,y_n)[t]</m> such that <m>p_i(x_i)=0</m>. We can clear denominators to assume without loss of generality that <m>p_i(x_i)\in K[y_1,\dots,y_n][t]</m>.
              </p>
  
              <p>
                We claim that there is some <m>i</m> such that <m>p_i(t) \notin K[y_2,\dots,y_n][t]</m>. If not, then <me>p_i(t) \in K[y_2,\dots,y_n][t]</me>for all <m>i</m>, and thus that each <m>x_i</m> is algebraic over <m>K(y_2,\dots,y_n)</m>. Thus, <m>K(x_1,\dots,x_m)</m> is algebraic over <m>K(y_2,\dots,y_n)</m>, and since <m>L</m> is algebraic over <m>K(x_1,\dots,x_m)</m>, <m>y</m> is algebraic over <m>K(y_2,\dots,y_n)</m>, which contradicts that <m>\{y_1,\dots,y_n\}</m> is a transcendence basis. This shows the claim.
              </p>
  
              <p>
                Now, we claim that for such <m>i</m>, <m>\{x_i,y_2,\dots,y_n\}</m> is a transcendence basis. Thinking of the equation <m>p_i(x_i)=0</m> as a polynomial expression in <m>K[x_i,y_2,\dots,y_n][y_1]</m>, <m>y_1</m> is algebraic over <m>K(x_i,y_2,\dots,y_n)</m>, hence <m>K(y_1,\dots,y_n)</m> is algebraic over <m>K(x_i,y_2,\dots,y_n)</m>, and <m>L</m> as well.
              </p>
  
              <p>
                If <m>\{x_i,y_2,\dots,y_n\}</m> were algebraically dependent, then there is some polynomial equation <m>p(x_i,y_2,\dots,y_n)=0</m>. This equation must involve <m>x_i</m>, since <m>y_2,\dots,y_n</m> are algebraically independent. We would then have <m>K(x_i,y_2,\dots,y_n)</m> is algebraic over <m>K(y_2,\dots,y_n)</m>. But since <m>y_1</m> is algebraic over <m>K(x_i,y_2,\dots,y_n)</m>, we would have that <m>K(y_1,\dots,y_n)</m> is algebraic over <m>K(y_2,\dots,y_n)</m>, which would contradict that <m>y_1,\dots,y_n</m> is a transcendence basis.
              </p>
  
            </proof>
          </lemma>
  
          <lemma xml:id="lem-transcendence-basis-well-defined-2"><title>Transcendence Basis Well-Defined 2</title>
  
  
            <statement>
              
  
              <p>
                If <m>\{x_1,\dots,x_m\}</m> and <m>\{y_1,\dots,y_n\}</m> are two transcendence bases for <m>L</m> over <m>K</m>, then <m>m=n</m>.
              </p>
  
            </statement>
  
            <proof>
        
  
              <p>
                Say that <m>m\leqslant n</m>. If the intersection has <m>s&lt;m</m> elements, then without loss of generality <m>y_1\notin \{x_1,\dots,x_m\}</m>. Then, for some <m>i</m>, <m>\{x_i, y_2\dots,y_n\}</m> is a transcendence basis, and <m>\{x_1,\dots,x_m\} \cap \{x_i, y_2\dots,y_n\}</m> has <m>s+1</m> elements. Replacing <m>\{y_1,\dots,y_n\}</m> with <m>\{x_i, y_2\dots,y_n\}</m> and repeating this process, we obtain a transcendence basis with <m>n</m> elements such that <m>\{x_1,\dots,x_m\} \subseteq \{y_1,\dots,y_n\}</m>. But we must then have that these two transcendence bases are equal, so <m>m=n</m>.
              </p>
  
            </proof>
          </lemma>

          <p>EMPTY <idx><h>transcendence degree</h></idx><idx><h><m>\mathrm{trdeg}_K(L)</m></h></idx></p>
  
          <corollary xml:id="cor-dimension-in-f.g.-domain"><title>Dimension in F.G. Domain</title>
  
            <statement>
              
              <p>
                If <m>R</m> is a finitely generated domain over a field <m>k</m>, then <me>\dim(R) = \mathrm{trdeg}_k(\mathrm{frac}(R)).</me> 
              </p>
  
            </statement>

            <proof>
              <p>
                If <m>S \subseteq R</m> is module-finite, then by  <m>\mathrm{frac}(S)\subseteq \mathrm{frac}(R)</m> is integral, or equivalently algebraic. Hence <m>\mathrm{frac}(S)</m> and <m>\mathrm{frac}(R)</m> have the same transcendence degree over~<m>k</m>. In particular, if <m>A = k[z_1,\dots,z_d]</m> is a Noether normalization for <m>R</m>, <me>\mathrm{trdeg}_k(\mathrm{frac}(R))= \mathrm{trdeg}_k(\mathrm{frac}(A)) = \mathrm{trdeg}_k(k(z_1,\dots,z_d)) = d = \dim(A) = \dim(R).</me>
              </p>
            </proof>
          </corollary>
  
          <example><title></title>
  
            <p>
              Let <m>R = k[xu,xv,yu,yv] \subseteq k[x,y,u,v]</m>, where <m>k</m> is an algebraically closed field and <m>x,y,u,v</m> are indeterminates. Then <me>\mathrm{frac}(R) = k(xu,xv,yu,yv) = k \left( xu, \frac{v}{u},\frac{y}{x},\frac{yv}{xu} \right) = k\left(xu,\frac{v}{u},\frac{y}{x}\right),</me> and these last three are algebraically independent over <m>k</m>. Thus, <m>\dim(R)=3</m>.
            </p>
  
          </example>
  
          <example><title></title>
  
            <p>
              Let us use our dimension theorems to give two different proofs that over any field <m>k</m>, <m>\displaystyle R=k[x,y,z]/(y^2-xz)</m> has dimension 2.
            </p>
  
            <p>
              First, we claim that <m>A = k[x,z]</m> is a Noether normalization of <m>R</m>. First, note that <m>x</m> and <m>z</m> are algebraically independent over <m>k</m>. Moreover, <m>R = A[y]</m> and <m>y</m> satisfies the monic polynomial <m>t^2-xz \in A[t]</m>, so <m>A \subseteq R = A[y]</m> is integral, and thus module-finite by . Therefore, <m>\dim(R) = 2</m>.
            </p>
  
            <p>
              Alternatively, one can show that <m>y^2-xz</m> is irreducible, e.g., by thinking of it as a polynomial in <m>y</m> and applying Eisenstein's criterion. Then <m>(y^2-xz)</m> is a prime of height one, so by  the dimension of <m>R</m> is <me>\dim(R) = \dim(k[x,y,z])-\ht((y^2-xz))=3-1=2.</me>
            </p>
  
          </example>
  
          <example><title></title>
  
            <p>
              Let us compute the dimension of the ring <m>R = k[a,b,c,d]/I</m>, where <me>I=(b^2-ac,c^2-bd,bc-ad).</me> We claim that <m>A = k[a,d]\subseteq R</m> is a Noether normalization. The inclusion is integral, since <me>b^2=ac \implies b^4=a^2 c^2 = a^2bd,</me>so <m>b</m> satisfies <m>t^4 - a^2d t =0</m>. Similarly, one can show that <m>c</m> satisfies <m>t^4-ad^2t</m>. <me>c^2=bd \implies c^4 = b^2 d^2 = acd^2,</me> so <m>c</m> satisfies <m>t^4-ad^2t</m>.
            </p>
  
            <p>
              We also need to show that <m>a,d</m> are algebraically independent over <m>k</m>, or equivalently that the map from the polynomial ring <m>\psi\! : k[u,v] \to R</m> with <m>\psi(u)=a</m>, <m>\psi(v)=d</m> is injective.
            </p>
  
            <p>
              First assume that <m>k=\overline{k}</m> is algebraically closed. Observe that the map #empty
            </p>
  
            <p>
              is surjective: given <m>a,d \in k</m>, write <m>a=\alpha^3, d=\delta^3</m>, and note that <m>(\alpha^3, \alpha^2 \delta, \alpha \delta^2, \delta^3)</m> is an element of <m>X=\cZ(I)</m> that maps to <m>(a,d)</m>. Thus, the kernel of the induced map on coordinate rings <m>k[\mathbb{A}^2] \to k[X]</m> is <m>\cI(\mathbb{A}^2) = 0</m>; i.e, the map is injective. By the Nullstellensatz, <m>\mathcal{I}(\cZ(I))= \sqrt{I}</m>, and our induced map on coordinate rings is the map #empty Since this map is injective, and this factors as #empty the first map is injective.
            </p>
  
          </example>
  
        </section>
  
      </chapter>

      <chapter xml:id="ch-local-dim-theory"><title>Local Dimension Theory</title>

        <!--***************************
        Chapter: Local Dimension Theory
        ****************************-->
  
        <section xml:id="sec-height-generators"><title>Height and Number of Generators</title>

          <!--**********************************
          Section: Height & Number of Generators
          ***********************************-->
          
          <blockquote><p><q>You are not judged by the height you have risen, but from the deoth you have climbed.</q></p><attribution>Fredrick Douglass</attribution></blockquote>
  
          <theorem xml:id="thm-krulls-principal-ideal-theorem"><title>Krull's Principal Ideal Theorem</title>
            <idx><h>Krull's Principal Ideal Theorem</h></idx>
            <statement>
              <p>Let <m>R</m> be a noetherian ring, and <m>f\in R</m>. Then, every minimal prime of <m>(f)</m> has height at most one.</p>
            </statement>

            <proof>
              <p>Suppose the theorem is false, so that there is some ring <m>R</m>, a prime <m>P</m>, and an element <m>f</m> such that <m>P</m> is minimal over <m>(f)</m> and <m>\ht(P)&gt;1</m>. If we localize at <m>P</m> and then mod out by an appropriate minimal prime, we obtain a noetherian local domain <m>(R,\fm)</m> of dimension at least two in which <m>\fm</m> is the unique minimal prime of <m>(f)</m>. Let's work over that noetherian local domain <m>(R, \fm)</m>. Note that <m>\overline{R} = R/(f)</m> is zero-dimensional, since <m>\fm</m> is the only minimal prime over <m>(f)</m>. Back in <m>R</m>, let <m>Q</m> be a prime strictly in between <m>(0)</m> and <m>\fm</m>, and notice that we necessarily have <m>f \notin Q</m>.</p>

              <p>Consider the symbolic powers <m>Q^{(n)}</m> of <m>Q</m>. We will show that these stabilize in <m>R</m>. Since <m>\overline{R} = R/(f)</m> is Artinian, the descending chain of ideals <me>Q \overline{R} \supseteq Q^{(2)}\overline{R} \supseteq Q^{(3)}\overline{R} \supseteq \cdots</me>stabilizes. We then have some <m>n</m> such that <m>Q^{(n)} \overline{R} = Q^{(m)} \overline{R}</m> for all <m>m \geqslant n</m>, and in particular, <m>Q^{(n)} \overline{R} = Q^{(n+1)} \overline{R}</m>. Pulling back to <m>R</m>, we get <m>Q^{(n)} \subseteq Q^{(n+1)} + (f)</m>. Then any element <m>a \in Q^{(n)}</m> can be written as <m>a = b + fr</m>, where <m>b \in Q^{(n+1)} \subseteq Q^{(n)}</m> and <m>r \in R</m>. Notice that this implies that <m>fr \in Q^{(n)}</m>. Since <m>f\notin Q</m>, we must have <m>r\in Q^{(n)}</m>. This yields <m>Q^{(n)} = \fq^{(n+1)} + f \fq^{(n)}</m>. Thus, <m>Q^{(n)} / Q^{(n+1)} = f(Q^{(n)} / \fq^{(n+1)})</m>, so <m>Q^{(n)} / Q^{(n+1)} = \fm(Q^{(n)} / Q^{(n+1)})</m>. By , <m>Q^{(n)} = Q^{(n+1)}</m> in <m>R</m>. Similarly, we obtain <m>Q^{(n)} = Q^{(m)}</m> for all <m>m \geqslant n</m>.</p>
  
              <p>Now, if <m>a \in Q</m> is nonzero, we have <m>a^n\in Q^n \subseteq Q^{(n)} = Q^{(m)}</m> for all <m>m</m>, so <me>\bigcap_{m \geqslant 1} Q^{(m)} = \bigcap_{m \geqslant n} Q^{(m)} = Q^{(n)}.</me>Notice that <m>Q^n \neq 0</m> because <m>R</m> is a domain, and so <m>Q^{(n)} \supseteq Q^n</m> is also nonzero. So<me>\bigcap_{m \geqslant 1} Q^{(m)} = Q^{(n)} \neq 0.</me>On the other hand, <m>Q^{(m)} = Q^m R_Q \cap R</m> for all <m>m</m>, and <me>\bigcap_{m \geqslant 1} Q^{(m)} R_Q \subseteq \bigcap_{m \geqslant 1} Q^m R_{Q} = \bigcap_{m \geqslant 1} (Q R_{Q})^m = 0</me> by . Since <m>R</m> is a domain, the contraction of <m>(0)</m> in <m>R_Q</m> back in <m>R</m> is <m>(0)</m>. This is the contradiction we seek. So no such <m>Q</m> exists, so that <m>R</m> has dimension <m>1</m>, and in the original ring, all the minimal primes over <m>f</m> must have height at most <m>1</m>.</p>
            </proof>
          </theorem>

          <remark><p>Note that this is stronger than the statement that the height of <m>(f)</m> is at most one: that would only mean that some minimal prime of <m>(f)</m> has height at most one.</p></remark>
          
          <p>Noetherianity is necessary, as the next example shows.</p>

          <example><title>Noetherianity is Necessary</title>
            <p>
              <m>R = k[x,xy,xy^2,\ldots] \subseteq k[x,y]</m>. Note that <m>(x)</m> is not prime: for <m>a&gt;0</m>, <m>xy^a \notin (x)</m>, since <m>y^a\notin R</m>, but <m>(xy^a)^2 = x \cdot x y^{2a} \in (x)</m>. Thus, <m>\fm = (x,xy,xy^2,\dots) \subseteq \sqrt{(x)}</m>, and since <m>\fm</m> is a maximal ideal, we have equality, so <m>\Min{(x)} = \{ \fm \}</m>. However, the ideal <m>P = (xy,xy^2, xy^3,\dots) = (y) k[x,y] \cap R</m> is prime, and the chain <m>(0) \subsetneq P \subsetneq \fm</m> shows that <m>\ht(\fm)&gt;1</m>.
            </p>
          </example>
  
          <lemma xml:id="lem-proper-containment-of-ideals-in-noetherian-ring"><title>Proper Containment of Ideals in Noetherian Ring</title>
            <statement>     
              <p>Let <m>R</m> be noetherian, <m>P \subsetneq Q \subsetneq \fa</m> be primes, and <m>f \in \fa</m>. Then there is some <m>Q'</m> with <m>P \subsetneq Q'\subsetneq \fa</m> and <m>f \in Q'</m>.</p>
            </statement>
  
            <proof>
              <p>If <m>f \in P</m>, there is nothing to prove, since we can simply take <m>Q' = Q</m>. Suppose <m>f \notin P</m>. After we quotient out by <m>P</m> and localize at <m>\fa</m>, we may assume that <m>\fa</m> is the unique maximal ideal and that our ring is a domain. Thus all we need is to find a nonzero prime <m>Q'</m> which is not maximal. Note that by assumption <m>\ht(\fa) \geqslant 2</m>. Our assumption implies that <m>f \neq 0</m>, and then by the principal ideal theorem <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Krull's Principal Ideal Theorem|Krull's Principal Ideal Theorem]], minimal primes of <m>(f)</m> have height one, hence are not maximal nor <m>0</m>. We can take <m>Q'</m> to be one of the minimal primes of <m>f</m>.</p>
            </proof>
          </lemma>
  
          <theorem xml:id="thm-krulls-height-theorem"><title>Krull's Height Theorem</title>
            <idx><h>Krull's Height Theorem</h></idx>
            <statement>
              <p>Let <m>R</m> be a noetherian ring. If <m>I</m> is an ideal generated by <m>n</m> elements, then every minimal prime of <m>I</m> has height at most <m>n</m>.</p>
            </statement>
  
            <proof>
              <p>By induction on <m>n</m>. The case <m>n=1</m> is .</p>
  
              <p>Let <m>I=(f_1,\dots,f_n)</m> be an ideal, <m>P</m> a minimal prime of <m>I</m>, and <m>P_0 \subsetneq P_1 \subsetneq \cdots \subsetneq P_{h} = P</m> be a saturated chain of length <m>h</m> ending at <m>P</m>. If <m>f_1 \in P_1</m>, then we can apply the induction hypothesis to the ring <m>\overline{R} = R/((f_1) + P_0)</m> and the ideal <m>(f_2,\dots,f_n)\overline{R}</m>. Then by induction hypothesis, the chain <m>P_1 \overline{R} \subsetneq \cdots \subsetneq P_{h} \overline{R}</m> has length at most <m>n-1</m>, so <m>h-1 \leqslant n-1</m> and <m>P</m> has height at most <m>n.</m></p>
  
              <p>If <m>f_1 \notin P_1</m>, we use the previous lemma to replace our given chain with a chain of the same length but such that <m>f_1 \in P_1</m>. To do this, note that <m>f_1 \in P_i</m> for some <m>i</m>; after all, <m>f_1 \in I \subseteq P</m>. So in the given chain, suppose that <m>f_1 \in P_{i+1}</m> but <m>f_1 \notin P_i</m>. If <m>i&gt;0</m>, apply the previous lemma with <m>\fa = P_{i+1}</m>, <m>Q = P_i</m>, and <m>P = P_{i-1}</m> to find <m>Q_i</m> such that <m>f_1 \in Q_i</m>. Replace the chain with <me>P_0 \subsetneq P_1 \subsetneq \cdots \subsetneq P_{i-1} \subsetneq Q_i \subsetneq P_i \subsetneq \cdots \subsetneq P_{h} = P.</me> Repeat until <m>f_1 \in P_1</m>.</p>
            </proof>
          </theorem>
  
          <example><title></title>
            <p>If <m>k</m> is a field and <m>R = k[x_1, \ldots, xn]</m>, the ideal <m>(x_1,x_2,\dots,x_n)</m> generated by <m>n</m> variables has height~<m>n</m>. There are many other ideals that attain the bound given by . For example, <m>(u^3-xyz,x^2+2xz-6y^5,vx+7vy)\in k [u,v,w,x,y,z]</m>. An ideal of height <m>n</m> generated by <m>n</m> elements is called a <em>complete intersection</em><idx><h>complete intersection</h></idx>.</p>
          </example>
  
          <example><title></title>
            <p>The ideal <m>(xy,xz)</m> in <m>k[x,y,z]</m> has minimal primes of heights 1 and 2.</p>
          </example>
  
          <example><title></title>
            <p>In <m>R=k[x,y]/(x^2,xy)</m>, the ideal generated by zero elements (the zero ideal) has an associated prime of height two, namely <m>(x,y)</m>. The same phenomenon can happen even in a nice polynomial ring. For example, consider the ideal <m>I=(x^3, y^3, x^2 u + xy v + y^2 w) \subseteq R= k[u,v,w,x,y]</m>. Note that <m>(u,v,w,x,y) = (I : x^2 y^2)</m>, so <m>I</m> has an associated prime of height 5.</p>
          </example>

          <example><title></title>
            <p>Let <m>R=k[x,xy,xy^2,\dots] \subseteq k[x,y]</m>. For all <m>a \geqslant 1</m>, <m>xy^a \notin (x)</m>, since <m>y^a\notin R</m>, but <m>(xy^a)^2 = x \cdot x y^{2a}\in (x)</m>. Then <m>(x)</m> is not prime in <m>R</m>, and moreover <m>\fm=(x,xy,xy^2,\dots) \subseteq \sqrt{(x)}</m>. Since <m>\fm</m> is a maximal ideal, we have equality, so <m>\Min{(x)}=\{\fm\}</m>. However, <m>\p=(xy,xy^2, xy^3,\dots) = (y) k[x,y] \cap R</m> is prime, and the chain <m>(0) \subsetneq \p \subsetneq \fm</m> shows that <m>\ht(\fm)&gt;1</m>.</p>
          </example>
  
          <corollary xml:id="cor-ideals-in-noeth-rings-have-finite-height"><title>Ideals in Noeth Rings have Finite Height</title>
            <statement>
              <p>If <m>R</m> is a noetherian ring, then any ideal has finite height. If <m>(R,\fm,k)</m> is also local, then <m>\dim(R) \leqslant \dim_k(\fm/\fm^2) &lt;\infty</m>.</p>
            </statement>
  
            <proof>
              <p>If <m>R</m> is noetherian, then every ideal is finitely generated, by , and thus by  every ideal has finite height.</p>
  
              <p>Now suppose that <m>(R,\fm,k)</m> is a noetherian local ring. By , <m>\fm</m> is generated by <m>\dim_k(\fm/\fm^2)</m> elements, so <me>\dim(R) = \ht(m) \leqslant \dim_k(\fm/\fm^2).</me></p>
  
            </proof>
          </corollary>
  
          <definition xml:id="defn-embedding-dimension"><title>Embedding Dimension</title>
          <statement>
            <p>The <em>embedding dimension</em><idx><h>embedding dimension</h></idx> of a local ring <m>(R, \fm)</m> is the minimal number of generators of <m>\fm</m>, <m>\mu(\fm)</m>. We write <m>\textrm{embdim}(R) := \mu(\fm)</m> for the embedding dimension of <m>R</m>.<idx><h><m>\textrm{embdim}(R)</m></h></idx></p>
          </statement>
          </definition>
  
          <definition xml:id="defn-regular-local-ring"><title>Regular Local Ring</title>
            <statement>
              <p>A noetherian local ring <m>(R, \fm)</m> is <em>regular</em><idx><h>regular local ring</h></idx> if <m>\dim(R) = \edim(R)</m>.</p>
            </statement>
          </definition>

          <remark><p>Power series rings <m>k [[ x_1, \ldots, x_d ]]</m> are regular local rings. In general, a ring is regular if all its localizations are regular local rings. In order for this definition to make sense, we need to first make sure that regularity localizes, meaning that if <m>(R, \fm)</m> is a regular local ring, then <m>R_P</m> is also regular for all primes <m>P</m>. But to do that, we need some homological algebra. However (spoiler alert!), things do work out alright, and as you might expect, polynomial rings over fields are also regular.</p></remark>

        </section>

        <section xml:id="sec-sops"><title>Systems of Parameters</title>

          <!--**************************
          Section: Systems of Paremeters
          ***************************-->
          
          <blockquote>
            <p>
              <q></q>
            </p>
            <attribution></attribution>
          </blockquote>
  
          <theorem xml:id="thm-existence-of-sops"><title>Existence of SOPs</title>
    
    
            <statement>
              
    
              <p>
                Let <m>(R,\fm)</m> be a noetherian local ring of dimension <m>d</m>. There there exist <m>x_1,\dots,x_d\in \fm</m> such that <m>\fm= \sqrt{(x_1,\dots,x_d)}</m>.
              </p>

            </statement>
  
  
            <proof>

  
              <p>
                Let <m>d := \dim(R)</m>. If <m>d=0</m>, then <m>\fm=\sqrt{(0)}</m>, so the statement holds.
              </p>
  
              <p>
                In general, we will show that we can choose <m>x_1,\dots, x_i\in \fm</m> inductively such that every minimal prime of <m>J_i= (x_1,\dots,x_i)</m> has height <m>i</m>. The case <m>i=0</m> is clear from the comment above. Say that we have chosen the first <m>i</m> elements. If <m>i&lt;d</m>, note that <m>\fm</m> is not a minimal prime of <m>J_i</m>, as this would contradict . Note that <m>R</m> is noetherian and thus <m>J_i</m> has finitely many minimal primes, by . Thus, by , we can choose <m>x_{i+1} \in \fm</m> not in any minimal prime of <m>J_i</m>. Then by  every minimal prime of <m>J_{i+1} := J_i +(x_{i+1})</m> has height at most <m>i+1</m>. On the other hand, every <m>Q \in \Min(J_{i+1})</m> contains some <m>P \in \Min(J_i)</m>, and in fact we must have <m>Q \supsetneq P</m>, since <m>x_{i+1}\in Q \smallsetminus P</m>. Since <m>P</m> has height <m>i</m> and <m>P \supsetneq Q</m>, then <m>Q</m> must have height at least <m>i+1</m>. Therefore, <m>Q</m> must have height exactly <m>i+1</m>, completing the induction.
              </p>
  
              <p>
                Since every minimal prime of <m>J_d = (x_1,\dots,x_d)</m> has height <m>d</m>, its unique minimal prime must be <m>\fm</m>. It follows that <m>\sqrt{J_d}=\fm</m>.
              </p>
  
            </proof>
          </theorem>
  
          <corollary xml:id="cor-dim-embdim"><title>Dim <m>&lt;</m>= EmbDim</title>
  
  
            <statement>
              
  
              <p>
                Let <m>(R,\fm,k)</m> be a noetherian local ring. Then <me>\dim(R)=\min\{ n \ | \ \sqrt{(f_1,\dots,f_n)}=\fm \textrm{ for some } f_1,\dots,f_n \} \leqslant \mu(\fm).</me> In particular, a noetherian local ring has finite dimension.
              </p>
  
            </statement>
  
            <proof>
  
  
              <p>
                Suppose that <m>\sqrt{(f_1,\dots,f_n)}=\fm</m>. Then <m>\fm</m> is a minimal prime of <m>(f_1, \ldots, f_n)</m>, and thus <m>\fm</m> has height at most <m>n</m> by . The dimension of a local ring is the height of its maximal ideal, so <m>\dim(R) \leqslant n</m>, and thus <m>\dim(R)</m> is bounded above by the minimum in the middle. On the other hand, if <m>d = \dim(R)</m> then by  there exist <m>f_1, \ldots, f_d</m> such that <m>\fm = (f_1, \ldots, f_d)</m>, which gives the other inequality, showing<me>\dim(R)=\min\{ n \ | \ \sqrt{(f_1,\dots,f_n)}=\fm \textrm{ for some } f_1,\dots,f_n \}.</me>Finally, since <m>\fm</m> is generated by <m>\mu(\fm)</m> elements, there are in particular <m>\mu(\fm)</m> elements whose radical is <m>\fm</m>.
              </p>
  
            </proof>
          </corollary>
  
          <definition xml:id="defn-system-of-parameters"><title>System of Parameters</title>
          <statement>
            <p>
              A sequence of <m>d</m> elements <m>x_1,\dots,x_d</m> in a <m>d</m>-dimensional noetherian local ring <m>(R,\fm)</m> is a <em>system of parameters</em><idx><h>system of parameters</h></idx> or <em>SOP</em><idx><h>sop</h></idx> if <m>\sqrt{(x_1,\dots,x_d)}=\fm</m>. If <m>k</m> is a field, a sequence of <m>d</m> homogeneous elements <m>x_1,\dots,x_d</m> in a <m>d</m>-dimensional <m>\N</m>-graded finitely generated <m>k</m>-algebra <m>R</m>, with <m>R_0=k</m>, is a <em>homogeneous system of parameters</em><idx><h>homogeneous system of parameters</h></idx> if <m>\sqrt{(x_1,\dots,x_d)}=R_+</m>.
            </p>
  
            <p>
              We say that elements <m>x_1,\dots,x_t</m> are <em>parameters</em><idx><h>parameters</h></idx> if they are part of a system of parameters; this is a property of the set, not just the elements.
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-absolutely-minimal-prime"><title>Absolutely Minimal Prime</title>
          <statement>
            <p>
              Let <m>R</m> be a noetherian ring. A prime <m>P</m> of <m>R</m> is an <em>absolutely minimal prime</em><idx><h>absolutely minimal prime</h></idx> of <m>R</m> if <m>\dim(R)=\dim(R/P)</m>.
            </p>
          </statement>
          </definition>
  
          <theorem xml:id="thm-sop-stuff-theorem"><title>SOP Stuff Theorem</title>
  
  
            <statement>
              
  
              <p>
                Let <m>(R,\fm)</m> be a noetherian local ring, and <m>x_1,\dots,x_t\in \fm</m>. (a) <m>{\dim(R/(x_1,\dots,x_t))\geqslant \dim(R)-t}.</m> (b) <m>x_1,\dots,x_t</m> are parameters if and only if <m>\dim(R/(x_1,\dots,x_t))=\dim(R)-t</m>. (c) <m>x_1,\dots,x_t</m> are parameters if and only if <m>x_1</m> is not in any absolutely minimal prime of <m>R</m> and <m>x_i</m> is not contained in any absolutely minimal prime of <m>R/(x_1,\dots,x_{i-1})</m> for each <m>i=2,\dots,t</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                If <m>\dim(R/(x_1,\dots,x_t)) = s</m>, then take a system of parameters <m>y_1,\dots,y_s</m> for <m>R/(x_1,\dots,x_t)</m>, and pull back to <m>R</m> to get <m>x_1,\dots,x_t,y'_1,\dots,y'_s</m> in <m>R</m> such that the quotient of <m>R</m> modulo the ideal generated by these elements has dimension zero. By Krull height, we get that <m>t+s\geqslant \dim(R)</m>.
              </p>
  
              <p>
                Let <m>d=\dim(R)</m>. Suppose first that <m>\dim(R/(x_1,\dots,x_t))=d-t</m>. Then, there is a SOP <m>y_1,\dots,y_{d-t}</m> for <m>R/(x_1,\dots,x_t)</m>; lift back to <m>R</m> to get a sequence of <m>d</m> elements <m>x_1,\dots,x_t,y_1,\dots,y_{d-t}</m> that generate an <m>\fm</m>-primary ideal. This is a SOP, so <m>x_1,\dots,x_t</m> are parameters.
              </p>
  
              <p>
                On the other hand, if <m>x_1,\dots,x_t</m>, are parameters, extend to a SOP <m>x_1,\dots,x_d</m>. If <m>I</m> is the image of <m>(x_{t+1},\dots,x_d)</m> in <m>R'=R/(x_1,\dots,x_t)</m>, we have <m>R'/I</m> is zero-dimensional, hence has finite length, so <m>\Ass_{R'}(R'/I)=\{\fm\}</m>, and <m>I</m> is <m>\fm</m>-primary in <m>R'</m>. Thus, <m>\dim(R')</m> is equal to the height of <m>I</m>, which is then <m>\leqslant d-t</m> by Krull height. That is, <m>\dim(R') \leqslant d-t</m>, and using the first statement, we have equality.
              </p>
  
              <p>
                This follows from the previous statement and the observation that <m>\dim(S/(f)) &lt; \dim(S)</m> if and only if <m>f</m> is not in any absolutely minimal prime of <m>S</m>.
              </p>
  
              <p>
                Let <m>R=\Z_{(2)}[x]</m>. This ring has dimension at least two, but <m>R/(2x-1)\cong \mathbb{Q}</m> has dimension zero.
              </p>
  
              <p>
                For an example that is a finitely generated algebra over a field, consider <m>R = S/I</m> with <m>S = k[x,y,z]</m> and <m>I =(xy,xz,x^2-x)</m>. This ring has dimension two: <m>A=k[y,z]</m> is a noether normalization, as <m>x^2-x=0</m> makes <m>x</m> integral over <m>A</m>, and no nonzero polynomial in <m>y,z</m> in <m>k[x,y,z]</m> can belong to the ideal <m>(x) \supseteq (xy,xz,x^2-x)</m>. However, <me>\displaystyle R/(x-1) \cong \frac{k[x,y,z]}{(y,z,x-1)}\cong k</me> has dimension zero.
              </p>
            </proof>
  
          </theorem>
  
        </section>
  
      </chapter>

    </part>

    <part xml:id="part-homological"><title>Homological Algebra</title>

      <chapter xml:id="ch-where"><title>Where Are We Going?</title>

        <introduction>
          <p>
            Homological algebra first appeared in the study of topological spaces. 
            Roughly speaking, homology is a way of associating a sequence of abelian groups (or modules, or other more sophisticated algebraic objects) to another object, for example a topological space. 
            The homology of a topological space encodes in topological information about the space in algebraic language - this is what algebraic topology is all about.
          </p>
      
          <p>
            Despite its very concrete origins, modern homological algebra lives somewhere in the realm of abstract nonsense, and can be described as the study of abelian categories. 
            An abelian category is, roughly speaking, modeled after Ab, the category of abelian groups and abelian group homomorphisms. 
            It is this more general setting, rather than the classical topological setting, that we are interested in. 
            However, it is very hard to understand general abelian categories without some good concrete examples we can get our hands on, so we should first start from a reasonable middle ground. 
            While it might be very difficult to get a concrete handle on a general abelian category, it turns out that every reasonable abelian category embeds into <m>R</m>-mod, the category of <m>R</m>-modules and <m>R</m>-module homomorphisms. 
            In this first chapter we introduce the main characters - complexes, homology, categories and then we will spend most of our time studying <m>R</m>-mod, while keeping in mind that what happens in a general abelian category is simply an abstraction of what happens in <m>R</m>-mod.
          </p>
        </introduction>

        <section xml:id="sec-complex-homology"><title>Complexes and Homology</title>

          <subsection xml:id="subsec-complex-ses"><title>Complexes and Exact Sequences</title>

          <p>
            Homological algebra is a branch of abstract algebra that studies the homology of chain complexes.
          </p>

          <definition xml:id="def-chain-complex"><title>Chain Complex</title>
            <statement>
              <p>
                A chain complex of <m>R</m>-modules <m>\left(C_{\bullet}, \delta_{\bullet}\right)</m>, also referred to simply as a complex, is a sequence of <m>R</m>-modules <m>C_{i}</m> and <m>R</m>-module homomorphisms
                <me>\cdots \longrightarrow C_{n+1} \stackrel{\delta_{n+1}}{\longrightarrow} C_{n} \stackrel{\delta_{n}}{\longrightarrow} C_{n-1} \longrightarrow \cdots</me>
                such that <m>\delta_{n} \delta_{n+1}=0</m> for all <m>n</m>. We refer to <m>C_{n}</m> as the module in homological degree <m>n</m>. The maps <m>\delta_{n}</m> are the differentials of our complex. We may sometimes omit the differentials <m>\delta_{n}</m> and simply refer to the complex <m>C_{\bullet}</m> or even <m>C</m>; we may also sometimes refer to <m>\delta_{\bullet}</m> as the differential of <m>C_{\text {. }}</m>.
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              In some contexts, it is important to make a distinction between chain complexes and co-chain complexes, where the arrows go the opposite way: a co-chain complex would look like
              <me>\cdots \longrightarrow C_{n-1} \stackrel{\delta_{n}}{\longrightarrow} C_{n} \stackrel{\delta_{n+1}}{\longrightarrow} C_{n+1} \longrightarrow \cdots .</me>
              We will not need to make such a distinction, so we will call both of these complexes and most often follow the convention in the definition above.

            </p>
          </remark>

          <definition xml:id="def-bounded-complex"><title>Bounded</title>
            <statement>
              <p>
                We will say a complex is bounded above if <m>F_{n}=0</m> for all <m>n \gg 0</m>, and bounded below if <m>F_{n}=0</m> for all <m>n \ll 0</m>. A bounded complex is one that is both bounded above and below. If a complex is bounded, we may sometimes simply write it as a finite complex, say
                <me>C_{n} \stackrel{\delta_{n}}{\longrightarrow} C_{n-1} \longrightarrow \cdots \longrightarrow C_{m}</me>
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              The condition that <m>\delta_{n} \delta_{n+1}=0</m> for all <m>n</m> implies that <m>\operatorname{im} \delta_{n+1} \subseteq \operatorname{ker} \delta_{n}</m>.
            </p>
          </remark>

          <definition xml:id="def-exact"><title>Exact</title>
            <statement>
              <p>
                The complex <m>\left(C_{\bullet}, \delta_{\bullet}\right)</m> is exact at <m>n</m> if <m>\operatorname{im} \delta_{n+1}=\operatorname{ker} \delta_{n}</m>. 
                An exact sequence is a complex that is exact everywhere.
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Remark 9.7. 
              The sequence <m>0 \longrightarrow A \stackrel{f}{\longrightarrow} B</m> is exact if and only if <m>f</m> is injective. Similarly, <m>B \stackrel{f}{\longrightarrow} C \longrightarrow 0</m> is exact if and only if <m>f</m> is surjective. So
            </p>
      
            <p>
              <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
            </p>
      
            <p>
              is a short exact sequence if and only if
            </p>
      
            <p><ul>
              <li>
                    <p>
              <m>f</m> is injective
            </p>
              </li>
      
              <li>
                    <p>
              <m>g</m> is surjective
            </p>
              </li>
      
              <li>
                    <p>
              <m>\operatorname{im} f=\operatorname{ker} g</m>.
            </p>
              </li>
      
            </ul></p>
      
            <p>
              Requiring that <m>f</m> be injective is the same as asking that <m>\operatorname{ker} f=0</m>, while <m>g</m> is surjective if and only if coker <m>g=0 .{ }^{1}</m> When this is indeed a short exact sequence, we can identify <m>A</m> with its image <m>f(A)</m>, and <m>A=\operatorname{ker} g</m>. Moreover, since <m>g</m> is surjective, by the First Isomorphism Theorem we conclude that <m>C \cong B / A</m>, so we might abuse notation and identify <m>C</m> with <m>B / A</m>.
            </p>
          </remark>

          <p>
            Remark 9.8. The complex <m>0 \longrightarrow M \stackrel{f}{\longrightarrow} N \longrightarrow 0</m> is exact if and only if <m>f</m> is an isomorphism.
          </p>
    
          <p>
            Remark 9.9. The complex <m>0 \longrightarrow M \longrightarrow 0</m> is exact if and only if <m>M=0</m>.
          </p>
    
          <p>
            Example 9.10. Let <m>\pi</m> be the canonical projection <m>\mathbb{Z} \longrightarrow \mathbb{Z} / 2 \mathbb{Z}</m>. The following is a short exact sequence:
          </p>
    
          <p>
            <me>0 \longrightarrow \mathbb{Z} \stackrel{2}{\longrightarrow} \mathbb{Z} \stackrel{\pi}{\longrightarrow} \mathbb{Z} / 2 \mathbb{Z} \longrightarrow 0</me>
          </p>
    
          <p>
            We will most often be interested in complexes of <m>R</m>-modules, where the abelian groups that show up are all modules over the same ring <m>R</m>.
          </p>
    
          <p>
            <m>{ }^{1}</m> The cokernel of a homomorphism <m>f: M \longrightarrow N</m> is the <m>R</m>-module <m>N / \operatorname{im} f</m>. Example 9.11. Let <m>R=k[x]</m> be a polynomial ring over the field <m>k</m>. Then following is a short exact sequence:
          </p>
    
          <p>
            <me>0 \longrightarrow R \stackrel{\cdot x}{\longrightarrow} R \stackrel{\pi}{\longrightarrow} R /(x) \longrightarrow 0 .</me>
          </p>
    
          <p>
            The first map is multiplication by <m>x</m>, and the second map is the canonical projection.
          </p>
    
          <p>
            Here are some more examples of complexes.
          </p>
    
          <p>
            Example 9.12. Let <m>R=k[x] /\left(x^{2}\right)</m>. The following complex is exact:
          </p>
    
          <p>
            <me>\cdots \longrightarrow \stackrel{\cdot x}{\longrightarrow} R \stackrel{\cdot x}{\longrightarrow} R \longrightarrow \cdots .</me>
          </p>
    
          <p>
            Indeed, the image and the kernel of multiplication by <m>x</m> are both <m>(x)</m>.
          </p>
    
          <p>
            Example 9.13. Let <m>R=k[x] /\left(x^{3}\right)</m>. Consider the following complex:
          </p>
    
          <p>
            <me>F_{\bullet}=\cdots \longrightarrow R \stackrel{\cdot x^{2}}{\longrightarrow} R \stackrel{\cdot x^{2}}{\longrightarrow} R \longrightarrow \cdots .</me>
          </p>
    
          <p>
            The image of multiplication by <m>x^{2}</m> is <m>\left(x^{2}\right)</m>, while the the kernel of multiplication by <m>x^{2}</m> is <m>(x) \supseteq\left(x^{2}\right)</m>. For all <m>n</m>,
          </p>
    
          <p>
            <me>\mathrm{H}_{n}\left(F_{\bullet}\right)=(x) /\left(x^{2}\right) \cong R /(x)</me>
          </p>

        </subsection>

        <subsection xml:id="subsec-homology"><title>Homology</title>

          <p>
            Historically, chain complexes first appeared in topology.
             To study a topological space, one constructs a particular chain complex that arises naturally from information from the space, and then calculates its homology, which ends up encoding important topological information in the form of a sequence of abelian groups.
          </p>

          <definition xml:id="def-homology"><title>Homology</title>
            <statement>
              <p>
                The homology of the complex <m>\left(C_{\bullet}, \delta_{\bullet}\right)</m> is the sequence of <m>R</m>-modules
                <me>\mathrm{H}_{n}\left(C_{\bullet}\right):=\frac{\operatorname{ker} \delta_{n}}{\operatorname{im} \delta_{n+1}} .</me>
                The <m>n</m>th homology of <m>\left(C_{\bullet}, \delta_{\bullet}\right)</m> is <m>\mathrm{H}_{n}\left(C_{\bullet}\right)</m>. The submodules <m>Z_{n}\left(C_{\bullet}\right):=\operatorname{ker} \delta_{n} \subseteq C_{n}</m> are called cycles, while the submodules <m>B_{n}\left(C_{\bullet}\right):=\operatorname{im} \delta_{n+1} \subseteq C_{n}</m> are called boundaries.
              </p>
            </statement>
          </definition>

          <p>
            The homology of a complex measures how far our complex is from being exact at each point. 
            Again, we can talk about the cohomology of a cochain complex instead; we will for now not worry about the distinction.
          </p>

          <remark>
            <p>
              Note that <m>\left(C_{\bullet}, \delta_{\bullet}\right)</m> is exact at <m>n</m> if and only if <m>\mathrm{H}_{n}\left(C_{\bullet}\right)=0</m>.
            </p>
          </remark>

          <example>
            <statement>
              <p>
                Let <m>\mathbb{Z} \stackrel{\pi}{\longrightarrow} \mathbb{Z} / 2 \mathbb{Z}</m> be the canonical projection map. 
                Then
              </p>
              <image source="2023_07_25_67c47b89165ce0b2ed42g-002"/>
              <p>
                is a complex, since the image of multiplication by <m>4</m> is <m>4 \mathbb{Z}</m>, and that is certainly contained in <m>\operatorname{ker} \pi=2 \mathbb{Z}</m>. 
                The homology of <m>C</m> is
                <me>
                  \begin{array}{ll}
                  \mathrm{H}_{n}(C)=0 &amp; \text { for } n \geqslant 3 \\
                  \mathrm{H}_{2}(C)=\frac{\operatorname{ker}(\mathbb{Z} \stackrel{4}{\rightarrow} \mathbb{Z})}{\operatorname{im}(0 \longrightarrow \mathbb{Z})}=\frac{0}{0}=0 &amp; \\
                  \mathrm{H}_{1}(C)=\frac{\operatorname{ker}(\mathbb{Z} \longrightarrow \mathbb{Z} / 2 \mathbb{Z})}{\operatorname{im}(\mathbb{Z} \stackrel{4}{\rightarrow} \mathbb{Z})}=\frac{2 \mathbb{Z}}{4 \mathbb{Z}} \cong \mathbb{Z} / 2 \mathbb{Z} &amp; \\
                  \mathrm{H}_{0}(C)=\frac{\operatorname{ker}(\mathbb{Z} / 2 \mathbb{Z} \longrightarrow 0)}{\operatorname{im}(\mathbb{Z} \longrightarrow \mathbb{Z} / 2 \mathbb{Z})}=\frac{\mathbb{Z} / 2 \mathbb{Z}}{\mathbb{Z} / 2 \mathbb{Z}}=0 &amp; \text { for } n&lt;0 \\
                  \mathrm{H}_{n}(C)=0 &amp;
                  \end{array}
                </me>
              </p>
            </statement>
            <solution>
              <p>
                
              </p>
            </solution>
          </example>
    
          <p>
            Notice that our complex is exact at 2 and 0 . The exactness at 2 says that the map <m>\mathbb{Z} \stackrel{4}{\rightarrow} \mathbb{Z}</m> is injective, while exactness at 0 says that <m>\mathbb{Z} \longrightarrow \mathbb{Z} / 2 \mathbb{Z}</m> is surjective.
          </p>
    
          <p>
            Those last remarks were not a coincidence. We repeat Remark 1.11 but now in this more general context.
          </p>
          

        </subsection>

        </section>

      </chapter>
      

    </part>

    <backmatter xml:id="backmatter"><title>Backmatter</title>

      <appendix xml:id="intro"><title>Setting the Stage</title>

        <introduction><p>Here are some elementary definitions and facts we will assume you have already seen before.</p></introduction>

        <section xml:id="sec-rings-ideals"><title>Rings and Ideals</title>

          <p>Commutative Algebra is the branch of algebra that studies commutative rings and modules over such rings. For a commutative algebraist, every ring is commutative and has a <m>1 \neq 0</m>.</p>

          <definition xml:id="def-ring"><title>Ring</title>
            <statement>
              <p>
                A <term>ring</term> is a set <m>R</m> equipped with two binary operations <m>+</m> and <m>\cdot</m> satisfying the following properties:
              </p>

              <p><ol>
                <li>
                      <p>
                <m>R</m> is an abelian group under the addition operation <m>+</m>, with additive identity <m>0</m>, or <m>0_R</m> if we need to specify which ring we are talking about. Explicitly, this means that
              </p>

              <p><ul>
                <li>
                      <p>
                <m>a + (b+c) = (a+b) + c</m> for all <m>a, b, c \in R</m>,
              </p>
                </li>

                <li>
                      <p>
                <m>a + b = b + a</m> for all <m>a, b \in R</m>,
              </p>
                </li>

                <li>
                      <p>
                there is an element <m>0 \in R</m> such that <m>0 + a = a</m> for all <m>a \in R</m>, and
              </p>
                </li>

                <li>
                      <p>
                for each <m>a \in R</m> there exists an element <m>-a \in R</m> such that <m>a + (-a) = 0</m>.
              </p>
                </li>

              </ul></p>
                </li>

                <li>
                      <p>
                <m>R</m> is a commutative monoid under the multiplication operation <m>\cdot</m>, with multiplicative identity <m>1_R</m> or simply <m>1</m>. Explicitly, this means that
              </p>

              <p><ul>
                <li>
                      <p>
                <m>(a \cdot b) \cdot c = a \cdot (b \cdot c)</m> for all <m>a, b, c \in R</m>,
              </p>
                </li>

                <li>
                      <p>
                <m>a \cdot b = b \cdot a</m> for all <m>a, b \in R</m>, and
              </p>
                </li>

                <li>
                      <p>
                there exists an element <m>1 \in R</m> such that <m>1 \cdot a = a \cdot 1</m> for all <m>a \in R</m>.
              </p>
                </li>

              </ul></p>

              <p>
                We typically write <m>ab</m> for <m>a \cdot b</m>.
              </p>
                </li>

                <li>
                      <p>
                multiplication is distributive with respect to addition, meaning that for all <m>a, b, c \in R</m> we have <me>a \cdot (b+c) = a \cdot b+a \cdot c.</me>
              </p>
                </li>

                <li>
                      <p>
                <m>1 \neq 0</m>.
              </p>
                </li>

              </ol></p>
            </statement>
          </definition>

          <p>In this text, <term>all rings are commutative</term>. In other branches of algebra rings might fail to be commutative, but we will explicitly say <em>noncommutative ring</em> if that is the case. There also branches of algebra where rings are allowed to not have a multiplicative identity; we recommend <xref provisional="WhyRings1"></xref> for an excellent read on the topic of <em>Why rings should have a 1</em>.</p>

          <example><title>Ring Examples</title>
            <p>
              Here are some examples of the kinds of rings we will be talking about.
            </p>

            <p><ol>
              <li>
                    <p>
              The integers <m>\mathbb{Z}</m>, or any quotient of <m>\mathbb{Z}</m>, which we write compactly as <m>\mathbb{Z}/n</m>.
            </p>
              </li>

              <li>
                    <p>
              A polynomial ring, by which we typically mean <m>R = k [x_1, \ldots, x_n]</m>, a polynomial ring in finitely many variables over a field <m>k</m>.
            </p>
              </li>

              <li>
                    <p>
              A quotient of a polynomial ring by an ideal <m>I</m>, say <m>R = k[x_1, \ldots, x_n]/I</m>.
            </p>
              </li>

              <li>
                    <p>
              Rings of polynomials in infinitely many variables, <m>R = k[x_1, x_2, \ldots]</m>.
            </p>
              </li>

              <li>
                    <p>
              Power series rings <m>R = k[[ x_1, \ldots, x_n ]]</m> over a field <m>k</m>. The elements are (formal) power series <m>\displaystyle\sum_{a_i \geqslant 0} c_{a_1, \ldots, a_n} x_1^{a_1} \cdots x_n^{a_n}</m>.
            </p>
              </li>

              <li>
                    <p>
              While any field <m>k</m> is a ring, we will see that fields on their own are not very exciting from the perspective of the kinds of things we will be discussing in this class.
            </p>
              </li>

            </ol></p>
          </example>

          <definition xml:id="def-ring-map"><title>Ring Homomorphism</title>
            <statement>
              <p>
                Given rings <m>R</m> and <m>S</m>, a function <m>R \xrightarrow{f} S</m> is a <term>ring homomorphism</term> if <m>f</m> preserves the operations and the multiplicative identity, meaning
              </p>

              <p><ul>
                <li>
                      <p>
                <m>f(a+b) = f(a) + f(b)</m> for all <m>a, b \in R</m>,
              </p>
                </li>

                <li>
                      <p>
                <m>f(ab) = f(a)f(b)</m> for all <m>a, b \in R</m>, and
              </p>
                </li>

                <li>
                      <p>
                <m>f(1)=1</m>.
              </p>
                </li>

              </ul></p>

              <p>
                A bijective ring homomorphism is an <term>isomorphism</term>. We should think about a ring isomorphism as a relabelling of the elements in our ring.
              </p>
            </statement>
          </definition>

          <definition xml:id="def-subring"><title>Subring</title>
            <statement>
              <p>
                A subset <m>R \subseteq S</m> of a ring <m>S</m> is a <term>subring</term> if <m>R</m> is also a ring with the structure induced by <m>S</m>, meaning that the each operation on <m>R</m> is the restrictions of the corresponding operation on <m>S</m> to <m>R</m>, and the <m>0</m> and <m>1</m> in <m>R</m> are the <m>0</m> and <m>1</m> in <m>S</m>, respectively.
              </p>
            </statement>
          </definition>

          <p>Often, we care about the ideals in a ring more than we care about individual elements.</p>

          <definition xml:id="def-ideal"><title>Ideal</title>
            <statement>
              <p>
                A nonempty subset <m>I</m> of a ring <m>R</m> is an <term>ideal</term> if it is closed for the addition and for multiplication by any element in <m>R</m>: for any <m>a, b \in I</m> and <m>r \in R</m>, we must have <m>a+b \in I</m> and <m>ra \in I</m>. The <term>ideal generated by</term> <m>f_1, \ldots, f_n</m>, denoted <m>(f_1, \ldots, f_n)</m>, is the smallest ideal containing <m>f_1, \ldots, f_n</m>, or equivalently, <me>(f_1, \ldots, f_n) = \left\lbrace r_1 f_1 + \cdots r_n f_n \, | \, r_i \in R \right\rbrace.</me>
              </p>
            </statement>
          </definition>

          <example><title>Ideal Examples</title>
            <p>Every ring has always at least two ideals, the <term>zero ideal</term> <m>(0) = \left\lbrace 0 \right\rbrace</m> and the <term>unit ideal</term> <m>(1) = R</m>.</p>
          </example>

          <p>We will follow the convention that when we say <em>ideal</em> we actually mean an ideal <m>I \neq R</m>.</p>

          <theorem xml:id="thm-fit"><title>First Isomorphism Theorem</title>
            <statement>
              <p>
                If <m>R \xrightarrow{\varphi} S</m> is a ring homomorphism, then <m>R/\operatorname{ker}\varphi \cong \mathop{\mathrm{im}}{\varphi}</m>.
              </p>
            </statement>
          </theorem>

          <exercise><title>Ideals in <m>\Z</m></title>
            <p>The ideals in <m>\mathbb{Z}</m> are the sets of multiples of a fixed integer, meaning every ideal has the form <m>(n)</m>. In particular, every ideal in <m>\mathbb{Z}</m> can be generated by one element.</p>
          </exercise>

          <p>This makes <m>\mathbb{Z}</m> the canonical example of a <term>principal ideal domain</term>.</p>

          <definition xml:id="def-domain"><title>Domain, PID</title>
            <statement>
              <p>
                A <term>domain</term> is a ring with no zerodivisors, meaning that <m>rs = 0</m> implies that <m>r = 0</m> or <m>s = 0</m>. A <term>principal ideal</term> is an ideal generated by one element. A <term>principal ideal domain</term> or <term>PID</term> is a domain where every ideal is <term>principal</term>.
              </p>
            </statement>
          </definition>

          <exercise><title>Polynomian Rings over Fields are PIDs</title>
            <p>
              Given a field <m>k</m>, <m>R = k[x]</m> is a principal ideal domain, so every ideal in <m>R</m> is of the form <m>(f) = \left\lbrace fg \, | \, g \in R \right\rbrace</m>.              
            </p>
          </exercise>

          <exercise><title><m>k[x,y]</m> not a PID</title>
            <p>
              While <m>R = k[x,y]</m> is a domain, it is <term>not</term> a PID. We will see later that every ideal in <m>R</m> is finitely generated, and yet we can construct ideals in <m>R</m> with arbitrarily many generators!            
            </p>
          </exercise>

          <example><title><m>\Z[x]</m> not a PID</title>
            <p>The ring <m>\mathbb{Z}[x]</m> is a domain but <term>not</term> a PID. For example, <m>(2,x)</m> is not principal.</p>
          </example>

          <theorem xml:id="thm-sunzi"><title>Sunzi's Remainder Theorem</title>
            <statement>
              <p>
                Let <m>R</m> be a ring and <m>I_1, \ldots, I_n</m> be pairwise coprime ideals in <m>R</m>, meaning <m>I_i + I_j = R</m> for all <m>i \neq j</m>. Then <m>I := I_1 \cap \cdots \cap I_n = I_1 \cdots  I_n</m>, and there is an isomorphism of rings 
                <me>
                \begin{CD}
                  R/I@&gt;\cong&gt;&gt; R/I_1 \times \cdots \times R/I_n\\\\
                  r + I@&gt;&gt;&gt;(r+I_1, \ldots, r+I_n)
                \end{CD}
              </me>
              </p>
            </statement>
          </theorem>

          <remark><p>This theorem frequently goes by the name of The Chinese Remainder Theorem, but it has been remarked that this is somewhat like referencing the Pythagorean Theorem as The Greek Triangle Theorem or Fermat's Little Theorem as The French Power Postulate. In the interest of giving credit where credit is due, we include it here with the name of the 3rd-century Chinese mathematician, Sunzi, to whom the result is often attributed.</p></remark> 
        </section>

        <section xml:id="sec-modules"><title>Modules</title>

          <p>Just like linear algebra is the study of vector spaces over fields, commutative algebra often focuses on the structure of modules over commutative rings. While in other branches of algebra modules might be left- or right-modules, our modules are usually two sided, and we refer to them simply as modules.</p>

          <definition xml:id="def-module"><title>Modules</title>
            <statement>
              <p>
                Given a ring <m>R</m>, an <term><m>R</m>-module</term> <m>(M,+)</m> is an abelian group equipped with an <m>R</m>-action that is compatible with the group structure. More precisely, there is an operation <m>\cdot: R \times M \longrightarrow M</m> such that
              </p>

              <p><ul>
                <li>
                      <p>
                <m>r \cdot (a + b) = r \cdot a + r \cdot b</m> for all <m>r \in R</m> and <m>a, b \in M</m>,
              </p>
                </li>

                <li>
                      <p>
                <m>(r+s) \cdot a = r \cdot a + s \cdot a</m> for all <m>r,s \in R</m> and <m>a \in M</m>,
              </p>
                </li>

                <li>
                      <p>
                <m>(rs) \cdot a = r \cdot (s \cdot a)</m> for all <m>r, s \in R</m> and <m>a \in M</m>, and
              </p>
                </li>

                <li>
                      <p>
                <m>1 \cdot a = a</m> for all <m>a \in M</m>.
              </p>
                </li>

              </ul></p>

              <p>
                We typically write <m>r a</m> for <m>r \cdot a</m>, and denote the additive identity in <m>M</m> by <m>0</m>, or <m>0_M</m> if we need to distinguish it from <m>0_R</m>.
              </p>
            </statement>
          </definition>

          <p>The definitions of submodule, quotient of modules, and homomorphism of modules are very natural and easy to guess, but here they are.</p>

          <definition xml:id="def-submodule"><title>Submodule, Homomorphism, Quotient Modules</title>
            <statement>
              <p>
                If <m>N \subseteq M</m> are <m>R</m>-modules with compatible structures, we say that <m>N</m> is a <term>submodule</term> of <m>M</m>.
              </p>

              <p>
				        A map <m>M\xrightarrow f N</m> between <m>R</m>-modules is a <term>homomorphism of <m>R</m>-modules</term> if it is a homomorphism of abelian groups that preserves the <m>R</m>-action, meaning <m>f(ra) = rf(a)</m> for all <m>r \in R</m> and all <m>a \in M</m>. We sometimes refer to <m>R</m>-module homomorphisms as <term><m>R</m>-module maps</term>, or <term>maps of <m>R</m>-modules</term>. An isomorphism of <m>R</m>-modules is a bijective homomorphism, which we really should think about as a relabeling of the elements in our module. If two modules <m>M</m> and <m>N</m> are isomorphic, we write <m>M \cong N</m>.
			        </p>

              <p>
                Given an <m>R</m>-module <m>M</m> and a submodule <m>N \subseteq M</m>, the <term>quotient module</term> <m>M/N</m> is an <m>R</m>-module whose elements are the equivalence classes under the relation on <m>M</m> given by <m>a \sim b \Leftrightarrow a-b \in N</m>. One can check that this set naturally inherits an <m>R</m>-module structure from the <m>R</m>-module structure on <m>M</m>, and it comes equipped with a natural <term>canonical map</term> <m>M \longrightarrow M/N</m> induced by sending <m>1</m> to its equivalence class.
              </p>
            </statement>
          </definition>

          <example>
            <p>The modules over a field <m>k</m> are precisely all the <m>k</m>-vector spaces. Linear transformations are precisely all the <m>k</m>-module maps.</p>
          </example>

          <example>
            <p>
              The <m>\mathbb{Z}</m>-modules are precisely all the abelian groups.
            </p>
          </example>

          <example>
            <p>
              When we think of the ring <m>R</m> as a module over itself, the submodules of <m>R</m> are precisely the ideals of <m>R</m>.            
            </p>
          </example>

          <exercise>
            <p>
              The kernel <m>\operatorname{ker}f</m> and image <m>\mathop{\mathrm{im}}f</m> of an <m>R</m>-module homomorphism <m>M\xrightarrow f N</m> are submodules of <m>M</m> and <m>N</m>, respectively.
            </p>
          </exercise>

          <theorem xml:id="thm-fit-mod"><title>First Isomorphism Theorem</title>
            <statement>
              <p>
                If <m>M \xrightarrow{f} N</m> is a homomorphism of <m>R</m>-modules, then <m>M/\operatorname{ker}f \cong \mathop{\mathrm{im}}{f}</m>.
              </p>
            </statement>
          </theorem>
           
        </section>
      </appendix>

      <appendix xml:id="macaulay2"><title>Macaulay2</title>

        <introduction>
          <p>
            There are several computer algebra systems dedicated to algebraic geometry and commutative algebra computations, such as <url href="https://www.singular.uni-kl.de/" visual="https://www.singular.uni-kl.de/"> Singular</url> (more popular among algebraic geometers), <url href="https://cocoa.dima.unige.it/cocoa/" visual="https://cocoa.dima.unige.it/cocoa/"> CoCoA</url> (which is more popular with european commutative algebraists, having originated in Genova, Italy), and <url href="https://faculty.math.illinois.edu/Macaulay2/" visual="https://faculty.math.illinois.edu/Macaulay2/"> Macaulay2</url>. There are many computations you could run on any of these systems (and others), but we will focus on Macaulay2 since it's the most popular computer algebra system among US based commutative algebraists.
          </p>

          <p>
            Macaulay2, as the name suggests, is a successor of a previous computer algebra system named Macaulay. Macaulay was first developed in 1983 by Dave Bayer and Mike Stillman, and while some still use it today, the system has not been updated since its final release in 2000. In 1993, Daniel Grayson and Mike Stillman released the first version of Macaulay2, and the current stable version if Macaulay2 1.16.
          </p>

          <p>
            Macaulay2, or M2 for short, is an open-source project, with many contributors writing packages that are then released with the newest Macaulay2 version. Journals like the Journal of Software for Algebra and Geometry publish peer-refereed short articles that describe and explain the functionality of new packages, with the package source code being peer reviewed as well.
          </p>

          <p>
            The National Science Foundation has funded Macaulay2 since 1992. Besides funding the project through direct grants, the NSF has also funded several Macaulay2 workshops — conferences where Macaulay2 package developers gather to work on new packages, and to share updates to the Macaulay2 core code and recent packages.
          </p>
        </introduction>
      
        <section xml:id="sec-getting-started"><title>Getting Started</title>

          <p>
            A Macaulay2 session often starts with defining some ambient ring we will be doing computations over. Common rings such as the rationals and the integers can be defined using the commands <c>QQ</c> and <c>ZZ</c>; one can easily take quotients or build polynomial rings (in finitely many variables) over these. For example,
          </p>

          <pre>
            i1 : R = ZZ/101[x,y]

            o1 = R

            o1 : PolynomialRing

                and

            i1 : k = ZZ/101;

            i2 : R = k[x,y];
          </pre>

          <p>
            both store the ring <m>\Z/(101)</m> as <m>R</m>, with the small difference that in the second example Macaulay2 has named the coefficient field <m>k</m>. One quirk that might make a difference later is that if we use the first option and later set <m>k</m> to be the field <m>\Z/(101)</m>, our ring <m>R</m> is not a polynomial ring over <m>k</m>. Also, in the second example we ended each line with a <c>;</c>, which tells Macaulay2 to run the command but not display the result of the computation — which is in this case was simply an assignment, so the result is not relevant.
          </p>

          <p>
            We can now do all sorts of computations over our ring <m>R</m>. For example, we can define an ideal in <m>R</m> as follows:
          </p>

          <pre>
            i3 : I = ideal(x^2,y^2,x*y)
                         2   2
            o3 = ideal (x , y , x*y)

            o3 : Ideal of R
          </pre>

          <p>
            Above we have set <m>I</m> to be the ideal in <m>R</m> that is generated by <m>x^2, y^2, xy</m>. The notation <c>ideal( )</c>  requires the usage of <c>^</c> for powers and <c>*</c> for products; alternatively, we can define the exact same ideal with the notation <c>ideal" "</c>, as follows:
          </p>

          <pre>
            i3 : I = ideal"x2,y2,xy"
                         2   2
            o3 = ideal (x , y , x*y)

            o3 : Ideal of R
          </pre>

          <p>
            Now we can use this ideal <m>I</m> to either define a quotient ring <m>S=R/I</m> or the <m>R</m>-module <m>M=R/I</m>, as follows:
          </p>

          <pre>
            i4 : M = R^1/I

            o4 = cokernel | x2 y2 xy |
                                        1
            o4 : R-module, quotient of R

            i5 : S = R/I

            o5 = S

            o5 : QuotientRing
          </pre>

          <p>
            It's important to note that while <m>R</m> is a ring, <m>R^1</m> is the <m>R</m>-module <m>R</m> — this is a very
            important difference for Macaulay2, since these two objects have different types. So <m>S</m> defined
            above is a ring, while <m>M</m> is a module. Notice that Macaulay2 stored the module <m>M</m> as the
            cokernel of the map 
            <me>
              R^3\xrightarrow {[x^2\;\;y^2\;\;xy]} R.
            </me>
          </p>  

          <p>
            When you make a new definition in Macaulay2, you might want to pay attention to
            what ring your new object is defined over. For example, now that we defined this ring <m>S</m>,
            Macaulay2 has automatically taken <m>S</m> to be our current ambient ring, and any calculation
            or definition we run next will be considered over <m>S</m> and not <m>R</m>. If you want to return to the
            original ring <m>R</m>, you must first run the command <c>use R</c>
          </p>  

          <p>
            If you want to work over a finitely generated algebra over one of the basic rings you
            can define in Macaulay2, and your ring is not a quotient of a polynomial ring, you want
            to rewrite this algebra as a quotient of a polynomial ring. For example, suppose you want
            to work over the second Veronese in <m>2</m> variables over our field <m>k</m> from before, meaning the
            algebra <m>k[x^2, xy, y^2]</m>. We need <m>3</m> algebra generators, which we will call <m>a, b, c,</m> corresponding
            to <m>x^2, x^y,</m> and <m>y^2</m>:
          </p>

          <pre>
            o6 = U

            o6 : PolynomialRing
            
            i7 : f = map(R,U,{x^2,x*y,y^2})
                           2        2
            o7 = map(R,U,{x , x*y, y })

            o7 : RingMap R &lt;--- U

            i8 : J = ker f
                        2
            o8 = ideal(b - a*c)

            o8 : Ideal of U

            i9 : T = U/J

            o9 = T

            o9 : QuotientRing
          </pre>

          <p>
            Our ring <m>T</m> at the end is isomorphic to the 2nd Veronese of <m>R</m>, which is the ring we
            wanted. Note the syntax order in <c>map</c>: first target, then source, then a list with the images
            of each algebra generator.
          </p>
        </section>

        <section xml:id="sec-asking-for-help"><title>Asking Macaulay2 for Help</title>
          <p>
            As you're learning how to use Macaulay2, you will often find yourself needing some help.
            Luckily, Macaulay2 can help you directly! For example, suppose you know the name of a
            command, but do not remember the syntax to use it. You can ask <c>?command</c>, and Macaulay2
            will show you the different usages of the command you want to know about.
          </p>    

          <pre>
            i10 : ?primaryDecomposition

            primaryDecomposition -- irredundant primary decomposition of an ideal
              * Usage:
                  primaryDecomposition I
              * Inputs:
                * I, an ideal, in a (quotient of a) polynomial ring R
              * Optional inputs:
                * MinimalGenerators =&gt; a Boolean value, default value true, if false, the
                  components will not be minimalized
                * Strategy =&gt; ..., default value null,
              * Outputs:
                * a list, containing a minimal list of primary ideals whose intersection
                is I

            Ways to use primaryDecomposition :
            ==================================

            * "primaryDecomposition(Ideal)" -- see "primaryDecomposition" -- irredundant
              primary decomposition of an ideal
            * "primaryDecomposition(Module)" -- irredundant primary decomposition of a
              module
            * "primaryDecomposition(Ring)" -- see "primaryDecomposition(Module)" --
              irredundant primary decomposition of a module

            For the programmer
            ==================

            The object "primaryDecomposition" is a method function with options
          </pre>

          <p>
            If instead you'd rather read the complete Macaulay2 documentation on the command
            you are interested in, you can use the <c>viewHelp</c> command, which will open an html page
            with the documentation you asked for. So running
          </p>

          <pre>
            i11 : viewHelp "primaryDecomposition"
          </pre>

          <p>
            will open an html page dedicate to the method primaryDecomposition, which includes
            examples and links to related methods.
          </p>
          
        </section>

        <section xml:id="sec-basic-commands"><title>Basic Commands</title>
          <p>
            Many Macaulay2 commands are easy to guess, and named exactly what you would expect
            them to be named. Often, googling “Macaulay2” followed by a few descriptive words will
            easily land you on the documentation for whatever you are trying to do.
          </p>

          <p>
            Here are some basic commands you will likely use:

            <ul>
              <li>
                <p>
                  <c>ideal (f_1, \dots , f_n)</c> will return the ideal generated by <m>f_1, \dots , f_n</m>. Here products should
                  be indicated by <c>*</c>, and powers with <c>^</c>. If you'd rather not use <c>^</c> (this might be nice if
                  you have lots of powers), you can write <c>ideal (f_1, \dots , f_n)</c> instead.
                </p>
              </li>

              <li>
                <p>
                  <c>map S, R, (f_1, \dots , f_n)</c> gives a ring map <m>R \to S</m> if <m>R</m> and <m>S</m> are rings, and <m>R</m> is a quotient
                  of <m>k[x_1, \dots , x_n]</m>. The resulting ring map will send <m>x_i \mapsto f_i</m>. There are many variations
                  of <c>map</c> — for example, you can use it to define <m>R</m>-module homomorphisms — but you
                  should carefully input the information in the required format. Try <c>viewHelp</c> map in
                  Macaulay2 for more details.
                </p>
              </li>

              <li>
                <p>
                  <c>ker</c><m>(f)</m> returns the kernel of the map <m>f</m> .
                </p>
              </li>

              <li>
                <p>
                  <c>I + J</c> and <c>I*J</c> return the sum and product of the ideals <m>I</m> and <m>J</m>, respectively.
                </p>
              </li>

              <li>
                <p>
                  <c>A = matrix\{\{a_1,1, \dots , a_1,n}, \dots , {a_m,1, \dots , a_m,n\}\}</c> returns the matrix 

                  <me>A=
                    \begin{pmatrix}
                      a_{1,1} &amp; \dots &amp; a_{1,n} \\
                      &amp; \ddots &amp; \\
                      a_{m,1} &amp; \dots &amp; a_{m,n}
                    \end{pmatrix}
                  </me>
                </p>
              </li>
            </ul>
          </p>

          <p>
            As in most programming languages, Macaulay2 follows the convention that the first
            position in a list is the <m>0</m>th position.
          </p>    

          <p>
            The method <c>primaryDecomposition</c> returns a list of primary ideals whose intersection
            is the input ideal, and <c>associatedPrimes</c> returns the list of associated primes of the given
            ideal or module. Operations on lists are often intuitive. For example, let's say we want to
            find the primary component of an ideal with a particular radical.
          </p>  

          <pre>
            i1 : R = QQ[x,y];

            i2 : I = ideal"x2,xy";

            o2 : Ideal of R

            i3 : prim = primaryDecomposition I
                                      2
            o3 = {ideal x, ideal (y, x )}

            o3 : List

            i4 : L = select(prim, Q -&gt; radical(Q) == ideal"x,y")
                             2
            o4 = {ideal (y, x )}

            o4 : List
          </pre>

          <p>
          The method <c>select</c> returns a list of all the elements in our list with the required properties. 
          In this case, if we actually want the primary ideal we just selected, as opposed to a
          list containing it, we need to extract the first component of our list <m>L</m>.
          </p>  

          <pre>
            i5 : L_0
                            2
            o5 = ideal (y, x )

            o5 : Ideal of R
          </pre>
        </section>
      </appendix>

      <appendix xml:id="appendix-list-definitions"><title>List of Definitions</title>
      
        <list-of elements="definition" divisions="chapter" empty="yes"/>
      </appendix>

      <appendix xml:id="appendix-list-results"><title>List of Results</title>
      
        <list-of elements="theorem lemma proposition corollary" divisions="section" empty="yes"/>
      </appendix>
  
      <index>
        <index-list>

        </index-list>
      </index>


      <colophon>
        <p> This book was authored in <pretext />. </p>
      </colophon>

    </backmatter>

  </book>
</pretext>
